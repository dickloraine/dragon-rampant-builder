(this["webpackJsonpdragon-rampant-builder"]=this["webpackJsonpdragon-rampant-builder"]||[]).push([[0],{143:function(e){e.exports=JSON.parse('{"Unit":{"name":"Unit","points":0,"stats":{"attack":0,"move":0,"shoot":0,"courage":0,"armour":0,"attackValue":0,"defenceValue":0,"shootValue":0,"shootRange":"-","movement":0,"strengthPoints":0},"rules":[],"options":{},"fantasticalRules":[]},"Elite Riders":{"name":"Elite Riders","type":"mounted","points":6,"stats":{"attack":5,"move":7,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":5,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Wild Charge","Counter-charge"],"options":{"Mounted missiles":{"points":2,"remove":["Wild Charge","Counter-charge"],"setStats":{"shoot":6,"shootValue":5,"shootRange":12}},"Level Headed":{"points":2,"remove":["Wild Charge"],"setStats":{"move":5}}},"fantasticalRules":["any"]},"Heavy Riders":{"name":"Heavy Riders","type":"mounted","points":4,"stats":{"attack":5,"move":5,"shoot":0,"courage":4,"armour":3,"attackValue":4,"defenceValue":5,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Counter-charge"],"options":{"Mounted missiles":{"points":1,"setStats":{"shoot":6,"shootValue":5,"shootRange":12}},"Chariots":{"points":2,"add":["May not enter rough terrain"],"setStats":{"armour":4}}},"fantasticalRules":["any"]},"Light Riders":{"name":"Light Riders","type":"mounted","points":4,"stats":{"attack":7,"move":5,"shoot":6,"courage":5,"armour":3,"attackValue":5,"defenceValue":6,"shootValue":5,"shootRange":12,"movement":12,"strengthPoints":6},"rules":["Skirmish","Evade"],"options":{"Short range missiles":{"points":-1,"setStats":{"shootRange":6}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Greater Warbeasts":{"name":"Greater Warbeasts","type":"mounted","points":6,"stats":{"attack":5,"move":6,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Ranger","Wild Charge"],"options":{"Flame or Spore Attack":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wild Charge"]},"Ponderous":{"points":1,"remove":["Wild Charge"]},"Cunning":{"points":2,"setStats":{"defenceValue":5}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Lesser Warbeasts":{"name":"Lesser Warbeasts","type":"mounted","points":4,"stats":{"attack":5,"move":6,"shoot":0,"courage":4,"armour":3,"attackValue":4,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":12,"strengthPoints":6},"rules":["Ranger","Wild Charge","Fleet Footed"],"options":{"Flame or Spore Attack":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wild Charge"]},"Cunning":{"points":2,"setStats":{"defenceValue":5}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Elite Foot":{"name":"Elite Foot","type":"foot","points":6,"stats":{"attack":5,"move":5,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":6},"rules":["Ranger"],"options":{"Missiles":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":18}}},"fantasticalRules":["any"]},"Heavy Foot":{"name":"Heavy Foot","type":"foot","points":4,"stats":{"attack":6,"move":5,"shoot":0,"courage":4,"armour":3,"attackValue":5,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":12},"rules":["Wall of Spears"],"options":{"Offensive":{"points":2,"setStats":{"attackValue":4},"remove":["Wall of Spears"]}},"fantasticalRules":["any"]},"Light Foot":{"name":"Light Foot","type":"foot","points":3,"stats":{"attack":6,"move":5,"shoot":0,"courage":4,"armour":2,"attackValue":5,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":8,"strengthPoints":12},"rules":["Wall of Spears"],"options":{"Offensive":{"points":2,"setStats":{"attackValue":4},"remove":["Wall of Spears"]},"Short range missiles":{"points":1,"setStats":{"shoot":6,"shootValue":5,"shootRange":6}},"Mixed Weapons":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wall of Spears"]}},"fantasticalRules":["any"]},"Bellicose Foot":{"name":"Bellicose Foot","type":"foot","points":4,"stats":{"attack":5,"move":6,"shoot":0,"courage":4,"armour":2,"attackValue":3,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":8,"strengthPoints":12},"rules":["Ranger","Wild Charge","Counter-charge vs. foot","Fleet Footed"],"options":{"Terrifically Shiny Armour":{"points":2,"setStats":{"armour":3}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Heavy Missiles":{"name":"Heavy Missiles","type":"foot","points":4,"stats":{"attack":7,"move":6,"shoot":7,"courage":4,"armour":2,"attackValue":6,"defenceValue":5,"shootValue":4,"shootRange":18,"movement":6,"strengthPoints":12},"rules":[],"options":{"Weighty Projectiles":{"points":-1,"setStats":{"shootRange":12}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Cleric","Slayer"]},"Light Missiles":{"name":"Light Missiles","type":"foot","points":4,"stats":{"attack":7,"move":6,"shoot":6,"courage":4,"armour":2,"attackValue":6,"defenceValue":5,"shootValue":5,"shootRange":18,"movement":6,"strengthPoints":12},"rules":[],"options":{"Sharpshooter":{"points":2,"setStats":{"shootValue":4}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Cleric","Slayer"]},"Scouts":{"name":"Scouts","type":"foot","points":2,"stats":{"attack":7,"move":5,"shoot":7,"courage":5,"armour":1,"attackValue":6,"defenceValue":6,"shootValue":5,"shootRange":12,"movement":8,"strengthPoints":6},"rules":["Hard to target","Skirmish","Evade","Fleet Footed"],"options":{},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Exploder","Cleric","Slayer"]},"Ravenous Hordes":{"name":"Ravenous Hordes","type":"foot","points":1,"stats":{"attack":7,"move":6,"shoot":0,"courage":5,"armour":1,"attackValue":6,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":12},"rules":[],"options":{},"fantasticalRules":["No Feelings","Venomous","Hatred","Fear"]}}')},210:function(e){e.exports=JSON.parse('{"Cleric":{"name":"Cleric","points":4},"Slayer":{"name":"Slayer","points":4},"Exploder":{"name":"Exploder","points":2},"Fear":{"name":"Fear","points":2},"Fearful":{"name":"Fearful","points":-2},"Flying":{"name":"Flying","points":2},"Burrowing":{"name":"Burrowing","points":2},"Hatred":{"name":"Hatred","points":1},"Invisibility":{"name":"Invisibility","points":3},"Enchanted Weapons":{"name":"Enchanted Weapons","points":1},"Blessed Weapons":{"name":"Blessed Weapons","points":2},"Mystical Armour":{"name":"Mystical Armour","points":2},"Spellcaster":{"name":"Spellcaster","points":4},"Wizardlings":{"name":"Wizardlings","points":2},"Summoner":{"name":"Summoner","points":3},"No Feelings":{"name":"No Feelings","points":0},"Unstoppable March of the Dead":{"name":"Unstoppable March of the Dead","points":0},"Venomous":{"name":"Venomous","points":2}}')},211:function(e){e.exports=JSON.parse('{"Blessed Weapons":"At the start of each game, before deployment, roll one die to see if your weapons will give you a magical edge against your current opponents: on a roll of a 5-6, the weapon\'s enchantment becomes effective versus all enemy units. An effective blessed weapon rerolls all misses (once) in all Attacks (melee) or Shooting (missile).","Burrowing":"A Flying unit may move over friends and enemies during its movement, but at the end of its move must adhere to the 3\\" proximity rule just like any other unit. This is still a great advantage, as units may not usually interpenetrate in Dragon Rampant. Flying units ignore all terrain for movement and Attacks (as will their opponent for Attacks), and they never benefit from cover. Units targeted by a Flying unit will only benefit from cover if it is buildings, woods, or some other overhead cover. When retreating, a Flying unit must move its Maximum movement, and may move over any other unit; this may result in it retreating off the table more often that you would wish!","Counter-charge":"When an enemy has successfully diced to Attack this unit,  but before it moves, this unit may test for a counter-charge. Test for an Attack at 7+. If it succeeds, the two units meet a proportionate movement distance between their start positions, and both count as Attacking. If it fails, it stands in place for the enemy\'s charge. Counter-charge may not be used if the unit is Battered.","Cleric":"A Cleric unit counts as using Enchanted melee weapons against Undead units, without needing to roll for effectiveness. A Cleric may choose to ignore Fear caused by the Undead.","Counter-charge vs. foot":"Counter-charge","Enchanted Weapons":"At the start of each game, before deployment, roll one die to see if your weapons will give you a magical edge against your current opponents: on a roll of a 6, the weapon\'s enchantment becomes effective versus all enemy units. An effective enchanted weapon rerolls all misses (once) in all Attacks (melee) or Shooting (missile).","Evade":"When an enemy has successfully diced to Attack this unit, but before it moves, this unit may test to Evade at 7+. If it succeeds, it immediately carries out a Skirmish action targeting the Attacking unit only, may not move closer to the Attacking unit, and must avoid other units by 3\\" as usual; casualties inflicted in the Skirmish action cause a Courage test only at the end of the Attack. The charging unit then moves its full charge distance following the Evading unit; if it makes contact it Attacks with the Evading unit reducing its Armour to 1, and if it cannot contact it must move as close as possible. If the Evade test fails, the unit stands in place and awaits attack without shooting or moving, and its Armour drops to 1 during the Attack. Evade cannot be used if the unit is Battered.","Exploder":"As an ordered activation successful on 5+, an Exploder unit will explode. A failed activation test means an implosion occurs, and the unit is removed from play without damaging any other units, and counts as casualties.    The explosion affects all units \u2013 friend and foe alike \u2013 within a 6\\" radius of the exploding unit. This works exactly as a Shoot action hitting on 3+ (the number of dice rolled depending on the Exploder\'s Strength Points, as for all Shooting), but affects all units within the blast zone. Once exploded, the Exploder unit is removed from the table and counts as destroyed.","Fear":"Courage Tests caused as a result of Attacking (but not Shooting) by a Fear unit suffer an additional \u20131 to the total. Should two units that cause Fear encounter one another, the effect of this rule is cancelled between those units. Undead units are not affected by Fear.","Fearful":"Every Courage and Rally test suffers \u20131 to the total; if attacked by a unit causing Fear, Courage tests are taken at \u20132.","Fleet Footed":"This unit does not halve its movement in rough terrain.","Flying":"A Flying unit may move over friends and enemies during its movement, but at the end of its move must adhere to the 3\\" proximity rule just like any other unit. This is still a great advantage, as units may not usually interpenetrate in Dragon Rampant. Flying units ignore all terrain for movement and Attacks (as will their opponent for Attacks), and they never benefit from cover. Units targeted by a Flying unit will only benefit from cover if it is buildings, woods, or some other overhead cover. When retreating, a Flying unit must move its Maximum movement, and may move over any other unit; this may result in it retreating off the table more often that you would wish!","Hard to target":"Scouts count as Armour 2 versus Shooting and may only be targeted within 12\\".","Hatred":"Units with Hatred gain the Wild Charge against enemy units they have Hatred of. Units with Hatred that already have the Wild Charge special rule automatically pass their Wild Charge tests against enemy units they have Hatred of, meaning that your unit must always Attack.","Invisibility":"Invisible units may not be targeted by ranged attacks except for spells, and do not block line of sight. Invisible units become visible during Attacks and may be targeted by enemy Attacks. Invisible units may achieve objectives and use the unit proximity rule in the same way as other units; they cannot be passed through by other units, as everyone senses their presence even if they can\'t see them clearly.","Mystical Armour":"If a unit is equipped with mystical armour, for every Strength Point lost, roll one  die. On a roll of a 6, that point will be ignored.","No Feelings":"Undead. Courage value of 0+. This means that your unit will never become Battered, but will still rout on a negative final score (their magical reanimation being broken). They also ignore the effect of Fear. Such units are, however, fragile due to a lack of armour or calcium deficiency, meaning that any hits inflicted during Attacks are rounded up (as opposed to down) when working out how many Strength Points are lost","Ranger":"This unit uses its normal Attack/Defence/Armour profile when fighting in rough terrain.","Skirmish":"As an ordered activation, successful on a 7+, the unit may choose to make a half move and Shoot either before or after this movement takes place. All models in the unit Shoot with \u20131 to their dice scores.","Slayer":"A Slayer unit counts as using Enchanted melee weapons against one Type of enemies, without needing to roll for effectiveness. A Slayer may choose to ignore Fear caused by that Type.","Spellcaster":"Can cast all Spells from the Spell Table.","Summoner":"As an ordered activation on 6+, a Summoner unit may try to raise 1 unit per turn. A Summoner that is at half strength or below (6 or 3 Strength Points) has a \u20131 modifier to its activation test for Summoning. If you deploy a Summoner in a scenario where some of your units are deployed off-table, a \u20131 modifier is applied to all Summoning activation tests for the scenario\'s duration. If successful, the summoned unit must be placed within 12\\" of the Summoner, and no closer than 6\\" to an enemy unit. If this is not achievable, the successfully summoned unit may not be placed until summoned again in another turn. A summoned unit may be any Flying, Burrowing or Undead unit, or other creatures that both players agree can materialize or spring from the ground. The summoned unit may not take further action in this phase, but will do so during your next turn. Until on the table, the summoned units do not count as casualties or for victory purposes.","Unstoppable March of the Dead":"This is a Leader trait usable by a Warband consisting only of units from the Graveyard Dwellers list (see later); it may be selected instead of the rolled Trait if you roll an 8 or higher on the Leader Skills table. Your Warband only takes Courage tests for casualties from Attacking or Shooting, and when Rallying.","Venomous":"Any Attack die (but not Defence die) that rolls 6 does 2 Strength Points of damage.","Wall of Spears":"There needs to be 6 or more Strength Points in unit to form a Wall of Spears. On a Move order, form the unit into base-to-base contact; a Wall of Spears cannot form in rough terrain or in cover, and it cannot move in this formation. Wall of Spears increases their Armour by 1 point against Attacks but not Shooting (to 4 for Heavy Foot). If the unit becomes Battered or must retreat while in a Wall of Spears, the formation is broken.","Wild Charge":"If the unit is within Attack range of an enemy unit, you must test to activate an Attack; this is the only order the unit can be given. Wild Charge may not be used if the unit is Battered.","Wizardlings":"A Wizardling chooses three spells from the Spell Table, and may not use any other spells. The spells must be chosen before the scenario is announced."}')},269:function(e,t,a){e.exports=a(463)},463:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(16),i=a.n(r),s=a(29),l=a(24),c=a(14),u=a(206),m=a(207),d=a(233),h=a(208),f=a(234),p=a(232),g=a.n(p),v=a(528),y=a(540),E=a(40),b=a(536),S=a(19),k=a(529),w=a(532),C=a(209),O=a.n(C),R=a(530),x=a(531),j=a(109),A=a.n(j),V=a(547),W=a(515),F=a(465),U=a(514),D=a(509);function L(e){var t=e.onClose,a=e.selectedValue,n=e.open,r=e.options,i=e.title;return o.a.createElement(D.a,{onClose:function(){return t(a)},open:n},o.a.createElement(U.a,null,i),o.a.createElement(W.a,null,r.map((function(e){return o.a.createElement(F.a,{button:!0,onClick:function(){return function(e){return t(e)}(e)},key:e},e)}))))}function I(e){var t=e.name,a=e.options,n=e.points,r=e.onClose,i=o.a.useState(!1),s=Object(S.a)(i,2),l=s[0],c=s[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{variant:"h5",onClick:function(){return c(!0)}},o.a.createElement(V.a,{label:n,color:"primary"}),"\xa0\xa0",t,o.a.createElement(A.a,null)),o.a.createElement(L,{selectedValue:t,open:l,onClose:function(e){c(!1),e!==t&&r(e)},options:a,title:"Choose unit type"}))}var P=a(517),M=a(516),T=a(518),B=a(519),H=a(543);function z(e){var t=e.unit,a=e.optionsData,n=e.onChange;if(!a||!Object.keys(a).length)return o.a.createElement("div",null);var r=function(e){return function(a){var o=Object(c.a)({},t);a.target.checked?o.options=[].concat(Object(s.a)(o.options),[e]):o.options=o.options.filter((function(t){return t!==e})),n(o)}};return o.a.createElement(M.a,{component:"fieldset",style:{marginTop:10}},o.a.createElement(P.a,{component:"legend"},"Options"),o.a.createElement(T.a,null,Object.keys(a).map((function(e){return o.a.createElement(B.a,{control:o.a.createElement(H.a,{onChange:r(e),checked:t.options.includes(e)}),label:o.a.createElement(E.a,null,e," ",o.a.createElement(E.a,{color:"secondary",component:"span"},"@",a[e].points)),key:e})}))))}var N=a(520),K=a(541),G=a(522);var J=function(e){var t=e.unitData,a=e.onChange,n=e.fantasticalRulesData,r=e.unit,i=o.a.useState(!1),l=Object(S.a)(i,2),u=l[0],m=l[1],d=t.fantasticalRules;if(!d||!d.length)return o.a.createElement("div",null);if("any"===d[0]&&(d=Object.keys(n)),"exclude"===d[0]){var h=d.slice(1);d=Object.keys(n);var f=!0,p=!1,g=void 0;try{for(var v,b=function(){var e=v.value;d=d.filter((function(t){return t!==e}))},k=h[Symbol.iterator]();!(f=(v=k.next()).done);f=!0)b()}catch(C){p=!0,g=C}finally{try{f||null==k.return||k.return()}finally{if(p)throw g}}}var w=function(){return m(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,{onClick:w,component:"legend"},"Fantastical Rules ",o.a.createElement(A.a,null)),r.fantasticalRules&&r.fantasticalRules.length>0&&r.fantasticalRules.map((function(e){return o.a.createElement("div",{key:e},o.a.createElement(B.a,{control:o.a.createElement(H.a,{checked:!0,onClick:function(){return a(Object(c.a)({},r,{fantasticalRules:Object(s.a)(r.fantasticalRules.filter((function(t){return t!==e})))}))}}),label:o.a.createElement(E.a,null,e," ",o.a.createElement(E.a,{color:"secondary",component:"span"},"@",n[e].points,"}")),key:e}))})),o.a.createElement(M.a,{style:{marginTop:10,width:0,height:0}},o.a.createElement(K.a,{open:u,onClose:function(){return m(!1)},onOpen:w,IconComponent:function(){return o.a.createElement(y.a,null)},multiple:!0,value:r.fantasticalRules,onChange:function(e){return a(Object(c.a)({},r,{fantasticalRules:Object(s.a)(e.target.value)}))},input:o.a.createElement(N.a,null),renderValue:function(){return" "}},d.map((function(e){return o.a.createElement(G.a,{key:e,value:e},r.fantasticalRules.indexOf(e)<0&&o.a.createElement(E.a,null,e," ",o.a.createElement(E.a,{color:"secondary",component:"span"},"@",n[e].points)),r.fantasticalRules.indexOf(e)>-1&&o.a.createElement(E.a,{color:"primary"},e," ",o.a.createElement(E.a,{color:"secondary",component:"span"},"@",n[e].points)))})))))},Y=a(524),q=a(525),$=a(527),Q=a(523),X=a(526),Z=a(544);function _(e){var t=e.stats,a=t.shoot?"".concat(t.shoot,"+"):"-",n=t.shoot?"".concat(t.shootValue,"+/").concat(t.shootRange,'"'):"-";return o.a.createElement(Q.a,null,o.a.createElement(Y.a,{size:"small"},o.a.createElement(Z.a,{xsDown:!0},o.a.createElement(q.a,null,o.a.createElement(X.a,null,o.a.createElement($.a,null,"Attack"),o.a.createElement($.a,null,t.attack,"+"),o.a.createElement($.a,null,"Attack Value"),o.a.createElement($.a,null,t.attackValue,"+")),o.a.createElement(X.a,null,o.a.createElement($.a,null,"Move"),o.a.createElement($.a,null,t.move,"+"),o.a.createElement($.a,null,"Defence Value"),o.a.createElement($.a,null,t.defenceValue,"+")),o.a.createElement(X.a,null,o.a.createElement($.a,null,"Shoot"),o.a.createElement($.a,null,a),o.a.createElement($.a,null,"Shoot Value"),o.a.createElement($.a,null,n)),o.a.createElement(X.a,null,o.a.createElement($.a,null,"Courage"),o.a.createElement($.a,null,t.courage,"+"),o.a.createElement($.a,null,"Movement"),o.a.createElement($.a,null,t.movement,'"')),o.a.createElement(X.a,null,o.a.createElement($.a,null,"Armour"),o.a.createElement($.a,null,t.armour),o.a.createElement($.a,null,"Strength Points"),o.a.createElement($.a,null,t.strengthPoints)))),o.a.createElement(Z.a,{smUp:!0},o.a.createElement(q.a,null,o.a.createElement(X.a,null,o.a.createElement($.a,null,"A"),o.a.createElement($.a,null,t.attack,"+"),o.a.createElement($.a,null,"AV"),o.a.createElement($.a,null,t.attackValue,"+")),o.a.createElement(X.a,null,o.a.createElement($.a,null,"M"),o.a.createElement($.a,null,t.move,"+"),o.a.createElement($.a,null,"DV"),o.a.createElement($.a,null,t.defenceValue,"+")),o.a.createElement(X.a,null,o.a.createElement($.a,null,"S"),o.a.createElement($.a,null,a),o.a.createElement($.a,null,"SV"),o.a.createElement($.a,null,n)),o.a.createElement(X.a,null,o.a.createElement($.a,null,"C"),o.a.createElement($.a,null,t.courage,"+"),o.a.createElement($.a,null,"MR"),o.a.createElement($.a,null,t.movement,'"')),o.a.createElement(X.a,null,o.a.createElement($.a,null,"Ar"),o.a.createElement($.a,null,t.armour),o.a.createElement($.a,null,"SP"),o.a.createElement($.a,null,t.strengthPoints))))))}function ee(e){var t=e.rules;return t&&t.length?o.a.createElement(v.a,null,o.a.createElement(E.a,{variant:"h6",style:{marginTop:10}},"Special Rules"),o.a.createElement(W.a,null,t.map((function(e){return o.a.createElement(F.a,{key:e},e)})))):o.a.createElement(o.a.Fragment,null)}var te=function(e){var t=e.id,a=e.unit,n=e.updateUnit,r=e.updateArmyCost,i=e.data,u=e.setUnit,m=e.removeUnit,d=e.ui,h=function(e){var a=i.unitData[e.name],o=e.points;e=Object(c.a)({},a,{options:Object(s.a)(e.options),fantasticalRules:Object(s.a)(e.fantasticalRules)});var u=a.points,m=!0,d=!1,h=void 0;try{for(var f,p=e.options[Symbol.iterator]();!(m=(f=p.next()).done);m=!0){var g=f.value;if(u+=(g=a.options[g]).points,g.setStats)for(var v=0,y=Object.entries(g.setStats);v<y.length;v++){var E=Object(S.a)(y[v],2),b=E[0],k=E[1];e=Object(c.a)({},e,{stats:Object(c.a)({},e.stats,Object(l.a)({},b,k))})}if(g.add){var w=!0,C=!1,O=void 0;try{for(var R,x=g.add[Symbol.iterator]();!(w=(R=x.next()).done);w=!0){var j=R.value;e.rules=[].concat(Object(s.a)(e.rules),[j])}}catch(H){C=!0,O=H}finally{try{w||null==x.return||x.return()}finally{if(C)throw O}}}if(g.remove){var A=!0,V=!1,W=void 0;try{for(var F,U=function(){var t=F.value;e.rules=e.rules.filter((function(e){return e!==t}))},D=g.remove[Symbol.iterator]();!(A=(F=D.next()).done);A=!0)U()}catch(H){V=!0,W=H}finally{try{A||null==D.return||D.return()}finally{if(V)throw W}}}}}catch(H){d=!0,h=H}finally{try{m||null==p.return||p.return()}finally{if(d)throw h}}var L=!0,I=!1,P=void 0;try{for(var M,T=e.fantasticalRules[Symbol.iterator]();!(L=(M=T.next()).done);L=!0){var B=M.value;u+=(B=i.fantasticalRulesData[B]).points,e.rules=[].concat(Object(s.a)(e.rules),[B.name])}}catch(H){I=!0,P=H}finally{try{L||null==T.return||T.return()}finally{if(I)throw P}}e=Object(c.a)({},e,{points:u}),r(u-o),n(t,Object(c.a)({},e))};return o.a.createElement(k.a,{variant:"outlined",style:{marginBottom:25,minWidth:400}},o.a.createElement(R.a,{title:o.a.createElement(I,{name:a.name,onClose:function(e){!function(e){var o=a.points;n(t,{points:e}),r(e-o)}(i.unitData[e].points),u(t,e)},options:i.unitNames,points:a.points}),action:o.a.createElement(x.a,{onClick:function(){return m(t)}},o.a.createElement(O.a,null))}),o.a.createElement(w.a,null,!d.editMode&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_,{stats:a.stats}),o.a.createElement(ee,{rules:a.rules})),!d.viewMode&&o.a.createElement(o.a.Fragment,null,o.a.createElement(z,{onChange:h,optionsData:i.unitData[a.name].options,unit:a}),o.a.createElement(y.a,null,o.a.createElement(J,{onChange:h,unitData:i.unitData[a.name],fantasticalRulesData:i.fantasticalRulesData,unit:a})))))},ae=a(143),ne=a(210),oe=a(211),re=a(533),ie=a(534),se=a(535),le=a(217),ce=a.n(le),ue=a(218),me=a.n(ue),de=a(219),he=a.n(de),fe=a(548),pe=a(466),ge=a(213),ve=a.n(ge);function ye(e){var t=e.onClick,a=e.getSavedLists,n=e.showText,r=void 0!==n&&n,i=o.a.useState(!1),s=Object(S.a)(i,2),l=s[0],c=s[1],u=function(){return c(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe.a,{title:"Load"},o.a.createElement(pe.a,{color:"inherit",onClick:u},o.a.createElement(ve.a,null))),r&&o.a.createElement(E.a,{onClick:u},"Load"),o.a.createElement(L,{open:l,onClose:function(e){c(!1),e&&t(e)},options:a(),title:"Choose List to load"}))}var Ee=a(214),be=a.n(Ee);function Se(e){var t=e.onClick,a=e.showError,n=e.showSuccess,r=e.showText,i=void 0!==r&&r,s=function(){t()?n("Saved!"):a("You have to give the list a name!")};return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe.a,{title:"Save"},o.a.createElement(pe.a,{color:"inherit",onClick:s},o.a.createElement(be.a,null))),i&&o.a.createElement(E.a,{onClick:s},"Save"))}var ke=a(549),we=a(216),Ce=a.n(we),Oe=a(215),Re=a.n(Oe);function xe(e){var t=e.onClick,a=e.getSavedLists,n=e.showSuccess,r=e.showText,i=void 0!==r&&r,s=o.a.useState(!1),l=Object(S.a)(s,2),c=l[0],u=l[1],m=function(){return u(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe.a,{title:"Delete List"},o.a.createElement(pe.a,{color:"inherit",onClick:m},o.a.createElement(Re.a,null))),i&&o.a.createElement(E.a,{onClick:m},"Delete"),o.a.createElement(L,{open:c,onClose:function(e){u(!1),t(e),e&&n("Deleted!")},options:function(){var e=a();return e.push("Delete all"),e}(),title:"Choose List to delete"}))}function je(e){var t=e.loadList,a=e.saveList,n=e.removeList,r=e.getSavedLists,i=e.showError,s=e.showSuccess,l=o.a.useState(!1),c=Object(S.a)(l,2),u=c[0],m=c[1],d=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&m(e)}},h=function(e){return function(){e.apply(void 0,arguments),m(!1)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce.a,{onClick:d(!0)}),o.a.createElement(ke.a,{open:u,onClose:d(!1)},o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,null,o.a.createElement(F.a,{button:!0,key:"Save"},o.a.createElement(Se,{onClick:h(a),showError:i,showSuccess:s,showText:!0})),o.a.createElement(F.a,{button:!0,key:"Load"},o.a.createElement(ye,{onClick:h(t),getSavedLists:r,showText:!0})),o.a.createElement(F.a,{button:!0,key:"Delete"},o.a.createElement(xe,{onClick:h(n),getSavedLists:r,showSuccess:s,showText:!0}))))))}var Ae=a(545),Ve=a(542);function We(e){return o.a.createElement(Ve.a,Object.assign({elevation:6,variant:"filled"},e))}function Fe(e){var t=e.open,a=e.setOpen,n=e.message,r=function(e,t){"clickaway"!==t&&a(!1)};return o.a.createElement(Ae.a,{open:t,autoHideDuration:6e3,onClose:r},o.a.createElement(We,{onClose:r,severity:"error"},n))}function Ue(e){var t=e.open,a=e.setOpen,n=e.message,r=function(e,t){"clickaway"!==t&&a(!1)};return o.a.createElement(Ae.a,{open:t,autoHideDuration:6e3,onClose:r},o.a.createElement(We,{onClose:r,severity:"success"},n))}var De=Object(re.a)((function(e){return{root:{marginBottom:25},flexing:{display:"flex",flexGrow:1,alignItems:"center"},flexingend:{display:"flex",flexGrow:1,justifyContent:"flex-end",alignItems:"center"}}}));function Le(e){var t=e.ui,a=e.setUIOption,n=e.setUIOptions,r=e.armyCost,i=e.reload,s=e.saveList,u=e.loadList,m=e.removeList,d=e.getSavedLists,h=o.a.useState(!1),f=Object(S.a)(h,2),p=f[0],g=f[1],v=o.a.useState(!1),y=Object(S.a)(v,2),k=y[0],w=y[1],C=o.a.useState(""),O=Object(S.a)(C,2),R=O[0],x=O[1],j=o.a.useState(""),A=Object(S.a)(j,2),V=A[0],W=A[1],F=De(),U=function(e){W(e),w(!0)},D=function(e){x(e),g(!0)},L=function(e,t){var a="viewMode"===e?"editMode":"viewMode",o=Object(l.a)({},e,t);t&&(o=Object(c.a)({},o,Object(l.a)({},a,!1))),n(o)},I=function(e){var n=e.option,r=e.Icon,i=e.title,s=e.onClick,l=void 0===s?a:s;return o.a.createElement(fe.a,{title:i},o.a.createElement(pe.a,{color:"inherit",onClick:function(){l(n,!t[n])}},o.a.createElement(r,{fontSize:"small",color:t[n]?"inherit":"disabled"})))};return o.a.createElement("div",{className:F.root},o.a.createElement(ie.a,{position:"fixed"},o.a.createElement(se.a,null,o.a.createElement("div",{className:F.flexing},o.a.createElement(je,{loadList:u,saveList:s,removeList:m,getSavedLists:d,showError:U,showSuccess:D}),o.a.createElement(Z.a,{smDown:!0},o.a.createElement(E.a,{variant:"h5"},"\xa0\xa0Dragon Rampant Army Builder\xa0\xa0")),o.a.createElement(Z.a,{mdUp:!0},o.a.createElement(E.a,{variant:"h5"},"\xa0\xa0DRAB\xa0\xa0")),o.a.createElement(pe.a,{color:"inherit",onClick:i},o.a.createElement(ce.a,null)),o.a.createElement(Se,{onClick:s,showError:U,showSuccess:D}),o.a.createElement(ye,{onClick:u,getSavedLists:d})),o.a.createElement("div",{className:F.flexingend},o.a.createElement(I,{option:"viewMode",Icon:me.a,title:"View mode",onClick:L}),o.a.createElement(I,{option:"editMode",Icon:he.a,title:"Edit mode",onClick:L}),o.a.createElement(Z.a,{smDown:!0},o.a.createElement(E.a,{variant:"h6"},"\xa0\xa0\xa0\xa0Total Points\xa0\xa0",o.a.createElement(b.a,{color:"secondary",size:"small"},o.a.createElement(E.a,{variant:"h6"},r)))),o.a.createElement(Z.a,{mdUp:!0},o.a.createElement(E.a,{variant:"h6"},"\xa0\xa0\xa0\xa0",o.a.createElement(b.a,{color:"secondary",size:"small"},o.a.createElement(E.a,{variant:"h6"},r))))))),o.a.createElement(se.a,null),o.a.createElement(Ue,{message:R,open:p,setOpen:function(e){return g(e)}}),o.a.createElement(Fe,{message:V,open:k,setOpen:function(e){return w(e)}}))}var Ie=a(114),Pe=a.n(Ie),Me=a(546),Te=a(537),Be=a(538),He=a(539);function ze(e){var t=e.units,a=e.setUIOption,n=e.rulesData,r=e.rulesSummaryExpanded;return o.a.createElement(Me.a,{expanded:r,onChange:function(){return a("rulesSummaryExpanded",!r)},style:{minWidth:400,maxWidth:1210}},o.a.createElement(Te.a,{expandIcon:o.a.createElement(Pe.a,null)},o.a.createElement(E.a,{variant:"h5"},"Rules Summary")),o.a.createElement(Be.a,{style:{maxWidth:800}},o.a.createElement(W.a,null,function(){var e=new Set;for(var a in t){var o=!0,r=!1,i=void 0;try{for(var l,c=t[a].rules[Symbol.iterator]();!(o=(l=c.next()).done);o=!0){var u=l.value;n[n[u]]?e.add(n[u]):e.add(u)}}catch(m){r=!0,i=m}finally{try{o||null==c.return||c.return()}finally{if(r)throw i}}}return Object(s.a)(e).sort()}().map((function(e){return o.a.createElement(F.a,{key:e},o.a.createElement(He.a,{primary:e,secondary:n[e]||""}))})))))}var Ne=function(e,t){var a={};for(var n in e)t(e[n],n)&&(a=Object(c.a)({},a,Object(l.a)({},n,e[n])));return a},Ke=function(e,t,a){return Object.entries(e).reduce((function(e,a){var n=Object(S.a)(a,2),o=n[0],r=n[1];return t(e,r,o)}),a)},Ge=a(22);function Je(e){var t=e.data,a=e.height,n=e.colors;return o.a.createElement(Ge.i,{height:a},o.a.createElement(Ge.b,{data:t,margin:{top:20,right:30,left:20,bottom:5}},o.a.createElement(Ge.c,{strokeDasharray:"3 3"}),o.a.createElement(Ge.k,{dataKey:"name"}),o.a.createElement(Ge.l,null),o.a.createElement(Ge.f,null),o.a.createElement(Ge.a,{dataKey:"Units",fill:n[0],minPointSize:3},o.a.createElement(Ge.e,{dataKey:"Units",position:"top"})),o.a.createElement(Ge.a,{dataKey:"Points",fill:n[1],minPointSize:3},o.a.createElement(Ge.e,{dataKey:"Points",position:"top"}))))}function Ye(e){var t=e.data,a=e.height,n=e.colors;return o.a.createElement(Ge.i,{height:a},o.a.createElement(Ge.h,null,o.a.createElement(Ge.g,{data:t,dataKey:"value",label:$e,labelLine:!1,outerRadius:80},t.map((function(e,t){return o.a.createElement(Ge.d,{key:e,fill:n[t]})}))),o.a.createElement(Ge.j,null),o.a.createElement(Ge.f,null)))}var qe=Math.PI/180,$e=function(e){var t=e.cx,a=e.cy,n=e.midAngle,r=e.innerRadius,i=e.outerRadius,s=e.percent,l=r+.5*(i-r),c=t+l*Math.cos(-n*qe),u=a+l*Math.sin(-n*qe),m=(100*s).toFixed(0);return o.a.createElement("text",{x:c,y:u,fill:"black",textAnchor:c>t?"start":"end",dominantBaseline:"central"},m>0?"".concat(m,"%"):"")};function Qe(e){var t=e.armyCost,a=e.units,n=e.unitData,r=e.fantasticalRulesData,i=e.statisticsExpanded,s=e.setUIOption,l=Ke(a,(function(e,t){return t.options.reduce((function(e,a){return e+n[t.name].options[a].points}),e)}),0),c=Ke(a,(function(e,t){return t.fantasticalRules.reduce((function(e,t){return e+r[t].points}),e)}),0),u=["#8884d8","#82ca9d","#FF8042"],m=t,d=Object.keys(a).length,h=Ne(a,(function(e){return"mounted"===e.type})),f=Ne(a,(function(e){return"foot"===e.type})),p=Ne(a,(function(e){return e.stats.shoot>0})),g=Ke(a,(function(e,t){return e+n[t.name].points}),0),v=[{name:"Mounted",Units:Object.keys(h).length,Points:Ke(h,(function(e,t){return e+t.points}),0)},{name:"Foot",Units:Object.keys(f).length,Points:Ke(f,(function(e,t){return e+t.points}),0)},{name:"Ranged",Units:Object.keys(p).length,Points:Ke(p,(function(e,t){return e+t.points}),0)}],y=[{name:"Units",value:g},{name:"Options",value:l<0?0:l},{name:"Fantastical Rules",value:c}];return o.a.createElement(Me.a,{expanded:i,onChange:function(){return s("statisticsExpanded",!i)},style:{minWidth:400,maxWidth:1210}},o.a.createElement(Te.a,{expandIcon:o.a.createElement(Pe.a,null)},o.a.createElement(E.a,{variant:"h5"},"Statistics")),o.a.createElement(Be.a,null,o.a.createElement("div",null,o.a.createElement(V.a,{label:m+" Points",color:"primary",style:{marginRight:25,marginBottom:25}}),o.a.createElement(V.a,{label:d+" Units",color:"primary",style:{marginRight:25,marginBottom:25}}),o.a.createElement(V.a,{label:(m/(d||1)).toPrecision(2)+" Points per unit",color:"primary",style:{marginRight:25,marginBottom:25}}),g>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(E.a,{variant:"h6",style:{marginTop:25}},"Unit Distribution"),o.a.createElement(Je,{data:v,height:300,colors:u}),o.a.createElement(E.a,{variant:"h6",style:{marginTop:25}},"Point Distribution"),o.a.createElement(Ye,{data:y,height:300,colors:u})))))}var Xe=a(36),Ze=a.n(Xe),_e={viewMode:!1,editMode:!1,rulesSummaryExpanded:!0,statisticsExpanded:!0},et=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).componentDidMount=function(){var e=Object(c.a)({},_e,{},Ze.a.get("uiOptions"));a.setState({ui:e}),a.addUnit()},a.reload=function(){a.setState({name:"New List",forceInputUpdate:a.state.forceUpdateKey?0:1,armyCost:0,nextID:1,units:{0:Object(c.a)({},a.state.data.unitData.Unit,{options:[],fantasticalRules:[]})},unitOrder:[0]})},a.addUnit=function(){var e=a.state.nextID;a.setState({nextID:e+1,units:Object(c.a)({},a.state.units,Object(l.a)({},e,Object(c.a)({},a.state.data.unitData.Unit,{options:[],fantasticalRules:[]}))),unitOrder:[].concat(Object(s.a)(a.state.unitOrder),[e])})},a.setUnit=function(e,t){a.setState({units:Object(c.a)({},a.state.units,Object(l.a)({},e,Object(c.a)({},a.state.data.unitData[t],{options:[],fantasticalRules:[]})))})},a.removeUnit=function(e){var t=Object(c.a)({},a.state.units),n=t[e].points;delete t[e],a.updateArmyCost(-n),a.setState({units:Object(c.a)({},t),unitOrder:a.state.unitOrder.filter((function(t){return t!==e}))})},a.updateUnit=function(e,t){a.setState({units:Object(c.a)({},a.state.units,Object(l.a)({},e,Object(c.a)({},a.state.units[e],{},t)))})},a.updateArmyCost=function(e){a.setState({armyCost:a.state.armyCost+e})},a.setUIOption=function(e,t){a.setState({ui:Object(c.a)({},a.state.ui,Object(l.a)({},e,t))}),Ze.a.set("uiOptions",Object(c.a)({},a.state.ui,Object(l.a)({},e,t)))},a.setUIOptions=function(e){a.setState({ui:Object(c.a)({},a.state.ui,{},e)}),Ze.a.set("uiOptions",Object(c.a)({},a.state.ui,{},e))},a.saveList=function(){if("New List"===a.state.name)return!1;var e=Ze.a.get("savedRosters")||[];return e=Object(c.a)({},e,Object(l.a)({},a.state.name,a.state)),Ze.a.set("savedRosters",e),!0},a.loadList=function(e){var t=Ze.a.get("savedRosters")[e];t=Object(c.a)({},t,{ui:a.state.ui,data:a.state.data,forceInputUpdate:a.state.forceUpdateKey?0:1}),a.setState(t)},a.getSavedLists=function(){var e=[];for(var t in Ze.a.get("savedRosters"))e.push(t);return e},a.removeList=function(e){if("Delete all"===e)Ze.a.set("savedRosters",[]);else{var t=Ze.a.get("savedRosters");t=Object.keys(t).filter((function(t){return t!==e})),Ze.a.set("savedRosters",t)}},a.state={name:"New List",armyCost:0,nextID:0,units:{},unitOrder:[],data:{unitData:ae,unitNames:Object.keys(ae).slice(1),fantasticalRulesData:ne,rulesData:oe},ui:Object(c.a)({},_e),forceInputUpdate:0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(v.a,null,o.a.createElement(Le,{setUIOption:this.setUIOption,setUIOptions:this.setUIOptions,ui:this.state.ui,armyCost:this.state.armyCost,reload:this.reload,saveList:this.saveList,loadList:this.loadList,removeList:this.removeList,getSavedLists:this.getSavedLists}),o.a.createElement(y.a,null,o.a.createElement(M.a,null,o.a.createElement(E.a,{style:{border:0,marginBottom:25},variant:"h4",key:this.state.forceInputUpdate,component:"Input",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),!Object.keys(this.state.units).length&&o.a.createElement(E.a,{variant:"h6",style:{marginBottom:25}},"Click the button to add your first unit!"),o.a.createElement(y.a,{display:"flex",flexDirection:"row",flexWrap:"wrap"},this.state.unitOrder.map((function(t){return o.a.createElement(te,{id:t,key:t,unit:e.state.units[t],updateUnit:e.updateUnit,updateArmyCost:e.updateArmyCost,removeUnit:e.removeUnit,setUnit:e.setUnit,data:e.state.data,ui:e.state.ui})}))),!this.state.ui.viewMode&&o.a.createElement(b.a,{color:"secondary",style:{marginLeft:25,marginBottom:25},onClick:this.addUnit},o.a.createElement(g.a,null)),o.a.createElement(ze,{units:this.state.units,rulesData:this.state.data.rulesData,rulesSummaryExpanded:this.state.ui.rulesSummaryExpanded,setUIOption:this.setUIOption}),o.a.createElement(Qe,{armyCost:this.state.armyCost,units:this.state.units,unitData:this.state.data.unitData,fantasticalRulesData:this.state.data.fantasticalRulesData,statisticsExpanded:this.state.ui.statisticsExpanded,setUIOption:this.setUIOption})))}}]),t}(o.a.Component),tt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function at(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(o.a.createElement(et,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dragon-rampant-builder",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/dragon-rampant-builder","/service-worker.js");tt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):at(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):at(t,e)}))}}()}},[[269,1,2]]]);
//# sourceMappingURL=main.94228964.chunk.js.map