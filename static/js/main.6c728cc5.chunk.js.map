{"version":3,"sources":["store/appStateSlice.tsx","store/data.tsx","store/rosterSlice.tsx","store/persistantStorage.tsx","store/uiSlice.tsx","store/store.tsx","hooks/useUserTheme.tsx","components/ListDialog.tsx","components/Unit/buildUnit.tsx","components/ExpandIcon.tsx","components/TextInputDialog.tsx","components/Unit/Actions.tsx","components/Unit/FantasticalRules.tsx","components/Unit/Options.tsx","components/Unit/SpecialRules.tsx","components/Unit/StatBlock.tsx","components/Unit/UnitSelector.tsx","components/Unit/Unit.tsx","components/Roster.tsx","components/LoadList.tsx","components/SaveList.tsx","components/About.tsx","components/Backup.tsx","components/DarkMode.tsx","components/DeleteList.tsx","components/ExportList.tsx","components/ImportList.tsx","components/Restore.tsx","components/SideMenu.tsx","components/AppBar/TotalPoints.tsx","components/AppBar/AppBar.tsx","components/ListName.tsx","components/RulesSummary.tsx","components/ShowFeedback.tsx","components/SpellTable.tsx","components/Statistics/PointDistributionChart.js","components/Statistics/UnitDistributionChart.js","components/Statistics/Statistics.tsx","components/Validation.tsx","components/App.tsx","serviceWorker.js","index.tsx"],"names":["appStateSlice","createSlice","name","initialState","feedback","open","message","severity","inputUpdate","autoDarkMode","reducers","toggleForceInputUpdate","state","closeFeedback","showFeedback","reducer","action","payload","prepare","setAutoDarkMode","actions","data","unitData","unitNames","Object","keys","slice","fantasticalRulesData","rulesData","spellData","rosterInitialState","nextID","units","unitOrder","rosterSlice","newRoster","setRoster","_","updateRoster","addUnit","unit","index","Unit","options","fantasticalRules","id","push","splice","setUnit","updateUnit","newAttributes","removeUnit","indexOf","renameUnit","customName","moveUnit","direction","nextIndex","length","getTotalPoints","createSelector","values","reduce","acc","points","getSpecialRules","rules","rule","sort","filter","ary","uiStore","localforage","createInstance","driver","LOCALSTORAGE","rosterStore","storeName","uiSlice","viewMode","editMode","darkMode","validationExpanded","rulesSummaryExpanded","spellsExpanded","statisticsExpanded","setUI","setItem","catch","err","console","log","toggleUIOption","option","updateUI","rootReducer","combineReducers","ui","uiReducer","roster","rosterReducer","appState","appStateReducer","store","configureStore","useUserTheme","dispatch","useDispatch","prefersDarkMode","useMediaQuery","hasDarkMode","useSelector","undefined","React","useMemo","createMuiTheme","palette","type","ListDialog","anchor","title","onClose","onOpen","useState","setOpen","handleClose","opts","map","o","Dialog","DialogTitle","List","text","icon","ListItem","button","onClick","handleOnClick","key","ListItemIcon","buildUnit","unitToBuild","opt","setStats","entries","val","stats","add","remove","fant","fantasticRule","useStyles","makeStyles","theme","expand","transform","marginLeft","transition","transitions","create","duration","shortest","expandOpen","memo","expanded","classes","IconButton","className","clsx","TextInputDialog","label","defaultValue","cancelText","okayText","margin","value","setValue","DialogContent","TextField","autoFocus","fullWidth","onChange","e","target","onKeyPress","DialogActions","Button","color","Actions","Box","display","width","style","height","marginTop","alignItems","Tooltip","flexGrow","openFunc","FantasticalRules","toCheck","excluded","handleOpen","FormLabel","component","FormControlLabel","control","Checkbox","checked","v","Typography","FormControl","Select","IconComponent","multiple","input","Input","renderValue","MenuItem","Options","optionsData","handleChange","newUnit","FormGroup","includes","summary","SpecialRules","Container","variant","r","StatBlock","shooting","shoot","shootingValue","shootValue","shootRange","TableContainer","Table","size","Hidden","xsDown","TableBody","TableRow","TableCell","attack","attackValue","move","defenceValue","courage","movement","armour","strengthPoints","smUp","UnitSelector","Chip","marginBottom","setExpanded","Card","maxWidth","CardHeader","Collapse","in","timeout","unmountOnExit","CardContent","packRoster","unpackRoster","compactRoster","Roster","flexDirection","flexWrap","Fab","showText","savedRosters","setSavedRosters","loadList","a","getItem","then","saveRoster","finally","textAlign","href","clickable","backup","savedLists","iterate","file","Blob","JSON","stringify","date","Date","offsetMs","getTimezoneOffset","getTime","dateText","toISOString","replace","saveAs","handleClick","removeList","removeItem","armyCost","funcs","join","exportFunc","i","navigator","clipboard","writeText","copyToClipboard","list","parse","fileReader","fileDialog","useRef","restore","content","result","Promise","all","openFileDialog","current","click","ref","accept","event","FileReader","onloadend","files","readAsText","toggleDrawer","useCallback","Drawer","Divider","DarkMode","TotalPoints","smDown","mdUp","AppBar","changeViewMode","clicked","newState","notClicked","newStates","ToggleUIButton","Icon","fontSize","position","Toolbar","VisibilityIcon","EditIcon","root","backgroundColor","background","default","primary","border","ListName","rosterName","toString","RulesSummary","specialRules","ExpansionPanel","ExpansionPanelSummary","expandIcon","ExpansionPanelDetails","ListItemText","secondary","ShowFeedback","reason","Snackbar","autoHideDuration","Alert","elevation","SpellTable","Array","spellcasterInRoster","minWidth","TableHead","align","spell","scope","difficulty","effect","newOpen","handleSpellClick","dense","paddingLeft","PointDistributionChart","colors","dataKey","renderCustomizedLabel","labelLine","outerRadius","entry","fill","RADIAN","Math","PI","cx","cy","midAngle","innerRadius","percent","radius","x","cos","y","sin","percentValue","toFixed","textAnchor","dominantBaseline","CustomLabel","useTheme","CustomXAxis","UnitDistributionChart","top","right","left","bottom","strokeDasharray","tick","wrapperStyle","minPointSize","Statistics","totalPoints","chipSize","breakpoints","down","optionPoints","accumulator","fantasticalPoints","COLORS","unitCount","mounted","u","foot","ranged","unitsCost","dataUnitTypes","Units","Points","dataPoints","marginRight","toPrecision","error","main","contrastText","details","light","Validation","warnings","App","useEffect","ThemeProvider","CssBaseline","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","document","getElementById","URL","process","origin","addEventListener","fetch","headers","response","contentType","get","status","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.6c728cc5.chunk.js","sourcesContent":["import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\n\r\ntype severity = 'error' | 'info' | 'success' | 'warning';\r\n\r\nexport type AppState = {\r\n  feedback: {\r\n    open: boolean;\r\n    message: string;\r\n    severity: severity;\r\n  };\r\n  inputUpdate: boolean;\r\n  autoDarkMode: boolean;\r\n};\r\n\r\nconst appStateSlice = createSlice({\r\n  name: 'appState',\r\n  initialState: {\r\n    feedback: {\r\n      open: false,\r\n      message: '',\r\n      severity: 'info',\r\n    },\r\n    inputUpdate: false,\r\n    autoDarkMode: false,\r\n  } as AppState,\r\n  reducers: {\r\n    toggleForceInputUpdate: (state) => {\r\n      state.inputUpdate = !state.inputUpdate;\r\n    },\r\n    closeFeedback: (state) => {\r\n      state.feedback.open = false;\r\n    },\r\n    showFeedback: {\r\n      reducer: (state, action: PayloadAction<[string, severity]>) => {\r\n        const [message, severity] = action.payload;\r\n        state.feedback = { open: true, message: message, severity: severity };\r\n      },\r\n      prepare: (\r\n        message: string,\r\n        severity: severity\r\n      ): { payload: [string, severity] } => ({\r\n        payload: [message, severity],\r\n      }),\r\n    },\r\n    setAutoDarkMode: (state, action) => {\r\n      state.autoDarkMode = action.payload;\r\n    },\r\n  },\r\n});\r\n\r\nexport const {\r\n  toggleForceInputUpdate,\r\n  closeFeedback,\r\n  showFeedback,\r\n  setAutoDarkMode,\r\n} = appStateSlice.actions;\r\nexport default appStateSlice.reducer;\r\n","import fantasticalRulesData from 'assets/dragonRampantData/fantasticalRules.json';\r\nimport rulesData from 'assets/dragonRampantData/rules.json';\r\nimport spellData from 'assets/dragonRampantData/spells.json';\r\nimport unitData from 'assets/dragonRampantData/units.json';\r\n\r\nexport type UnitStats = {\r\n  attack: number;\r\n  move: number;\r\n  shoot: number;\r\n  courage: number;\r\n  armour: number;\r\n  attackValue: number;\r\n  defenceValue: number;\r\n  shootValue: number;\r\n  shootRange: number | string;\r\n  movement: number;\r\n  strengthPoints: number;\r\n};\r\n\r\nexport type UnitOption = {\r\n  points?: number;\r\n  summary?: string;\r\n  remove?: string[];\r\n  add?: string[];\r\n  setStats?: Partial<UnitStats>;\r\n};\r\ntype UnitOptions = { [optionName: string]: UnitOption };\r\n\r\nexport type Unit = {\r\n  name: string;\r\n  type: string;\r\n  points: number;\r\n  stats: UnitStats;\r\n  rules: string[];\r\n  options: string[];\r\n  fantasticalRules: string[];\r\n  customName?: string;\r\n};\r\n\r\nexport type DataUnit = {\r\n  name: string;\r\n  type: string;\r\n  points: number;\r\n  stats: UnitStats;\r\n  rules: string[];\r\n  options: UnitOptions;\r\n  fantasticalRules: string[];\r\n  customName?: string;\r\n};\r\n\r\nexport type CompactUnit = {\r\n  name: string;\r\n  options: string[];\r\n  fantasticalRules: string[];\r\n  customName?: string;\r\n};\r\n\r\nexport type fantasticalRule = {\r\n  name: string;\r\n  points: number;\r\n};\r\n\r\nexport type Spell = {\r\n  name: string;\r\n  difficulty: number;\r\n  target: string;\r\n  duration: string;\r\n  effect: string;\r\n};\r\n\r\ntype Units = { [name: string]: DataUnit };\r\ntype FantasticalRules = { [name: string]: fantasticalRule };\r\ntype Rules = { [name: string]: string };\r\ntype Spells = { [name: string]: Spell };\r\n\r\nexport type Data = {\r\n  unitData: Units;\r\n  unitNames: string[];\r\n  fantasticalRulesData: FantasticalRules;\r\n  rulesData: Rules;\r\n  spellData: Spells;\r\n};\r\n\r\nconst data: Data = {\r\n  unitData: unitData,\r\n  unitNames: Object.keys(unitData).slice(1),\r\n  fantasticalRulesData: fantasticalRulesData,\r\n  rulesData: rulesData,\r\n  spellData: spellData,\r\n};\r\n\r\nexport default data;\r\n","import { createSelector, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport data, { CompactUnit, Unit } from './data';\r\n\r\ntype RosterUnits = { [id: number]: Unit };\r\n\r\nexport type RosterState = {\r\n  name: string;\r\n  nextID: number;\r\n  units: RosterUnits;\r\n  unitOrder: number[];\r\n};\r\n\r\nexport type CompactRosterState = {\r\n  name: string;\r\n  nextID: number;\r\n  units: { [id: number]: CompactUnit };\r\n  unitOrder: number[];\r\n};\r\n\r\nconst rosterInitialState: RosterState = {\r\n  name: 'New List',\r\n  nextID: 0,\r\n  units: {},\r\n  unitOrder: [],\r\n};\r\n\r\nconst rosterSlice = createSlice({\r\n  name: 'roster',\r\n  initialState: rosterInitialState,\r\n  reducers: {\r\n    newRoster: () => ({ ...rosterInitialState }),\r\n    setRoster: (_, action: PayloadAction<RosterState>) => ({ ...action.payload }),\r\n    updateRoster: (state, action: PayloadAction<Partial<RosterState>>) => ({\r\n      ...state,\r\n      ...action.payload,\r\n    }),\r\n    addUnit: {\r\n      reducer: (state: RosterState, action: PayloadAction<[Unit?, number?]>) => {\r\n        let [unit, index] = action.payload;\r\n        unit = unit\r\n          ? unit\r\n          : { ...data.unitData.Unit, options: [], fantasticalRules: [] };\r\n        const id = state.nextID;\r\n        index == null\r\n          ? state.unitOrder.push(id)\r\n          : state.unitOrder.splice(index + 1, 0, id);\r\n        state.nextID += 1;\r\n        state.units[id] = unit;\r\n      },\r\n      prepare: (unit?: Unit, index?: number): { payload: [Unit?, number?] } => ({\r\n        payload: [unit, index],\r\n      }),\r\n    },\r\n    setUnit: {\r\n      reducer: (state, action: PayloadAction<[number, string]>) => {\r\n        const [id, name] = action.payload;\r\n        state.units[id] = { ...data.unitData[name], options: [], fantasticalRules: [] };\r\n      },\r\n      prepare: (id: number, name: string): { payload: [number, string] } => ({\r\n        payload: [id, name],\r\n      }),\r\n    },\r\n    updateUnit: {\r\n      reducer: (state, action: PayloadAction<[number, Partial<Unit>]>) => {\r\n        const [id, newAttributes] = action.payload;\r\n        state.units[id] = { ...state.units[id], ...newAttributes };\r\n      },\r\n      prepare: (\r\n        id: number,\r\n        newAttributes: Partial<Unit>\r\n      ): { payload: [number, Partial<Unit>] } => ({ payload: [id, newAttributes] }),\r\n    },\r\n    removeUnit: (state, action: PayloadAction<number>) => {\r\n      const id = action.payload;\r\n      delete state.units[id];\r\n      state.unitOrder.splice(state.unitOrder.indexOf(id), 1);\r\n    },\r\n    renameUnit: {\r\n      reducer: (state, action: PayloadAction<[number, string]>) => {\r\n        const [id, name] = action.payload;\r\n        state.units[id].customName = name;\r\n      },\r\n      prepare: (id: number, name: string): { payload: [number, string] } => ({\r\n        payload: [id, name],\r\n      }),\r\n    },\r\n    moveUnit: {\r\n      reducer: (state, action: PayloadAction<[number, 'left' | 'right']>) => {\r\n        const [id, direction] = action.payload;\r\n        const index = state.unitOrder.indexOf(id);\r\n        const nextIndex = direction === 'left' ? index - 1 : index + 1;\r\n        if (nextIndex < 0 || nextIndex >= state.unitOrder.length) return state;\r\n        [state.unitOrder[nextIndex], state.unitOrder[index]] = [\r\n          state.unitOrder[index],\r\n          state.unitOrder[nextIndex],\r\n        ];\r\n      },\r\n      prepare: (\r\n        id: number,\r\n        direction: 'left' | 'right'\r\n      ): { payload: [number, 'left' | 'right'] } => ({ payload: [id, direction] }),\r\n    },\r\n  },\r\n});\r\n\r\nconst getTotalPoints = createSelector(\r\n  (units: RosterUnits) => units,\r\n  (units) => Object.values(units).reduce((acc, unit) => acc + unit.points, 0)\r\n);\r\n\r\nconst getSpecialRules = createSelector(\r\n  (units: RosterUnits) => units,\r\n  (units) =>\r\n    Object.values(units)\r\n      .reduce(\r\n        (acc: string[], unit) =>\r\n          unit.rules.reduce(\r\n            (acc, rule) =>\r\n              data.rulesData[data.rulesData[rule]]\r\n                ? [...acc, data.rulesData[rule]]\r\n                : [...acc, rule],\r\n            acc\r\n          ),\r\n        []\r\n      )\r\n      .sort()\r\n      .filter((rule, index, ary) => !index || rule !== ary[index - 1])\r\n);\r\n\r\nexport { getTotalPoints, getSpecialRules };\r\n\r\nexport const {\r\n  newRoster,\r\n  setRoster,\r\n  updateRoster,\r\n  addUnit,\r\n  setUnit,\r\n  updateUnit,\r\n  removeUnit,\r\n  renameUnit,\r\n  moveUnit,\r\n} = rosterSlice.actions;\r\n\r\nexport default rosterSlice.reducer;\r\n","import localforage from 'localforage';\r\n\r\nexport const uiStore = localforage.createInstance({\r\n  driver: localforage.LOCALSTORAGE,\r\n});\r\n\r\nexport const rosterStore = localforage.createInstance({\r\n  name: 'drabDB',\r\n  storeName: 'rosterStore',\r\n});\r\n","import { createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { uiStore } from './persistantStorage';\r\n\r\nexport type UIState = {\r\n  viewMode: boolean;\r\n  editMode: boolean;\r\n  darkMode: null | boolean;\r\n  validationExpanded: boolean;\r\n  rulesSummaryExpanded: boolean;\r\n  spellsExpanded: boolean;\r\n  statisticsExpanded: boolean;\r\n};\r\n\r\nconst uiSlice = createSlice({\r\n  name: 'ui',\r\n  initialState: {\r\n    viewMode: false,\r\n    editMode: false,\r\n    darkMode: null,\r\n    validationExpanded: true,\r\n    rulesSummaryExpanded: true,\r\n    spellsExpanded: false,\r\n    statisticsExpanded: true,\r\n  } as UIState,\r\n  reducers: {\r\n    setUI: (_, action: PayloadAction<UIState>) => {\r\n      uiStore\r\n        .setItem('uiOptions', { ...action.payload })\r\n        .catch((err) => console.log(err));\r\n      return { ...action.payload };\r\n    },\r\n    toggleUIOption: (state: UIState, action: PayloadAction<keyof UIState>) => {\r\n      const option = action.payload;\r\n      uiStore\r\n        .setItem('uiOptions', { ...state, [option]: !state[option] })\r\n        .catch((err) => console.log(err));\r\n      state[option] = !state[option];\r\n    },\r\n    updateUI: (state, action: PayloadAction<Partial<UIState>>) => {\r\n      uiStore\r\n        .setItem('uiOptions', { ...state, ...action.payload })\r\n        .catch((err) => console.log(err));\r\n      return { ...state, ...action.payload };\r\n    },\r\n  },\r\n});\r\n\r\nexport const { setUI, toggleUIOption, updateUI } = uiSlice.actions;\r\nexport default uiSlice.reducer;\r\n","import { combineReducers, configureStore } from '@reduxjs/toolkit';\r\nimport appStateReducer from './appStateSlice';\r\nimport rosterReducer from './rosterSlice';\r\nimport uiReducer from './uiSlice';\r\n\r\nconst rootReducer = combineReducers({\r\n  ui: uiReducer,\r\n  roster: rosterReducer,\r\n  appState: appStateReducer,\r\n});\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\n\r\nconst store = configureStore({\r\n  reducer: rootReducer,\r\n});\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\n\r\nexport default store;\r\n","import { createMuiTheme } from '@material-ui/core/styles';\r\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { setAutoDarkMode } from 'store/appStateSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\n\r\nconst useUserTheme = () => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const prefersDarkMode = useMediaQuery('(prefers-color-scheme: dark)');\r\n  const hasDarkMode = useSelector((state: RootState) => state.ui.darkMode);\r\n  const darkMode = hasDarkMode === undefined ? prefersDarkMode : hasDarkMode;\r\n  dispatch(setAutoDarkMode(darkMode));\r\n\r\n  const theme = React.useMemo(\r\n    () =>\r\n      createMuiTheme({\r\n        palette: {\r\n          type: darkMode ? 'dark' : 'light',\r\n        },\r\n      }),\r\n    [darkMode]\r\n  );\r\n  return theme;\r\n};\r\n\r\nexport default useUserTheme;\r\n","import { Dialog, DialogTitle, List, ListItem, ListItemIcon } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst ListDialog: React.FC<{\r\n  anchor: (openFunc: () => void) => JSX.Element;\r\n  action: (text: string) => void;\r\n  options: [string, JSX.Element | null][] | string[];\r\n  title: string;\r\n  onClose?: () => void;\r\n  onOpen?: () => void;\r\n}> = ({ anchor, action, options, title, onClose, onOpen }) => {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n    if (onOpen) onOpen();\r\n  };\r\n  const handleClose = () => {\r\n    if (onClose) onClose();\r\n    setOpen(false);\r\n  };\r\n  const handleOnClick = (text: string) => {\r\n    action(text);\r\n    handleClose();\r\n  };\r\n\r\n  const opts: [string, JSX.Element | null][] =\r\n    typeof (options as string[])[0] === 'string'\r\n      ? (options as string[]).map((o: string) => [o, null])\r\n      : (options as [string, JSX.Element | null][]);\r\n\r\n  return (\r\n    <>\r\n      {anchor(handleOpen)}\r\n      <Dialog onClose={handleClose} open={open}>\r\n        <DialogTitle>{title}</DialogTitle>\r\n        <List>\r\n          {opts.map(([text, icon]) => (\r\n            <ListItem button onClick={() => handleOnClick(text)} key={text}>\r\n              {icon && <ListItemIcon>{icon}</ListItemIcon>}\r\n              {text}\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ListDialog;\r\n","import data, { CompactUnit, Unit } from 'store/data';\r\n\r\nconst buildUnit = (unitToBuild: CompactUnit | Unit) => {\r\n  const unitData = data.unitData[unitToBuild.name];\r\n\r\n  let unit: Unit = {\r\n    ...unitData,\r\n    customName: unitToBuild.customName || '',\r\n    options: [...unitToBuild.options],\r\n    fantasticalRules: [...unitToBuild.fantasticalRules],\r\n  };\r\n\r\n  let points = unitData.points;\r\n  for (const opt of unit.options) {\r\n    const option = unitData.options[opt];\r\n    points += option.points || 0;\r\n\r\n    if (option.setStats) {\r\n      for (const [key, val] of Object.entries(option.setStats)) {\r\n        unit = { ...unit, stats: { ...unit.stats, [key]: val } };\r\n      }\r\n    }\r\n\r\n    if (option.add) {\r\n      for (const rule of option.add) {\r\n        unit.rules = [...unit.rules, rule];\r\n      }\r\n    }\r\n\r\n    if (option.remove) {\r\n      for (const rule of option.remove) {\r\n        unit.rules = unit.rules.filter((val) => val !== rule);\r\n      }\r\n    }\r\n  }\r\n  for (const fant of unit.fantasticalRules) {\r\n    const fantasticRule = data.fantasticalRulesData[fant];\r\n    points += fantasticRule.points;\r\n    unit.rules = [...unit.rules, fantasticRule.name];\r\n  }\r\n\r\n  unit = { ...unit, points: points };\r\n  return unit;\r\n};\r\n\r\nexport default buildUnit;\r\n","import { IconButton } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport clsx from 'clsx';\r\nimport React from 'react';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  expand: {\r\n    transform: 'rotate(0deg)',\r\n    marginLeft: 'auto',\r\n    transition: theme.transitions.create('transform', {\r\n      duration: theme.transitions.duration.shortest,\r\n    }),\r\n  },\r\n  expandOpen: {\r\n    transform: 'rotate(180deg)',\r\n  },\r\n}));\r\n\r\nconst ExpandIcon: React.FC<{\r\n  expanded: boolean;\r\n  onClick: (e: React.MouseEvent<HTMLElement>) => void;\r\n}> = ({ expanded, onClick }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <IconButton\r\n      className={clsx(classes.expand, {\r\n        [classes.expandOpen]: expanded,\r\n      })}\r\n      onClick={onClick}\r\n    >\r\n      <ExpandMoreIcon />\r\n    </IconButton>\r\n  );\r\n};\r\n\r\nexport default React.memo(ExpandIcon);\r\n","import {\r\n  Button,\r\n  Dialog,\r\n  DialogActions,\r\n  DialogContent,\r\n  DialogTitle,\r\n  TextField,\r\n} from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst TextInputDialog: React.FC<{\r\n  anchor: (openFunc: () => void) => JSX.Element;\r\n  action: (text: string) => void;\r\n  title?: string;\r\n  label?: string;\r\n  defaultValue?: string;\r\n  cancelText?: string;\r\n  okayText?: string;\r\n  margin?: 'none' | 'dense' | 'normal' | undefined;\r\n  onClose?: () => void;\r\n  onOpen?: () => void;\r\n}> = ({\r\n  anchor,\r\n  action,\r\n  title = '',\r\n  label = '',\r\n  defaultValue = '',\r\n  cancelText = 'Cancel',\r\n  okayText = 'okay',\r\n  margin = 'dense',\r\n  onClose,\r\n  onOpen,\r\n}) => {\r\n  const [open, setOpen] = React.useState(false);\r\n  const [value, setValue] = React.useState('');\r\n  const handleOpen = () => {\r\n    setOpen(true);\r\n    if (onOpen) onOpen();\r\n  };\r\n  const handleClose = () => {\r\n    if (onClose) onClose();\r\n    setOpen(false);\r\n  };\r\n  const handleKeyPressed = (key: string) => {\r\n    if (key === 'Enter') {\r\n      setValue(value);\r\n      action(value);\r\n      handleClose();\r\n    } else if (key === 'ESC') handleClose();\r\n  };\r\n  const handleAction = () => {\r\n    action(value);\r\n    handleClose();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {anchor(handleOpen)}\r\n      <Dialog onClose={handleClose} open={open}>\r\n        <DialogTitle>{title}</DialogTitle>\r\n        <DialogContent>\r\n          <TextField\r\n            autoFocus\r\n            margin={margin}\r\n            label={label}\r\n            type=\"text\"\r\n            fullWidth\r\n            defaultValue={defaultValue || value}\r\n            onChange={(e) => setValue(e.target.value)}\r\n            onKeyPress={(e) => handleKeyPressed(e.key)}\r\n          />\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleClose} color=\"primary\">\r\n            {cancelText}\r\n          </Button>\r\n          <Button onClick={handleAction} color=\"primary\">\r\n            {okayText}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TextInputDialog;\r\n","import { Box, IconButton, Tooltip } from '@material-ui/core';\r\nimport NavigateBeforeIcon from '@material-ui/icons/NavigateBefore';\r\nimport NavigateNextIcon from '@material-ui/icons/NavigateNext';\r\nimport PersonAddOutlinedIcon from '@material-ui/icons/PersonAddOutlined';\r\nimport TextFieldsIcon from '@material-ui/icons/TextFields';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { Unit } from 'store/data';\r\nimport { addUnit, moveUnit, renameUnit } from 'store/rosterSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport TextInputDialog from '../TextInputDialog';\r\n\r\nconst Actions: React.FC<{ id: number; unit: Unit }> = ({ id, unit }) => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const roster = useSelector((state: RootState) => state.roster);\r\n\r\n  const moveLeft = () => dispatch(moveUnit(id, 'left'));\r\n  const moveRight = () => dispatch(moveUnit(id, 'right'));\r\n  const cloneUnit = () => dispatch(addUnit(unit, roster.unitOrder.indexOf(id)));\r\n  const rename = (value: string) => dispatch(renameUnit(id, value));\r\n\r\n  return (\r\n    <Box>\r\n      <Box display=\"flex\" width=\"97%\" style={{ height: 25, marginTop: 10 }}>\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <Tooltip title=\"Move back\">\r\n            <IconButton onClick={moveLeft}>\r\n              <NavigateBeforeIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n          <Tooltip title=\"Move forward\">\r\n            <IconButton onClick={moveRight}>\r\n              <NavigateNextIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </Box>\r\n        <Box flexGrow={1}></Box>\r\n        <Box display=\"flex\" alignItems=\"center\">\r\n          <TextInputDialog\r\n            anchor={(openFunc: () => void) => (\r\n              <Tooltip title=\"Rename unit\">\r\n                <IconButton onClick={openFunc}>\r\n                  <TextFieldsIcon />\r\n                </IconButton>\r\n              </Tooltip>\r\n            )}\r\n            action={rename}\r\n            title=\"Enter the name for the unit\"\r\n            label=\"Unit name\"\r\n            defaultValue={unit.customName}\r\n            okayText=\"Rename\"\r\n          />\r\n          <Tooltip title=\"Clone unit\">\r\n            <IconButton onClick={cloneUnit}>\r\n              <PersonAddOutlinedIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n        </Box>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Actions;\r\n","import {\r\n  Box,\r\n  Checkbox,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormLabel,\r\n  Input,\r\n  MenuItem,\r\n  Select,\r\n  Tooltip,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport React from 'react';\r\nimport data, { Unit } from 'store/data';\r\n\r\nconst FantasticalRules: React.FC<{ unit: Unit; onChange: (unit: Unit) => void }> = ({\r\n  unit,\r\n  onChange,\r\n}) => {\r\n  const [open, setOpen] = React.useState(false);\r\n  const unitData = data.unitData[unit.name];\r\n  const fantasticalRulesData = data.fantasticalRulesData;\r\n  const rulesData = data.rulesData;\r\n\r\n  let fantasticalRules = unitData.fantasticalRules;\r\n  if (!fantasticalRules || !fantasticalRules.length) return <div></div>;\r\n  if (fantasticalRules[0] === 'any')\r\n    fantasticalRules = Object.keys(fantasticalRulesData);\r\n  if (fantasticalRules[0] === 'exclude') {\r\n    const toCheck = fantasticalRules.slice(1);\r\n    fantasticalRules = Object.keys(fantasticalRulesData);\r\n    for (const excluded of toCheck) {\r\n      fantasticalRules = fantasticalRules.filter((val) => val !== excluded);\r\n    }\r\n  }\r\n\r\n  const handleClose = () => setOpen(false);\r\n  const handleOpen = () => setOpen(true);\r\n  const handleChange = (e: React.ChangeEvent<{ value: unknown }>) =>\r\n    onChange({ ...unit, fantasticalRules: [...(e.target.value as string[])] });\r\n\r\n  return (\r\n    <>\r\n      <FormLabel onClick={handleOpen} component=\"legend\">\r\n        Fantastical Rules <ArrowDropDownIcon />\r\n      </FormLabel>\r\n      {unit.fantasticalRules &&\r\n        unit.fantasticalRules.length > 0 &&\r\n        unit.fantasticalRules.map((name) => (\r\n          <div key={name}>\r\n            <FormControlLabel\r\n              control={\r\n                <Checkbox\r\n                  checked={true}\r\n                  onChange={() =>\r\n                    onChange({\r\n                      ...unit,\r\n                      fantasticalRules: [\r\n                        ...unit.fantasticalRules.filter((v) => v !== name),\r\n                      ],\r\n                    })\r\n                  }\r\n                />\r\n              }\r\n              label={\r\n                <Tooltip title={rulesData[name]}>\r\n                  <Typography>\r\n                    {name}{' '}\r\n                    <Typography color=\"secondary\" component=\"span\">\r\n                      @{fantasticalRulesData[name].points}\r\n                    </Typography>\r\n                  </Typography>\r\n                </Tooltip>\r\n              }\r\n              key={name}\r\n            />\r\n          </div>\r\n        ))}\r\n      <FormControl style={{ marginTop: 10, width: 0, height: 0 }}>\r\n        <Select\r\n          open={open}\r\n          onClose={handleClose}\r\n          onOpen={handleOpen}\r\n          IconComponent={() => <Box />}\r\n          multiple\r\n          value={unit.fantasticalRules}\r\n          onChange={handleChange}\r\n          input={<Input />}\r\n          renderValue={() => ' '}\r\n        >\r\n          {fantasticalRules.map((name) => (\r\n            <MenuItem key={name} value={name}>\r\n              {unit.fantasticalRules.indexOf(name) < 0 && (\r\n                <Tooltip title={rulesData[name]}>\r\n                  <Typography>\r\n                    {name}{' '}\r\n                    <Typography color=\"secondary\" component=\"span\">\r\n                      @{fantasticalRulesData[name].points}\r\n                    </Typography>\r\n                  </Typography>\r\n                </Tooltip>\r\n              )}\r\n              {unit.fantasticalRules.indexOf(name) > -1 && (\r\n                <Tooltip title={rulesData[name]}>\r\n                  <Typography color=\"primary\">\r\n                    {name}{' '}\r\n                    <Typography color=\"secondary\" component=\"span\">\r\n                      @{fantasticalRulesData[name].points}\r\n                    </Typography>\r\n                  </Typography>\r\n                </Tooltip>\r\n              )}\r\n            </MenuItem>\r\n          ))}\r\n        </Select>\r\n      </FormControl>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default FantasticalRules;\r\n","import {\r\n  Checkbox,\r\n  FormControl,\r\n  FormControlLabel,\r\n  FormGroup,\r\n  FormLabel,\r\n  Tooltip,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport React from 'react';\r\nimport data, { Unit } from 'store/data';\r\n\r\nconst Options: React.FC<{ unit: Unit; onChange: (unit: Unit) => void }> = ({\r\n  unit,\r\n  onChange,\r\n}) => {\r\n  const optionsData = data.unitData[unit.name].options;\r\n  if (!optionsData || !Object.keys(optionsData).length) return <div></div>;\r\n\r\n  const handleChange = (option: string) => (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    let newUnit = { ...unit };\r\n\r\n    if (e.target.checked) {\r\n      newUnit.options = [...newUnit.options, option];\r\n    } else {\r\n      newUnit.options = newUnit.options.filter((val) => val !== option);\r\n    }\r\n\r\n    onChange(newUnit);\r\n  };\r\n\r\n  return (\r\n    <FormControl component=\"fieldset\" style={{ marginTop: 10 }}>\r\n      <FormLabel component=\"legend\">Options</FormLabel>\r\n      <FormGroup>\r\n        {Object.keys(optionsData).map((option) => (\r\n          <FormControlLabel\r\n            control={\r\n              <Checkbox\r\n                onChange={handleChange(option)}\r\n                checked={unit.options.includes(option)}\r\n              />\r\n            }\r\n            label={\r\n              <Tooltip title={optionsData[option].summary}>\r\n                <Typography>\r\n                  {option}{' '}\r\n                  <Typography color=\"secondary\" component=\"span\">\r\n                    @{optionsData[option].points}\r\n                  </Typography>\r\n                </Typography>\r\n              </Tooltip>\r\n            }\r\n            key={option}\r\n          />\r\n        ))}\r\n      </FormGroup>\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport default Options;\r\n","import { Container, List, ListItem, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst SpecialRules: React.FC<{ rules: string[] }> = ({ rules }) => {\r\n  if (rules && rules.length) {\r\n    return (\r\n      <Container>\r\n        <Typography variant=\"h6\" style={{ marginTop: 10 }}>\r\n          Special Rules\r\n        </Typography>\r\n        <List>\r\n          {rules.map((r) => (\r\n            <ListItem key={r}>{r}</ListItem>\r\n          ))}\r\n        </List>\r\n      </Container>\r\n    );\r\n  }\r\n  return <></>;\r\n};\r\n\r\nexport default SpecialRules;\r\n","import {\r\n  Hidden,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableRow,\r\n} from '@material-ui/core';\r\nimport React from 'react';\r\nimport { UnitStats } from 'store/data';\r\n\r\nconst StatBlock: React.FC<{ stats: UnitStats }> = ({ stats }) => {\r\n  let shooting = stats.shoot ? `${stats.shoot}+` : '-';\r\n  let shootingValue = stats.shoot ? `${stats.shootValue}+/${stats.shootRange}\"` : '-';\r\n\r\n  return (\r\n    <TableContainer>\r\n      <Table size=\"small\">\r\n        <Hidden xsDown>\r\n          <TableBody>\r\n            <TableRow>\r\n              <TableCell>Attack</TableCell>\r\n              <TableCell>{stats.attack}+</TableCell>\r\n              <TableCell>Attack Value</TableCell>\r\n              <TableCell>{stats.attackValue}+</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>Move</TableCell>\r\n              <TableCell>{stats.move}+</TableCell>\r\n              <TableCell>Defence Value</TableCell>\r\n              <TableCell>{stats.defenceValue}+</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>Shoot</TableCell>\r\n              <TableCell>{shooting}</TableCell>\r\n              <TableCell>Shoot Value</TableCell>\r\n              <TableCell>{shootingValue}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>Courage</TableCell>\r\n              <TableCell>{stats.courage}+</TableCell>\r\n              <TableCell>Movement</TableCell>\r\n              <TableCell>{stats.movement}\"</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>Armour</TableCell>\r\n              <TableCell>{stats.armour}</TableCell>\r\n              <TableCell>Strength Points</TableCell>\r\n              <TableCell>{stats.strengthPoints}</TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Hidden>\r\n        <Hidden smUp>\r\n          <TableBody>\r\n            <TableRow>\r\n              <TableCell>A</TableCell>\r\n              <TableCell>{stats.attack}+</TableCell>\r\n              <TableCell>AV</TableCell>\r\n              <TableCell>{stats.attackValue}+</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>M</TableCell>\r\n              <TableCell>{stats.move}+</TableCell>\r\n              <TableCell>DV</TableCell>\r\n              <TableCell>{stats.defenceValue}+</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>S</TableCell>\r\n              <TableCell>{shooting}</TableCell>\r\n              <TableCell>SV</TableCell>\r\n              <TableCell>{shootingValue}</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>C</TableCell>\r\n              <TableCell>{stats.courage}+</TableCell>\r\n              <TableCell>MR</TableCell>\r\n              <TableCell>{stats.movement}\"</TableCell>\r\n            </TableRow>\r\n            <TableRow>\r\n              <TableCell>Ar</TableCell>\r\n              <TableCell>{stats.armour}</TableCell>\r\n              <TableCell>SP</TableCell>\r\n              <TableCell>{stats.strengthPoints}</TableCell>\r\n            </TableRow>\r\n          </TableBody>\r\n        </Hidden>\r\n      </Table>\r\n    </TableContainer>\r\n  );\r\n};\r\n\r\nexport default StatBlock;\r\n","import { Chip, Typography } from '@material-ui/core';\r\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\r\nimport React from 'react';\r\nimport { Unit } from 'store/data';\r\nimport ListDialog from '../ListDialog';\r\n\r\nconst UnitSelector: React.FC<{\r\n  unit: Unit;\r\n  options: string[];\r\n  onClose: (name: string) => void;\r\n}> = ({ unit, options, onClose }) => {\r\n  const name = unit.customName ? unit.customName : unit.name;\r\n\r\n  const setSelectedUnit = (value: string) => {\r\n    if (value !== unit.name) onClose(value);\r\n  };\r\n\r\n  return (\r\n    <ListDialog\r\n      action={setSelectedUnit}\r\n      anchor={(openFunc: () => void) => (\r\n        <>\r\n          <Typography variant=\"h5\" onClick={openFunc}>\r\n            <Chip label={unit.points} color=\"primary\" />\r\n            &nbsp;&nbsp;\r\n            {name}\r\n            <ArrowDropDownIcon />\r\n          </Typography>\r\n          {unit.customName && (\r\n            <Typography style={{ marginLeft: 45, marginBottom: -25 }}>\r\n              {unit.name}\r\n            </Typography>\r\n          )}\r\n        </>\r\n      )}\r\n      options={options}\r\n      title=\"Choose unit type\"\r\n    />\r\n  );\r\n};\r\n\r\nexport default UnitSelector;\r\n","import {\r\n  Button,\r\n  Card,\r\n  CardContent,\r\n  CardHeader,\r\n  Chip,\r\n  Collapse,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport data, { Unit as UnitType } from 'store/data';\r\nimport { removeUnit, setUnit, updateUnit } from 'store/rosterSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport ExpandIcon from '../ExpandIcon';\r\nimport Actions from './Actions';\r\nimport buildUnit from './buildUnit';\r\nimport FantasticalRules from './FantasticalRules';\r\nimport Options from './Options';\r\nimport SpecialRules from './SpecialRules';\r\nimport StatBlock from './StatBlock';\r\nimport UnitSelector from './UnitSelector';\r\n\r\nconst Unit: React.FC<{ id: number }> = ({ id }) => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const unit = useSelector((state: RootState) => state.roster.units[id]);\r\n  const viewMode = useSelector((state: RootState) => state.ui.viewMode);\r\n  const editMode = useSelector((state: RootState) => state.ui.editMode);\r\n\r\n  const [expanded, setExpanded] = React.useState(true);\r\n  const handleExpandClick = () => setExpanded(!expanded);\r\n\r\n  const changeUnit = (name: string) => dispatch(setUnit(id, name));\r\n\r\n  const handleChange = (unit: UnitType) => {\r\n    unit = buildUnit(unit);\r\n    dispatch(updateUnit(id, { ...unit }));\r\n  };\r\n\r\n  const handleRemove = () => dispatch(removeUnit(id));\r\n\r\n  return (\r\n    <Card style={{ marginBottom: 25, maxWidth: 400, width: '100%' }}>\r\n      {viewMode ? (\r\n        <CardHeader\r\n          title={\r\n            <>\r\n              <Typography variant=\"h5\">\r\n                <Chip label={unit.points} color=\"primary\" />\r\n                &nbsp;&nbsp;\r\n                {unit.customName ? unit.customName : unit.name}\r\n              </Typography>\r\n              {unit.customName &&\r\n                (expanded ? (\r\n                  <Typography style={{ marginLeft: 45, marginBottom: -25 }}>\r\n                    {unit.name}\r\n                  </Typography>\r\n                ) : (\r\n                  <Typography style={{ marginLeft: 45 }}>{unit.name}</Typography>\r\n                ))}\r\n            </>\r\n          }\r\n          action={<ExpandIcon expanded={expanded} onClick={handleExpandClick} />}\r\n        />\r\n      ) : (\r\n        <CardHeader\r\n          title={\r\n            <UnitSelector unit={unit} onClose={changeUnit} options={data.unitNames} />\r\n          }\r\n          action={\r\n            <Button onClick={handleRemove}>\r\n              <CloseIcon />\r\n            </Button>\r\n          }\r\n        />\r\n      )}\r\n      <Collapse in={!viewMode || expanded} timeout=\"auto\" unmountOnExit>\r\n        <CardContent>\r\n          {!editMode && (\r\n            <>\r\n              <StatBlock stats={unit.stats} />\r\n              <SpecialRules rules={unit.rules} />\r\n            </>\r\n          )}\r\n          {!viewMode && (\r\n            <>\r\n              <Options onChange={handleChange} unit={unit} />\r\n              <FantasticalRules onChange={handleChange} unit={unit} />\r\n              <Actions id={id} unit={unit} />\r\n            </>\r\n          )}\r\n        </CardContent>\r\n      </Collapse>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default React.memo(Unit);\r\n","import { Box, Fab, Typography } from '@material-ui/core';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { CompactUnit } from 'store/data';\r\nimport { addUnit, CompactRosterState, RosterState } from 'store/rosterSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport buildUnit from './Unit/buildUnit';\r\nimport Unit from './Unit/Unit';\r\n\r\nconst packRoster = (roster: RosterState): CompactRosterState => {\r\n  const units: CompactUnit[] = Object.values(roster.units).map((unit) => ({\r\n    name: unit.name,\r\n    customName: unit.customName || '',\r\n    options: unit.options,\r\n    fantasticalRules: unit.fantasticalRules,\r\n  }));\r\n  return { ...roster, units: units };\r\n};\r\n\r\nconst unpackRoster = (compactRoster: CompactRosterState): RosterState => {\r\n  const units = Object.values(compactRoster.units).map((unit) => buildUnit(unit));\r\n  return { ...compactRoster, units: units };\r\n};\r\n\r\nconst Roster = () => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const roster = useSelector((state: RootState) => state.roster);\r\n  const viewMode = useSelector((state: RootState) => state.ui.viewMode);\r\n\r\n  return (\r\n    <>\r\n      <Box display=\"flex\" flexDirection=\"row\" flexWrap=\"wrap\">\r\n        {roster.unitOrder.map((id) => (\r\n          <Unit id={id} key={id} />\r\n        ))}\r\n      </Box>\r\n      {!Object.keys(roster.units).length && !viewMode && (\r\n        <Typography variant=\"h6\" style={{ marginBottom: 25 }}>\r\n          Click the button to add your first unit!\r\n        </Typography>\r\n      )}\r\n      {!viewMode && (\r\n        <Fab\r\n          color=\"secondary\"\r\n          style={{ marginLeft: 25, marginBottom: 25 }}\r\n          onClick={() => dispatch(addUnit())}\r\n        >\r\n          <AddIcon />\r\n        </Fab>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Roster;\r\nexport { packRoster, unpackRoster };\r\n","import { IconButton, Tooltip, Typography } from '@material-ui/core';\r\nimport SaveOutlinedIcon from '@material-ui/icons/SaveOutlined';\r\nimport React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { showFeedback, toggleForceInputUpdate } from 'store/appStateSlice';\r\nimport { rosterStore } from 'store/persistantStorage';\r\nimport { CompactRosterState, setRoster } from 'store/rosterSlice';\r\nimport ListDialog from './ListDialog';\r\nimport { unpackRoster } from './Roster';\r\n\r\nconst LoadList: React.FC<{ onClose?: () => void; showText?: boolean }> = ({\r\n  onClose,\r\n  showText,\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const [savedRosters, setSavedRosters] = useState<string[]>([]);\r\n\r\n  const handleOpen = () => rosterStore.keys().then((keys) => setSavedRosters(keys));\r\n\r\n  const loadList = async (name: string) => {\r\n    try {\r\n      const compactRoster = await rosterStore.getItem<CompactRosterState>(name);\r\n      const roster = unpackRoster(compactRoster!);\r\n      dispatch(setRoster({ ...roster }));\r\n      dispatch(toggleForceInputUpdate());\r\n      dispatch(showFeedback(`${name} loaded!`, 'success'));\r\n    } catch (err) {\r\n      dispatch(showFeedback(`Could not load ${name}!`, 'error'));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ListDialog\r\n      action={loadList}\r\n      onOpen={handleOpen}\r\n      anchor={(openFunc) => (\r\n        <>\r\n          <Tooltip title=\"Load List\">\r\n            <IconButton color=\"inherit\" onClick={openFunc}>\r\n              <SaveOutlinedIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n          {showText && <Typography onClick={openFunc}>Load List</Typography>}\r\n        </>\r\n      )}\r\n      options={savedRosters}\r\n      title=\"Choose List to load\"\r\n      onClose={onClose}\r\n    />\r\n  );\r\n};\r\n\r\nexport default React.memo(LoadList);\r\n","import { IconButton, Tooltip, Typography } from '@material-ui/core';\r\nimport SaveIcon from '@material-ui/icons/Save';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { showFeedback } from 'store/appStateSlice';\r\nimport { rosterStore } from 'store/persistantStorage';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport { packRoster } from './Roster';\r\n\r\nconst SaveList: React.FC<{ onClose?: () => void; showText?: boolean }> = ({\r\n  onClose,\r\n  showText,\r\n}) => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const roster = useSelector((state: RootState) => state.roster);\r\n\r\n  const saveRoster = () => {\r\n    if (roster.name === 'New List') {\r\n      dispatch(showFeedback('You have to give the list a name!', 'error'));\r\n      return;\r\n    }\r\n    rosterStore\r\n      .setItem(roster.name, { ...packRoster(roster) })\r\n      .then(() => dispatch(showFeedback('Saved!', 'success')))\r\n      .catch((err) => {\r\n        console.log(err);\r\n        dispatch(showFeedback('Could not save!', 'error'));\r\n      })\r\n      .finally(() => {\r\n        if (onClose) onClose();\r\n      });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title=\"Save List\">\r\n        <IconButton color=\"inherit\" onClick={saveRoster}>\r\n          <SaveIcon />\r\n        </IconButton>\r\n      </Tooltip>\r\n      {showText && <Typography onClick={saveRoster}>Save List</Typography>}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(SaveList);\r\n","import {\r\n  Box,\r\n  Chip,\r\n  Dialog,\r\n  DialogContent,\r\n  DialogTitle,\r\n  IconButton,\r\n  Tooltip,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport GitHubIcon from '@material-ui/icons/GitHub';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\nimport React, { useState } from 'react';\r\n\r\nconst About: React.FC<{ onClose?: () => void }> = ({ onClose = undefined }) => {\r\n  const [open, setOpen] = useState(false);\r\n  const handleOpen = () => setOpen(true);\r\n  const handleClose = () => {\r\n    if (onClose) onClose();\r\n    setOpen(false);\r\n  };\r\n  return (\r\n    <>\r\n      <Tooltip title=\"Load List\">\r\n        <IconButton color=\"inherit\" onClick={handleOpen}>\r\n          <InfoIcon />\r\n        </IconButton>\r\n      </Tooltip>\r\n      {<Typography onClick={handleOpen}>About</Typography>}\r\n      <Dialog open={open} onClose={handleClose}>\r\n        <DialogTitle style={{ textAlign: 'center' }}>About</DialogTitle>\r\n        <DialogContent>\r\n          <Typography variant=\"body1\">\r\n            A simple Army Builder for the tabletop game{' '}\r\n            {<a href=\"https://ospreypublishing.com/dragon-rampant\">Dragon Rampant</a>}.\r\n          </Typography>\r\n          <Box display=\"flex\" style={{ marginTop: 25 }}>\r\n            <Chip\r\n              label=\"View on Github\"\r\n              icon={<GitHubIcon />}\r\n              component=\"a\"\r\n              href=\"#chip\"\r\n              clickable\r\n            />\r\n            <Box flexGrow={1}></Box>\r\n            <Chip label=\"License: MIT\" />\r\n          </Box>\r\n        </DialogContent>\r\n      </Dialog>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(About);\r\n","import { IconButton, Tooltip, Typography } from '@material-ui/core';\r\nimport BackupIcon from '@material-ui/icons/Backup';\r\nimport { saveAs } from 'file-saver';\r\nimport React from 'react';\r\nimport { rosterStore } from 'store/persistantStorage';\r\n\r\nconst Backup: React.FC<{ showText: boolean; onClose?: () => void }> = ({\r\n  showText = false,\r\n  onClose = undefined,\r\n}) => {\r\n  const backup = async () => {\r\n    const savedLists: any = {};\r\n    await rosterStore.iterate((val, key) => {\r\n      savedLists[key] = val;\r\n    });\r\n\r\n    const file = new Blob([JSON.stringify(savedLists)], {\r\n      type: 'text/plain;charset=utf-8',\r\n    });\r\n\r\n    let date = new Date();\r\n    const offsetMs = date.getTimezoneOffset() * 60 * 1000;\r\n    date = new Date(date.getTime() - offsetMs);\r\n    const dateText = date.toISOString().slice(0, 10).replace(/-/g, '/');\r\n\r\n    saveAs(file, `${dateText}_DRAB.sav`);\r\n    if (onClose) onClose();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title=\"Backup\">\r\n        <IconButton color=\"inherit\" onClick={backup}>\r\n          <BackupIcon />\r\n        </IconButton>\r\n      </Tooltip>\r\n      {showText && <Typography onClick={backup}>Backup</Typography>}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(Backup);\r\n","import { IconButton, Tooltip, Typography } from '@material-ui/core';\r\nimport BrightnessHighIcon from '@material-ui/icons/BrightnessHigh';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport { updateUI } from 'store/uiSlice';\r\n\r\nconst Darkmode: React.FC<{ showText?: boolean }> = ({ showText }) => {\r\n  let darkMode = useSelector((state: RootState) => state.ui.darkMode);\r\n  const autoDarkMode = useSelector((state: RootState) => state.appState.autoDarkMode);\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const handleClick = () => {\r\n    if (darkMode === undefined) darkMode = autoDarkMode;\r\n    dispatch(updateUI({ darkMode: !darkMode }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title=\"Dark Mode\">\r\n        <IconButton onClick={handleClick}>\r\n          <BrightnessHighIcon color={darkMode ? 'inherit' : 'disabled'} />\r\n        </IconButton>\r\n      </Tooltip>\r\n      {showText && (\r\n        <Typography\r\n          color={darkMode ? 'inherit' : 'textSecondary'}\r\n          onClick={handleClick}\r\n        >\r\n          Dark Mode\r\n        </Typography>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(Darkmode);\r\n","import { IconButton, Tooltip, Typography } from '@material-ui/core';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport React, { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { showFeedback } from 'store/appStateSlice';\r\nimport { rosterStore } from 'store/persistantStorage';\r\nimport ListDialog from './ListDialog';\r\n\r\nconst DeleteList: React.FC<{ onClose?: () => void; showText?: boolean }> = ({\r\n  onClose,\r\n  showText,\r\n}) => {\r\n  const dispatch = useDispatch();\r\n  const [savedRosters, setSavedRosters] = useState<string[]>([]);\r\n\r\n  const handleOpen = () => rosterStore.keys().then((keys) => setSavedRosters(keys));\r\n\r\n  const removeList = async (name: string) => {\r\n    await rosterStore.removeItem(name);\r\n    dispatch(showFeedback('Deleted!', 'success'));\r\n  };\r\n\r\n  return (\r\n    <ListDialog\r\n      action={removeList}\r\n      onOpen={handleOpen}\r\n      anchor={(openFunc) => (\r\n        <>\r\n          <Tooltip title=\"Delete List\">\r\n            <IconButton color=\"inherit\" onClick={openFunc}>\r\n              <DeleteIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n          {showText && <Typography onClick={openFunc}>Delete List</Typography>}\r\n        </>\r\n      )}\r\n      options={savedRosters}\r\n      title=\"Choose List to delete\"\r\n      onClose={onClose}\r\n    />\r\n  );\r\n};\r\n\r\nexport default React.memo(DeleteList);\r\n","import { IconButton, Tooltip, Typography } from '@material-ui/core';\r\nimport ArrowDownwardIcon from '@material-ui/icons/ArrowDownward';\r\nimport FormatAlignJustifyIcon from '@material-ui/icons/FormatAlignJustify';\r\nimport FormatAlignLeftIcon from '@material-ui/icons/FormatAlignLeft';\r\nimport ShareIcon from '@material-ui/icons/Share';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { showFeedback } from 'store/appStateSlice';\r\nimport { getTotalPoints } from 'store/rosterSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport ListDialog from './ListDialog';\r\nimport { packRoster } from './Roster';\r\n\r\nconst copyToClipboard = (text: string) => navigator.clipboard.writeText(text);\r\n\r\nconst ExportList: React.FC<{ onClose?: () => void; showText?: boolean }> = ({\r\n  onClose,\r\n  showText,\r\n}) => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const roster = useSelector((state: RootState) => state.roster);\r\n  const getImportableString = () => JSON.stringify(packRoster(roster));\r\n  const units = useSelector((state: RootState) => state.roster.units);\r\n  const armyCost = getTotalPoints(units);\r\n\r\n  const getListAsText = () => {\r\n    let text: string[] = [];\r\n    text.push(`${roster.name} @${armyCost} points`);\r\n    text.push('=====================================');\r\n    for (const unit of Object.values(roster.units)) {\r\n      text.push('');\r\n      text.push(\r\n        `${unit.customName ? unit.customName + ' (' + unit.name + ')' : unit.name} @${\r\n          unit.points\r\n        } points`\r\n      );\r\n      text.push('-----------------------------------');\r\n\r\n      const options = [...unit.options, ...unit.fantasticalRules];\r\n      if (options.length) {\r\n        for (const option of options) text.push(`- ${option}`);\r\n      }\r\n    }\r\n    text.push('');\r\n    return text.join('\\n');\r\n  };\r\n\r\n  const getListAsMarkdown = () => {\r\n    let text: string[] = [];\r\n    text.push(`**${roster.name} @${armyCost} points**`);\r\n    for (const unit of Object.values(roster.units)) {\r\n      text.push('');\r\n      text.push(\r\n        `* ${unit.customName ? unit.customName + ' (' + unit.name + ')' : unit.name} @${\r\n          unit.points\r\n        } points`\r\n      );\r\n\r\n      const options = [...unit.options, ...unit.fantasticalRules];\r\n      if (options.length) {\r\n        text.push('');\r\n        for (const option of options) text.push(`    - ${option}`);\r\n      }\r\n    }\r\n    text.push('');\r\n    return text.join('\\n');\r\n  };\r\n\r\n  const options: [string, JSX.Element][] = [\r\n    ['As an importable String', <ArrowDownwardIcon />],\r\n    ['As text', <FormatAlignLeftIcon />],\r\n    ['As markdown text', <FormatAlignJustifyIcon />],\r\n  ];\r\n\r\n  const funcs = [getImportableString, getListAsText, getListAsMarkdown];\r\n\r\n  const exportList = (text: string) => {\r\n    let exportFunc: () => string =\r\n      funcs[options.reduce((acc, opt, i) => (opt[0] === text ? i : acc), 0)];\r\n\r\n    try {\r\n      const list = exportFunc();\r\n      copyToClipboard(list);\r\n      dispatch(showFeedback('List copied to clipboard!', 'success'));\r\n    } catch (err) {\r\n      dispatch(showFeedback('Could not export the list!', 'error'));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ListDialog\r\n      action={exportList}\r\n      anchor={(openFunc) => (\r\n        <>\r\n          <Tooltip title=\"Export\">\r\n            <IconButton color=\"inherit\" onClick={openFunc}>\r\n              <ShareIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n          {showText && <Typography onClick={openFunc}>Export List</Typography>}\r\n        </>\r\n      )}\r\n      options={options}\r\n      title=\"Chose how to export\"\r\n      onClose={onClose}\r\n    />\r\n  );\r\n};\r\n\r\nexport default React.memo(ExportList);\r\n","import { IconButton, Tooltip, Typography } from '@material-ui/core';\r\nimport GetAppIcon from '@material-ui/icons/GetApp';\r\nimport React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { showFeedback, toggleForceInputUpdate } from 'store/appStateSlice';\r\nimport { setRoster } from 'store/rosterSlice';\r\nimport { unpackRoster } from './Roster';\r\nimport TextInputDialog from './TextInputDialog';\r\n\r\nconst ImportList: React.FC<{ onClose?: () => void; showText?: boolean }> = ({\r\n  onClose,\r\n  showText,\r\n}) => {\r\n  const dispatch = useDispatch();\r\n\r\n  const handleImport = (value?: string) => {\r\n    if (!value) return;\r\n    try {\r\n      const list = unpackRoster(JSON.parse(value));\r\n      dispatch(setRoster({ ...list }));\r\n      dispatch(toggleForceInputUpdate());\r\n      dispatch(showFeedback('List imported!', 'success'));\r\n    } catch (err) {\r\n      dispatch(showFeedback('Could not import the list!', 'error'));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <TextInputDialog\r\n      anchor={(openFunc) => (\r\n        <>\r\n          <Tooltip title=\"Import list\">\r\n            <IconButton color=\"inherit\" onClick={openFunc}>\r\n              <GetAppIcon />\r\n            </IconButton>\r\n          </Tooltip>\r\n          {showText && <Typography onClick={openFunc}>Import list</Typography>}\r\n        </>\r\n      )}\r\n      action={handleImport}\r\n      title=\"Enter the import string\"\r\n      label=\"Exported String\"\r\n      okayText=\"Import\"\r\n      onClose={onClose}\r\n    />\r\n  );\r\n};\r\n\r\nexport default React.memo(ImportList);\r\n","import { IconButton, Tooltip, Typography } from '@material-ui/core';\r\nimport RestorePageIcon from '@material-ui/icons/RestorePage';\r\nimport React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { showFeedback, toggleForceInputUpdate } from 'store/appStateSlice';\r\nimport { rosterStore } from 'store/persistantStorage';\r\n\r\nconst Restore: React.FC<{ onClose?: () => void; showText?: boolean }> = ({\r\n  showText,\r\n  onClose,\r\n}) => {\r\n  const dispatch = useDispatch();\r\n\r\n  let fileReader: FileReader;\r\n  const fileDialog = React.useRef<HTMLInputElement>(null);\r\n\r\n  const restore = async () => {\r\n    try {\r\n      const content = fileReader.result as string;\r\n      const savedLists: Object = JSON.parse(content);\r\n      await Promise.all(\r\n        Object.entries(savedLists).map(([key, val]) => rosterStore.setItem(key, val))\r\n      );\r\n      dispatch(toggleForceInputUpdate());\r\n      dispatch(showFeedback(`Restored!`, 'success'));\r\n    } catch (err) {\r\n      dispatch(showFeedback(`Could not restore!`, 'error'));\r\n      console.log(err);\r\n    }\r\n    if (onClose) onClose();\r\n  };\r\n\r\n  const handleFileChosen = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    fileReader = new FileReader();\r\n    fileReader.onloadend = restore;\r\n    if (event.target.files) fileReader.readAsText(event.target.files[0]);\r\n  };\r\n\r\n  const openFileDialog = () => {\r\n    if (fileDialog.current) fileDialog.current.click();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Tooltip title=\"Backup\">\r\n        <IconButton color=\"inherit\" onClick={openFileDialog}>\r\n          <RestorePageIcon />\r\n        </IconButton>\r\n      </Tooltip>\r\n      {showText && <Typography onClick={openFileDialog}>Restore</Typography>}\r\n      <input\r\n        type=\"file\"\r\n        ref={fileDialog}\r\n        style={{ display: 'none' }}\r\n        id=\"restoreFile\"\r\n        accept=\".sav\"\r\n        onChange={handleFileChosen}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(Restore);\r\n","import { Divider, Drawer, List, ListItem } from '@material-ui/core';\r\nimport MenuIcon from '@material-ui/icons/Menu';\r\nimport React, { useCallback } from 'react';\r\nimport About from './About';\r\nimport Backup from './Backup';\r\nimport DarkMode from './DarkMode';\r\nimport DeleteList from './DeleteList';\r\nimport ExportList from './ExportList';\r\nimport ImportList from './ImportList';\r\nimport LoadList from './LoadList';\r\nimport Restore from './Restore';\r\nimport SaveList from './SaveList';\r\n\r\nconst SideMenu = () => {\r\n  const [open, setOpen] = React.useState(false);\r\n\r\n  const toggleDrawer = (open: boolean) => (event: any) => {\r\n    if (event.type === 'keydown' && (event.key === 'Tab' || event.key === 'Shift')) {\r\n      return;\r\n    }\r\n    setOpen(open);\r\n  };\r\n\r\n  const handleClose = useCallback(() => setOpen(false), []);\r\n\r\n  return (\r\n    <>\r\n      <MenuIcon onClick={toggleDrawer(true)} />\r\n      <Drawer open={open} onClose={toggleDrawer(false)}>\r\n        <List>\r\n          <ListItem button key={'Save'}>\r\n            <SaveList onClose={handleClose} showText={true} />\r\n          </ListItem>\r\n          <ListItem button key={'Load'}>\r\n            <LoadList onClose={handleClose} showText={true} />\r\n          </ListItem>\r\n          <ListItem button key={'Delete'}>\r\n            <DeleteList onClose={handleClose} showText={true} />\r\n          </ListItem>\r\n          <Divider />\r\n          <ListItem button key={'Export'}>\r\n            <ExportList onClose={handleClose} showText={true} />\r\n          </ListItem>\r\n          <ListItem button key={'Import'}>\r\n            <ImportList onClose={handleClose} showText={true} />\r\n          </ListItem>\r\n          <Divider />\r\n          <ListItem button key={'Backup'}>\r\n            <Backup onClose={handleClose} showText={true} />\r\n          </ListItem>\r\n          <ListItem button key={'Restore'}>\r\n            <Restore onClose={handleClose} showText={true} />\r\n          </ListItem>\r\n          <Divider />\r\n          <ListItem button key={'DarkMode'}>\r\n            <DarkMode showText={true} />\r\n          </ListItem>\r\n          <ListItem button key={'About'}>\r\n            <About onClose={handleClose} />\r\n          </ListItem>\r\n        </List>\r\n      </Drawer>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default React.memo(SideMenu);\r\n","import { Fab, Hidden, Typography } from '@material-ui/core';\r\nimport React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { getTotalPoints } from 'store/rosterSlice';\r\nimport { RootState } from 'store/store';\r\n\r\nconst TotalPoints = () => {\r\n  const units = useSelector((state: RootState) => state.roster.units);\r\n  const armyCost = getTotalPoints(units);\r\n\r\n  return (\r\n    <>\r\n      <Hidden smDown>\r\n        <Typography variant=\"h6\">\r\n          &nbsp;&nbsp;&nbsp;&nbsp;Total Points&nbsp;&nbsp;\r\n          <Fab color=\"secondary\" size=\"small\">\r\n            <Typography variant=\"h6\">{armyCost}</Typography>\r\n          </Fab>\r\n        </Typography>\r\n      </Hidden>\r\n      <Hidden mdUp>\r\n        <Typography variant=\"h6\">\r\n          &nbsp;&nbsp;&nbsp;&nbsp;\r\n          <Fab color=\"secondary\" size=\"small\">\r\n            <Typography variant=\"h6\">{armyCost}</Typography>\r\n          </Fab>\r\n        </Typography>\r\n      </Hidden>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default TotalPoints;\r\n","import {\r\n  AppBar as AppBarMaterial,\r\n  Box,\r\n  Hidden,\r\n  IconButton,\r\n  Toolbar,\r\n  Tooltip,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport EditIcon from '@material-ui/icons/Edit';\r\nimport ReplayIcon from '@material-ui/icons/Replay';\r\nimport VisibilityIcon from '@material-ui/icons/Visibility';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { newRoster } from 'store/rosterSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport { UIState, updateUI } from 'store/uiSlice';\r\nimport LoadList from '../LoadList';\r\nimport SaveList from '../SaveList';\r\nimport SideMenu from '../SideMenu';\r\nimport TotalPoints from './TotalPoints';\r\n\r\nconst AppBar = () => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const ui = useSelector((state: RootState) => state.ui);\r\n\r\n  const changeViewMode = (clicked: keyof UIState, newState: boolean) => {\r\n    const notClicked = clicked === 'viewMode' ? 'editMode' : 'viewMode';\r\n    let newStates = { [clicked]: newState };\r\n    if (newState) newStates = { ...newStates, [notClicked]: false };\r\n    dispatch(updateUI(newStates));\r\n  };\r\n\r\n  const ToggleUIButton: React.FC<{\r\n    option: keyof UIState;\r\n    Icon: any;\r\n    title: string;\r\n    onClick: (arg0: keyof UIState, arg1: boolean) => void;\r\n  }> = ({ option, Icon, title, onClick }) => (\r\n    <Tooltip title={title}>\r\n      <IconButton\r\n        color=\"inherit\"\r\n        onClick={() => {\r\n          onClick(option, !ui[option]);\r\n        }}\r\n      >\r\n        <Icon fontSize=\"small\" color={ui[option] ? 'inherit' : 'disabled'} />\r\n      </IconButton>\r\n    </Tooltip>\r\n  );\r\n\r\n  return (\r\n    <Box display=\"flex\">\r\n      <AppBarMaterial position=\"fixed\">\r\n        <Toolbar>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <SideMenu />\r\n            <Hidden smDown>\r\n              <Typography variant=\"h5\">\r\n                &nbsp;&nbsp;Dragon Rampant Army Builder&nbsp;&nbsp;\r\n              </Typography>\r\n            </Hidden>\r\n            <Hidden xsDown mdUp>\r\n              <Typography variant=\"h5\">&nbsp;&nbsp;DRAB&nbsp;&nbsp;</Typography>\r\n            </Hidden>\r\n            <IconButton color=\"inherit\" onClick={() => dispatch(newRoster())}>\r\n              <ReplayIcon />\r\n            </IconButton>\r\n            <SaveList />\r\n            <LoadList />\r\n          </Box>\r\n          <Box flexGrow={1}></Box>\r\n          <Box display=\"flex\" alignItems=\"center\">\r\n            <ToggleUIButton\r\n              option=\"viewMode\"\r\n              Icon={VisibilityIcon}\r\n              title=\"View mode\"\r\n              onClick={changeViewMode}\r\n            />\r\n            <ToggleUIButton\r\n              option=\"editMode\"\r\n              Icon={EditIcon}\r\n              title=\"Edit mode\"\r\n              onClick={changeViewMode}\r\n            />\r\n            <TotalPoints />\r\n          </Box>\r\n        </Toolbar>\r\n      </AppBarMaterial>\r\n      <Toolbar />\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default AppBar;\r\n","import { FormControl, Typography } from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { updateRoster } from 'store/rosterSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    backgroundColor: theme.palette.background.default,\r\n    color: theme.palette.text.primary,\r\n    border: 0,\r\n    marginTop: 25,\r\n    marginBottom: 25,\r\n    width: '100%',\r\n  },\r\n}));\r\n\r\nconst ListName = () => {\r\n  const classes = useStyles();\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const rosterName = useSelector((state: RootState) => state.roster.name);\r\n  const inputUpdate = useSelector((state: RootState) => state.appState.inputUpdate);\r\n\r\n  return (\r\n    <FormControl>\r\n      <Typography\r\n        className={classes.root}\r\n        variant=\"h4\"\r\n        key={inputUpdate.toString()}\r\n        component=\"input\"\r\n        value={rosterName}\r\n        onChange={(e: React.ChangeEvent<HTMLInputElement>) =>\r\n          dispatch(updateRoster({ name: e.target.value }))\r\n        }\r\n      />\r\n    </FormControl>\r\n  );\r\n};\r\n\r\nexport default ListName;\r\n","import {\r\n  ExpansionPanel,\r\n  ExpansionPanelDetails,\r\n  ExpansionPanelSummary,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport data from 'store/data';\r\nimport { getSpecialRules } from 'store/rosterSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport { toggleUIOption } from 'store/uiSlice';\r\n\r\nconst rulesData = data.rulesData;\r\n\r\nconst RulesSummary = () => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const rulesSummaryExpanded = useSelector(\r\n    (state: RootState) => state.ui.rulesSummaryExpanded\r\n  );\r\n  const units = useSelector((state: RootState) => state.roster.units);\r\n  const specialRules = getSpecialRules(units);\r\n\r\n  return (\r\n    <ExpansionPanel\r\n      expanded={rulesSummaryExpanded}\r\n      onChange={() => dispatch(toggleUIOption('rulesSummaryExpanded'))}\r\n      style={{ maxWidth: 1210 }}\r\n    >\r\n      <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n        <Typography variant=\"h5\">Rules Summary</Typography>\r\n      </ExpansionPanelSummary>\r\n      <ExpansionPanelDetails style={{ maxWidth: 800 }}>\r\n        <List>\r\n          {specialRules.map((rule) => (\r\n            <ListItem key={rule}>\r\n              <ListItemText primary={rule} secondary={rulesData[rule] || ''} />\r\n            </ListItem>\r\n          ))}\r\n        </List>\r\n      </ExpansionPanelDetails>\r\n    </ExpansionPanel>\r\n  );\r\n};\r\n\r\nexport default RulesSummary;\r\n","import Snackbar from '@material-ui/core/Snackbar';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { closeFeedback } from 'store/appStateSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\n\r\nconst ShowFeedback = () => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const feedback = useSelector((state: RootState) => state.appState.feedback);\r\n\r\n  const handleClose = (event?: React.SyntheticEvent, reason?: string) => {\r\n    if (reason === 'clickaway') {\r\n      return;\r\n    }\r\n    dispatch(closeFeedback());\r\n  };\r\n\r\n  return (\r\n    <Snackbar open={feedback.open} autoHideDuration={6000} onClose={handleClose}>\r\n      <Alert\r\n        onClose={handleClose}\r\n        severity={feedback.severity}\r\n        variant=\"filled\"\r\n        elevation={6}\r\n      >\r\n        {feedback.message}\r\n      </Alert>\r\n    </Snackbar>\r\n  );\r\n};\r\n\r\nexport default ShowFeedback;\r\n","import {\r\n  Box,\r\n  Collapse,\r\n  ExpansionPanel,\r\n  ExpansionPanelDetails,\r\n  ExpansionPanelSummary,\r\n  Hidden,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport React, { useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport data from 'store/data';\r\nimport { getSpecialRules } from 'store/rosterSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport { toggleUIOption } from 'store/uiSlice';\r\n\r\nconst spellData = data.spellData;\r\n\r\nconst SpellTable = () => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const spellsExpanded = useSelector((state: RootState) => state.ui.spellsExpanded);\r\n  const units = useSelector((state: RootState) => state.roster.units);\r\n  const [open, setOpen] = useState([...Array(Object.keys(spellData))].map(() => false));\r\n  const specialRules = getSpecialRules(units);\r\n\r\n  const spellcasterInRoster = () => {\r\n    for (const rule of specialRules) {\r\n      if (rule === 'Spellcaster' || rule === 'Wizardlings') return true;\r\n    }\r\n    return false;\r\n  };\r\n\r\n  const handleSpellClick = (index: number) => {\r\n    const newOpen = [...open];\r\n    newOpen[index] = !open[index];\r\n    setOpen(newOpen);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {spellcasterInRoster() && (\r\n        <ExpansionPanel\r\n          expanded={spellsExpanded}\r\n          onChange={() => dispatch(toggleUIOption('spellsExpanded'))}\r\n          style={{ maxWidth: 1210 }}\r\n        >\r\n          <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n            <Typography variant=\"h5\">Spell Table</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails style={{ maxWidth: 800 }}>\r\n            <Hidden smDown>\r\n              <TableContainer>\r\n                <Table size=\"small\" style={{ minWidth: 650 }}>\r\n                  <TableHead>\r\n                    <TableRow key=\"headspelltable\">\r\n                      <TableCell style={{ minWidth: 100 }}>Spell name</TableCell>\r\n                      <Hidden smDown>\r\n                        <TableCell align=\"center\">Difficulty</TableCell>\r\n                      </Hidden>\r\n                      <Hidden mdUp>\r\n                        <TableCell align=\"center\">Dif</TableCell>\r\n                      </Hidden>\r\n                      <TableCell>Target</TableCell>\r\n                      <TableCell>Duration</TableCell>\r\n                      <TableCell>Effect</TableCell>\r\n                    </TableRow>\r\n                  </TableHead>\r\n                  <TableBody>\r\n                    {Object.values(spellData).map((spell) => (\r\n                      <TableRow key={spell.name}>\r\n                        <TableCell component=\"th\" scope=\"row\">\r\n                          {spell.name}\r\n                        </TableCell>\r\n                        <TableCell align=\"center\">{spell.difficulty}+</TableCell>\r\n                        <TableCell>{spell.target}</TableCell>\r\n                        <TableCell>{spell.duration}</TableCell>\r\n                        <TableCell>{spell.effect}</TableCell>\r\n                      </TableRow>\r\n                    ))}\r\n                  </TableBody>\r\n                </Table>\r\n              </TableContainer>\r\n            </Hidden>\r\n            <Hidden mdUp>\r\n              <List>\r\n                {Object.values(spellData).map((spell, index) => (\r\n                  <Box key={index}>\r\n                    <ListItem\r\n                      key={spell.name + 'small'}\r\n                      button\r\n                      onClick={() => handleSpellClick(index)}\r\n                    >\r\n                      <ListItemText primary={spell.name} />\r\n                      <Box width={25}></Box>\r\n                      {open[index] ? <ExpandLessIcon /> : <ExpandMoreIcon />}\r\n                    </ListItem>\r\n                    <Collapse in={open[index]} timeout=\"auto\" unmountOnExit>\r\n                      <List key={spell.name + 'list'} dense style={{ paddingLeft: 20 }}>\r\n                        <ListItem key={spell.name + spell.difficulty}>\r\n                          <ListItemText\r\n                            primary=\"Difficulty: \"\r\n                            secondary={spell.difficulty}\r\n                          />\r\n                        </ListItem>\r\n                        <ListItem key={spell.name + spell.target}>\r\n                          <ListItemText primary=\"Target: \" secondary={spell.target} />\r\n                        </ListItem>\r\n                        <ListItem key={spell.name + spell.duration}>\r\n                          <ListItemText\r\n                            primary=\"Duration: \"\r\n                            secondary={spell.duration}\r\n                          />\r\n                        </ListItem>\r\n                        <ListItem key={spell.name + spell.effect}>\r\n                          <ListItemText primary=\"Effect: \" secondary={spell.effect} />\r\n                        </ListItem>\r\n                      </List>\r\n                    </Collapse>\r\n                  </Box>\r\n                ))}\r\n              </List>\r\n            </Hidden>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default SpellTable;\r\n","import React from 'react';\r\nimport { Cell, Legend, Pie, PieChart, ResponsiveContainer, Tooltip } from 'recharts';\r\n\r\nexport default function PointDistributionChart({ data, height, colors }) {\r\n  return (\r\n    <ResponsiveContainer height={height}>\r\n      <PieChart>\r\n        <Pie\r\n          data={data}\r\n          dataKey=\"value\"\r\n          label={renderCustomizedLabel}\r\n          labelLine={false}\r\n          outerRadius={80}\r\n        >\r\n          {data.map((entry, index) => (\r\n            <Cell key={entry} fill={colors[index]} />\r\n          ))}\r\n        </Pie>\r\n        <Tooltip />\r\n        <Legend />\r\n      </PieChart>\r\n    </ResponsiveContainer>\r\n  );\r\n}\r\n\r\nconst RADIAN = Math.PI / 180;\r\nconst renderCustomizedLabel = ({\r\n  cx,\r\n  cy,\r\n  midAngle,\r\n  innerRadius,\r\n  outerRadius,\r\n  percent,\r\n}) => {\r\n  const radius = innerRadius + (outerRadius - innerRadius) * 0.5;\r\n  const x = cx + radius * Math.cos(-midAngle * RADIAN);\r\n  const y = cy + radius * Math.sin(-midAngle * RADIAN);\r\n  const percentValue = (percent * 100).toFixed(0);\r\n\r\n  return (\r\n    <text\r\n      x={x}\r\n      y={y}\r\n      fill=\"black\"\r\n      textAnchor={x > cx ? 'start' : 'end'}\r\n      dominantBaseline=\"central\"\r\n    >\r\n      {percentValue > 0 ? `${percentValue}%` : ''}\r\n    </text>\r\n  );\r\n};\r\n","import { useTheme } from '@material-ui/core/styles';\r\nimport React from 'react';\r\nimport {\r\n  Bar,\r\n  BarChart,\r\n  CartesianGrid,\r\n  LabelList,\r\n  Legend,\r\n  ResponsiveContainer,\r\n  XAxis,\r\n  YAxis,\r\n} from 'recharts';\r\n\r\nconst CustomLabel = ({ x, y, width, value }) => {\r\n  const theme = useTheme();\r\n  return (\r\n    <text\r\n      x={x + width / 2}\r\n      y={y - 5}\r\n      fill={theme.palette.text.primary}\r\n      textAnchor=\"middle\"\r\n    >\r\n      {value}\r\n    </text>\r\n  );\r\n};\r\n\r\nconst CustomXAxis = ({ x, y, payload }) => {\r\n  const theme = useTheme();\r\n  return (\r\n    <text x={x} y={y + 10} fill={theme.palette.text.primary} textAnchor=\"middle\">\r\n      {payload.value}\r\n    </text>\r\n  );\r\n};\r\n\r\nexport default function UnitDistributionChart({ data, height, colors }) {\r\n  return (\r\n    <ResponsiveContainer height={height}>\r\n      <BarChart\r\n        data={data}\r\n        margin={{\r\n          top: 20,\r\n          right: 30,\r\n          left: 20,\r\n          bottom: 5,\r\n        }}\r\n      >\r\n        <CartesianGrid strokeDasharray=\"3 3\" />\r\n        <XAxis dataKey=\"name\" tick={<CustomXAxis />} />\r\n        <YAxis />\r\n        <Legend wrapperStyle={{ bottom: 0, left: 50 }} />\r\n        <Bar dataKey=\"Units\" fill={colors[0]} minPointSize={3}>\r\n          <LabelList dataKey=\"Units\" position=\"top\" content={<CustomLabel />} />\r\n        </Bar>\r\n        <Bar dataKey=\"Points\" fill={colors[1]} minPointSize={3}>\r\n          <LabelList dataKey=\"Points\" position=\"top\" content={<CustomLabel />} />\r\n        </Bar>\r\n      </BarChart>\r\n    </ResponsiveContainer>\r\n  );\r\n}\r\n","import {\r\n  Chip,\r\n  ExpansionPanel,\r\n  ExpansionPanelDetails,\r\n  ExpansionPanelSummary,\r\n  Typography,\r\n  useMediaQuery,\r\n} from '@material-ui/core';\r\nimport { useTheme } from '@material-ui/core/styles';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport data from 'store/data';\r\nimport { getTotalPoints } from 'store/rosterSlice';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport { toggleUIOption } from 'store/uiSlice';\r\nimport PointDistributionChart from './PointDistributionChart';\r\nimport UnitDistributionChart from './UnitDistributionChart';\r\n\r\nconst unitData = data.unitData;\r\nconst fantasticalRulesData = data.fantasticalRulesData;\r\n\r\nconst Statistics = () => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const statisticsExpanded = useSelector(\r\n    (state: RootState) => state.ui.statisticsExpanded\r\n  );\r\n  const units = useSelector((state: RootState) => state.roster.units);\r\n  const totalPoints = getTotalPoints(units);\r\n  const theme = useTheme();\r\n  const chipSize = useMediaQuery(theme.breakpoints.down('sm')) ? 'small' : 'medium';\r\n\r\n  const optionPoints = Object.values(units).reduce(\r\n    (accumulator, unit) =>\r\n      unit.options.reduce(\r\n        (acc, option) => acc + (unitData[unit.name].options[option].points || 0),\r\n        accumulator\r\n      ),\r\n    0\r\n  );\r\n\r\n  const fantasticalPoints = Object.values(units).reduce(\r\n    (accumulator, unit) =>\r\n      unit.fantasticalRules.reduce(\r\n        (acc, option) => acc + fantasticalRulesData[option].points,\r\n        accumulator\r\n      ),\r\n    0\r\n  );\r\n\r\n  const COLORS = ['#8884d8', '#82ca9d', '#FF8042'];\r\n  const unitCount = Object.keys(units).length;\r\n  const mounted = Object.values(units).filter((u) => u.type === 'mounted');\r\n  const foot = Object.values(units).filter((u) => u.type === 'foot');\r\n  const ranged = Object.values(units).filter((u) => u.stats.shoot > 0);\r\n  const unitsCost = Object.values(units).reduce(\r\n    (acc, u) => acc + unitData[u.name].points,\r\n    0\r\n  );\r\n\r\n  const dataUnitTypes = [\r\n    {\r\n      name: 'Mounted',\r\n      Units: Object.keys(mounted).length,\r\n      Points: Object.values(mounted).reduce((acc, u) => acc + u.points, 0),\r\n    },\r\n    {\r\n      name: 'Foot',\r\n      Units: Object.keys(foot).length,\r\n      Points: Object.values(foot).reduce((acc, u) => acc + u.points, 0),\r\n    },\r\n    {\r\n      name: 'Ranged',\r\n      Units: Object.keys(ranged).length,\r\n      Points: Object.values(ranged).reduce((acc, u) => acc + u.points, 0),\r\n    },\r\n  ];\r\n\r\n  const dataPoints = [\r\n    { name: 'Units', value: unitsCost },\r\n    { name: 'Options', value: optionPoints < 0 ? 0 : optionPoints },\r\n    { name: 'Fantastical Rules', value: fantasticalPoints },\r\n  ];\r\n\r\n  return (\r\n    <ExpansionPanel\r\n      expanded={statisticsExpanded}\r\n      onChange={() => dispatch(toggleUIOption('statisticsExpanded'))}\r\n      style={{ maxWidth: 1210 }}\r\n    >\r\n      <ExpansionPanelSummary expandIcon={<ExpandMoreIcon />}>\r\n        <Typography variant=\"h5\">Statistics</Typography>\r\n      </ExpansionPanelSummary>\r\n      <ExpansionPanelDetails>\r\n        <div>\r\n          <Chip\r\n            label={totalPoints + ' Points'}\r\n            color=\"primary\"\r\n            size={chipSize}\r\n            style={{ marginRight: 10, marginBottom: 25 }}\r\n          />\r\n          <Chip\r\n            label={unitCount + ' Units'}\r\n            color=\"primary\"\r\n            size={chipSize}\r\n            style={{ marginRight: 10, marginBottom: 25 }}\r\n          />\r\n          <Chip\r\n            label={\r\n              (totalPoints / (unitCount ? unitCount : 1)).toPrecision(2) +\r\n              ' Points per unit'\r\n            }\r\n            color=\"primary\"\r\n            size={chipSize}\r\n            style={{ marginRight: 10, marginBottom: 25 }}\r\n          />\r\n          {unitsCost > 0 && (\r\n            <>\r\n              <Typography variant=\"h6\" style={{ marginTop: 25 }}>\r\n                Unit Distribution\r\n              </Typography>\r\n              <UnitDistributionChart\r\n                data={dataUnitTypes}\r\n                height={300}\r\n                colors={COLORS}\r\n              />\r\n              <Typography variant=\"h6\" style={{ marginTop: 25 }}>\r\n                Point Distribution\r\n              </Typography>\r\n              <PointDistributionChart data={dataPoints} height={300} colors={COLORS} />\r\n            </>\r\n          )}\r\n        </div>\r\n      </ExpansionPanelDetails>\r\n    </ExpansionPanel>\r\n  );\r\n};\r\n\r\nexport default Statistics;\r\n","import {\r\n  ExpansionPanel,\r\n  ExpansionPanelDetails,\r\n  ExpansionPanelSummary,\r\n  List,\r\n  ListItem,\r\n  ListItemIcon,\r\n  ListItemText,\r\n  Typography,\r\n} from '@material-ui/core';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\r\nimport React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AppDispatch, RootState } from 'store/store';\r\nimport { toggleUIOption } from 'store/uiSlice';\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  title: {\r\n    backgroundColor: theme.palette.error.main,\r\n    color: theme.palette.error.contrastText,\r\n  },\r\n  details: {\r\n    backgroundColor: theme.palette.error.light,\r\n    color: theme.palette.error.contrastText,\r\n  },\r\n}));\r\n\r\nconst Validation = () => {\r\n  const dispatch: AppDispatch = useDispatch();\r\n  const validationExpanded = useSelector(\r\n    (state: RootState) => state.ui.validationExpanded\r\n  );\r\n  const classes = useStyles();\r\n  const units = Object.values(useSelector((state: RootState) => state.roster.units));\r\n\r\n  const warnings = [];\r\n  for (const unit of units) {\r\n    if (unit.points > 10)\r\n      warnings.push([unit.name, 'No Unit may cost more than 10 points!']);\r\n    if (unit.name !== 'Unit' && unit.points <= 0)\r\n      warnings.push([unit.name, 'No Unit may cost 0 or less points!']);\r\n    if (\r\n      unit.options.includes('Short range missiles') &&\r\n      unit.options.includes('Mixed Weapons')\r\n    )\r\n      warnings.push([\r\n        unit.name,\r\n        'Short range missiles and Mixed Weapons may not be used together!',\r\n      ]);\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {warnings.length !== 0 && (\r\n        <ExpansionPanel\r\n          expanded={validationExpanded}\r\n          onChange={() => dispatch(toggleUIOption('validationExpanded'))}\r\n          style={{ maxWidth: 1210 }}\r\n        >\r\n          <ExpansionPanelSummary\r\n            className={classes.title}\r\n            expandIcon={<ExpandMoreIcon className={classes.title} />}\r\n          >\r\n            <Typography variant=\"h5\">Warnings</Typography>\r\n          </ExpansionPanelSummary>\r\n          <ExpansionPanelDetails className={classes.details}>\r\n            <List>\r\n              {warnings.map(([name, text], index) => (\r\n                <ListItem key={index}>\r\n                  <ListItemIcon className={classes.details}>\r\n                    <ErrorIcon />\r\n                  </ListItemIcon>\r\n                  <ListItemText primary={name} secondary={text} />\r\n                </ListItem>\r\n              ))}\r\n            </List>\r\n          </ExpansionPanelDetails>\r\n        </ExpansionPanel>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Validation;\r\n","import { Container, CssBaseline } from '@material-ui/core';\r\nimport { ThemeProvider } from '@material-ui/core/styles';\r\nimport useUserTheme from 'hooks/useUserTheme';\r\nimport React, { useEffect } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { uiStore } from 'store/persistantStorage';\r\nimport { UIState, updateUI } from 'store/uiSlice';\r\nimport AppBar from './AppBar';\r\nimport ListName from './ListName';\r\nimport Roster from './Roster';\r\nimport RulesSummary from './RulesSummary';\r\nimport ShowFeedback from './ShowFeedback';\r\nimport SpellTable from './SpellTable';\r\nimport Statistics from './Statistics/Statistics';\r\nimport Validation from './Validation';\r\n\r\nconst App = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  useEffect(() => {\r\n    uiStore\r\n      .getItem<Partial<UIState>>('uiOptions')\r\n      .then((options) => options != null && dispatch(updateUI(options)))\r\n      .catch((err) => console.log(err));\r\n  }, [dispatch]);\r\n\r\n  const theme = useUserTheme();\r\n\r\n  return (\r\n    <ThemeProvider theme={theme}>\r\n      <CssBaseline />\r\n      <Container>\r\n        <AppBar />\r\n        <ListName />\r\n        <Roster />\r\n        <Validation />\r\n        <RulesSummary />\r\n        <SpellTable />\r\n        <Statistics />\r\n        <ShowFeedback />\r\n      </Container>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport store from 'store/store';\r\nimport App from './components/App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <App />\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.register();\r\n"],"sourceRoot":""}