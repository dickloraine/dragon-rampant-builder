(this["webpackJsonpdragon-rampant-builder"]=this["webpackJsonpdragon-rampant-builder"]||[]).push([[0],{143:function(e){e.exports=JSON.parse('{"Unit":{"name":"Unit","points":0,"stats":{"attack":0,"move":0,"shoot":0,"courage":0,"armour":0,"attackValue":0,"defenceValue":0,"shootValue":0,"shootRange":"-","movement":0,"strengthPoints":0},"rules":[],"options":{},"fantasticalRules":[]},"Elite Riders":{"name":"Elite Riders","type":"mounted","points":6,"stats":{"attack":5,"move":7,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":5,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Wild Charge","Counter-charge"],"options":{"Mounted missiles":{"points":2,"remove":["Wild Charge","Counter-charge"],"setStats":{"shoot":6,"shootValue":5,"shootRange":12}},"Level Headed":{"points":2,"remove":["Wild Charge"],"setStats":{"move":5}}},"fantasticalRules":["any"]},"Heavy Riders":{"name":"Heavy Riders","type":"mounted","points":4,"stats":{"attack":5,"move":5,"shoot":0,"courage":4,"armour":3,"attackValue":4,"defenceValue":5,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Counter-charge"],"options":{"Mounted missiles":{"points":1,"setStats":{"shoot":6,"shootValue":5,"shootRange":12}},"Chariots":{"points":2,"add":["May not enter rough terrain"],"setStats":{"armour":4}}},"fantasticalRules":["any"]},"Light Riders":{"name":"Light Riders","type":"mounted","points":4,"stats":{"attack":7,"move":5,"shoot":6,"courage":5,"armour":3,"attackValue":5,"defenceValue":6,"shootValue":5,"shootRange":12,"movement":12,"strengthPoints":6},"rules":["Skirmish","Evade"],"options":{"Short range missiles":{"points":-1,"setStats":{"shootRange":6}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Greater Warbeasts":{"name":"Greater Warbeasts","type":"mounted","points":6,"stats":{"attack":5,"move":6,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Ranger","Wild Charge"],"options":{"Flame or Spore Attack":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wild Charge"]},"Ponderous":{"points":1,"remove":["Wild Charge"]},"Cunning":{"points":2,"setStats":{"defenceValue":5}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Lesser Warbeasts":{"name":"Lesser Warbeasts","type":"mounted","points":4,"stats":{"attack":5,"move":6,"shoot":0,"courage":4,"armour":3,"attackValue":4,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":12,"strengthPoints":6},"rules":["Ranger","Wild Charge","Fleet Footed"],"options":{"Flame or Spore Attack":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wild Charge"]},"Cunning":{"points":2,"setStats":{"defenceValue":5}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Elite Foot":{"name":"Elite Foot","type":"foot","points":6,"stats":{"attack":5,"move":5,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":6},"rules":["Ranger"],"options":{"Missiles":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":18}}},"fantasticalRules":["any"]},"Heavy Foot":{"name":"Heavy Foot","type":"foot","points":4,"stats":{"attack":6,"move":5,"shoot":0,"courage":4,"armour":3,"attackValue":5,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":12},"rules":["Wall of Spears"],"options":{"Offensive":{"points":2,"setStats":{"attackValue":4},"remove":["Wall of Spears"]}},"fantasticalRules":["any"]},"Light Foot":{"name":"Light Foot","type":"foot","points":3,"stats":{"attack":6,"move":5,"shoot":0,"courage":4,"armour":2,"attackValue":5,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":8,"strengthPoints":12},"rules":["Wall of Spears"],"options":{"Offensive":{"points":2,"setStats":{"attackValue":4},"remove":["Wall of Spears"]},"Short range missiles":{"points":1,"setStats":{"shoot":6,"shootValue":5,"shootRange":6}},"Mixed Weapons":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wall of Spears"]}},"fantasticalRules":["any"]},"Bellicose Foot":{"name":"Bellicose Foot","type":"foot","points":4,"stats":{"attack":5,"move":6,"shoot":0,"courage":4,"armour":2,"attackValue":3,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":8,"strengthPoints":12},"rules":["Ranger","Wild Charge","Counter-charge vs. foot","Fleet Footed"],"options":{"Terrifically Shiny Armour":{"points":2,"setStats":{"armour":3}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Heavy Missiles":{"name":"Heavy Missiles","type":"foot","points":4,"stats":{"attack":7,"move":6,"shoot":7,"courage":4,"armour":2,"attackValue":6,"defenceValue":5,"shootValue":4,"shootRange":18,"movement":6,"strengthPoints":12},"rules":[],"options":{"Weighty Projectiles":{"points":-1,"setStats":{"shootRange":12}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Cleric","Slayer"]},"Light Missiles":{"name":"Light Missiles","type":"foot","points":4,"stats":{"attack":7,"move":6,"shoot":6,"courage":4,"armour":2,"attackValue":6,"defenceValue":5,"shootValue":5,"shootRange":18,"movement":6,"strengthPoints":12},"rules":[],"options":{"Sharpshooter":{"points":2,"setStats":{"shootValue":4}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Cleric","Slayer"]},"Scouts":{"name":"Scouts","type":"foot","points":2,"stats":{"attack":7,"move":5,"shoot":7,"courage":5,"armour":1,"attackValue":6,"defenceValue":6,"shootValue":5,"shootRange":12,"movement":8,"strengthPoints":6},"rules":["Hard to target","Skirmish","Evade","Fleet Footed"],"options":{},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Exploder","Cleric","Slayer"]},"Ravenous Hordes":{"name":"Ravenous Hordes","type":"foot","points":1,"stats":{"attack":7,"move":6,"shoot":0,"courage":5,"armour":1,"attackValue":6,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":12},"rules":[],"options":{},"fantasticalRules":["No Feelings","Venomous","Hatred","Fear"]}}')},210:function(e){e.exports=JSON.parse('{"Cleric":{"name":"Cleric","points":4},"Slayer":{"name":"Slayer","points":4},"Exploder":{"name":"Exploder","points":2},"Fear":{"name":"Fear","points":2},"Fearful":{"name":"Fearful","points":-2},"Flying":{"name":"Flying","points":2},"Burrowing":{"name":"Burrowing","points":2},"Hatred":{"name":"Hatred","points":1},"Invisibility":{"name":"Invisibility","points":3},"Enchanted Weapons":{"name":"Enchanted Weapons","points":1},"Blessed Weapons":{"name":"Blessed Weapons","points":2},"Mystical Armour":{"name":"Mystical Armour","points":2},"Spellcaster":{"name":"Spellcaster","points":4},"Wizardlings":{"name":"Wizardlings","points":2},"Summoner":{"name":"Summoner","points":3},"No Feelings":{"name":"No Feelings","points":0},"Unstoppable March of the Dead":{"name":"Unstoppable March of the Dead","points":0},"Venomous":{"name":"Venomous","points":2}}')},211:function(e){e.exports=JSON.parse('{"Counter-charge":"When an enemy has successfully diced to Attack this unit,  but before it moves, this unit may test for a counter-charge. Test for an Attack at 7+. If it succeeds, the two units meet a proportionate movement distance between their start positions, and both count as Attacking. If it fails, it stands in place for the enemy\'s charge. Counter-charge may not be used if the unit is Battered.","Counter-charge vs. foot":"Counter-charge","Evade":"When an enemy has successfully diced to Attack this unit, but before it moves, this unit may test to Evade at 7+. If it succeeds, it immediately carries out a Skirmish action targeting the Attacking unit only, may not move closer to the Attacking unit, and must avoid other units by 3\\" as usual; casualties inflicted in the Skirmish action cause a Courage test only at the end of the Attack. The charging unit then moves its full charge distance following the Evading unit; if it makes contact it Attacks with the Evading unit reducing its Armour to 1, and if it cannot contact it must move as close as possible. If the Evade test fails, the unit stands in place and awaits attack without shooting or moving, and its Armour drops to 1 during the Attack. Evade cannot be used if the unit is Battered.","Fleet Footed":"This unit does not halve its movement in rough terrain.","Hard to target":"Scouts count as Armour 2 versus Shooting and may only be targeted within 12\\".","Ranger":"This unit uses its normal Attack/Defence/Armour profile when fighting in rough terrain.","Skirmish":"As an ordered activation, successful on a 7+, the unit may choose to make a half move and Shoot either before or after this movement takes place. All models in the unit Shoot with \u20131 to their dice scores.","Wall of Spears":"There needs to be 6 or more Strength Points in unit to form a Wall of Spears. On a Move order, form the unit into base-to-base contact; a Wall of Spears cannot form in rough terrain or in cover, and it cannot move in this formation. Wall of Spears increases their Armour by 1 point against Attacks but not Shooting (to 4 for Heavy Foot). If the unit becomes Battered or must retreat while in a Wall of Spears, the formation is broken.","Wild Charge":"If the unit is within Attack range of an enemy unit, you must test to activate an Attack; this is the only order the unit can be given. Wild Charge may not be used if the unit is Battered."}')},269:function(e,t,a){e.exports=a(463)},463:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(16),s=a.n(r),l=a(29),i=a(24),c=a(14),u=a(206),m=a(207),d=a(233),h=a(208),f=a(234),p=a(232),v=a.n(p),g=a(528),E=a(540),y=a(40),b=a(536),S=a(19),k=a(529),O=a(532),C=a(209),R=a.n(C),w=a(530),j=a(531),V=a(109),x=a.n(V),W=a(547),U=a(515),D=a(465),L=a(514),F=a(509);function A(e){var t=e.onClose,a=e.selectedValue,n=e.open,r=e.options,s=e.title;return o.a.createElement(F.a,{onClose:function(){return t(a)},open:n},o.a.createElement(L.a,null,s),o.a.createElement(U.a,null,r.map((function(e){return o.a.createElement(D.a,{button:!0,onClick:function(){return function(e){return t(e)}(e)},key:e},e)}))))}function I(e){var t=e.name,a=e.options,n=e.points,r=e.onClose,s=o.a.useState(!1),l=Object(S.a)(s,2),i=l[0],c=l[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{variant:"h5",onClick:function(){return c(!0)}},o.a.createElement(W.a,{label:n,color:"primary"}),"\xa0\xa0",t,o.a.createElement(x.a,null)),o.a.createElement(A,{selectedValue:t,open:i,onClose:function(e){c(!1),e!==t&&r(e)},options:a,title:"Choose unit type"}))}var P=a(517),M=a(516),B=a(518),T=a(519),H=a(543);function N(e){var t=e.unit,a=e.optionsData,n=e.onChange;if(!a||!Object.keys(a).length)return o.a.createElement("div",null);var r=function(e){return function(a){var o=Object(c.a)({},t);a.target.checked?o.options=[].concat(Object(l.a)(o.options),[e]):o.options=o.options.filter((function(t){return t!==e})),n(o)}};return o.a.createElement(M.a,{component:"fieldset",style:{marginTop:10}},o.a.createElement(P.a,{component:"legend"},"Options"),o.a.createElement(B.a,null,Object.keys(a).map((function(e){return o.a.createElement(T.a,{control:o.a.createElement(H.a,{onChange:r(e),checked:t.options.includes(e)}),label:o.a.createElement(y.a,null,e," ",o.a.createElement(y.a,{color:"secondary",component:"span"},"@",a[e].points)),key:e})}))))}var z=a(520),K=a(541),J=a(522);var G=function(e){var t=e.unitData,a=e.onChange,n=e.fantasticalRulesData,r=e.unit,s=o.a.useState(!1),i=Object(S.a)(s,2),u=i[0],m=i[1],d=t.fantasticalRules;if(!d||!d.length)return o.a.createElement("div",null);if("any"===d[0]&&(d=Object.keys(n)),"exclude"===d[0]){var h=d.slice(1);d=Object.keys(n);var f=!0,p=!1,v=void 0;try{for(var g,b=function(){var e=g.value;d=d.filter((function(t){return t!==e}))},k=h[Symbol.iterator]();!(f=(g=k.next()).done);f=!0)b()}catch(C){p=!0,v=C}finally{try{f||null==k.return||k.return()}finally{if(p)throw v}}}var O=function(){return m(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(P.a,{onClick:O,component:"legend"},"Fantastical Rules ",o.a.createElement(x.a,null)),r.fantasticalRules&&r.fantasticalRules.length>0&&r.fantasticalRules.map((function(e){return o.a.createElement("div",{key:e},o.a.createElement(T.a,{control:o.a.createElement(H.a,{checked:!0,onClick:function(){return a(Object(c.a)({},r,{fantasticalRules:Object(l.a)(r.fantasticalRules.filter((function(t){return t!==e})))}))}}),label:o.a.createElement(y.a,null,e," ",o.a.createElement(y.a,{color:"secondary",component:"span"},"@",n[e].points,"}")),key:e}))})),o.a.createElement(M.a,{style:{marginTop:10,width:0,height:0}},o.a.createElement(K.a,{open:u,onClose:function(){return m(!1)},onOpen:O,IconComponent:function(){return o.a.createElement(E.a,null)},multiple:!0,value:r.fantasticalRules,onChange:function(e){return a(Object(c.a)({},r,{fantasticalRules:Object(l.a)(e.target.value)}))},input:o.a.createElement(z.a,null),renderValue:function(){return" "}},d.map((function(e){return o.a.createElement(J.a,{key:e,value:e},r.fantasticalRules.indexOf(e)<0&&o.a.createElement(y.a,null,e," ",o.a.createElement(y.a,{color:"secondary",component:"span"},"@",n[e].points)),r.fantasticalRules.indexOf(e)>-1&&o.a.createElement(y.a,{color:"primary"},e," ",o.a.createElement(y.a,{color:"secondary",component:"span"},"@",n[e].points)))})))))},Y=a(524),$=a(525),q=a(527),Q=a(523),X=a(526),Z=a(544);function _(e){var t=e.stats,a=t.shoot?"".concat(t.shoot,"+"):"-",n=t.shoot?"".concat(t.shootValue,"+/").concat(t.shootRange,'"'):"-";return o.a.createElement(Q.a,null,o.a.createElement(Y.a,{size:"small"},o.a.createElement(Z.a,{xsDown:!0},o.a.createElement($.a,null,o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Attack"),o.a.createElement(q.a,null,t.attack,"+"),o.a.createElement(q.a,null,"Attack Value"),o.a.createElement(q.a,null,t.attackValue,"+")),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Move"),o.a.createElement(q.a,null,t.move,"+"),o.a.createElement(q.a,null,"Defence Value"),o.a.createElement(q.a,null,t.defenceValue,"+")),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Shoot"),o.a.createElement(q.a,null,a),o.a.createElement(q.a,null,"Shoot Value"),o.a.createElement(q.a,null,n)),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Courage"),o.a.createElement(q.a,null,t.courage,"+"),o.a.createElement(q.a,null,"Movement"),o.a.createElement(q.a,null,t.movement,'"')),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Armour"),o.a.createElement(q.a,null,t.armour),o.a.createElement(q.a,null,"Strength Points"),o.a.createElement(q.a,null,t.strengthPoints)))),o.a.createElement(Z.a,{smUp:!0},o.a.createElement($.a,null,o.a.createElement(X.a,null,o.a.createElement(q.a,null,"A"),o.a.createElement(q.a,null,t.attack,"+"),o.a.createElement(q.a,null,"AV"),o.a.createElement(q.a,null,t.attackValue,"+")),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"M"),o.a.createElement(q.a,null,t.move,"+"),o.a.createElement(q.a,null,"DV"),o.a.createElement(q.a,null,t.defenceValue,"+")),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"S"),o.a.createElement(q.a,null,a),o.a.createElement(q.a,null,"SV"),o.a.createElement(q.a,null,n)),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"C"),o.a.createElement(q.a,null,t.courage,"+"),o.a.createElement(q.a,null,"MR"),o.a.createElement(q.a,null,t.movement,'"')),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Ar"),o.a.createElement(q.a,null,t.armour),o.a.createElement(q.a,null,"SP"),o.a.createElement(q.a,null,t.strengthPoints))))))}function ee(e){var t=e.rules;return t&&t.length?o.a.createElement(g.a,null,o.a.createElement(y.a,{variant:"h6",style:{marginTop:10}},"Special Rules"),o.a.createElement(U.a,null,t.map((function(e){return o.a.createElement(D.a,{key:e},e)})))):o.a.createElement(o.a.Fragment,null)}var te=function(e){var t=e.id,a=e.unit,n=e.updateUnit,r=e.updateArmyCost,s=e.data,u=e.setUnit,m=e.removeUnit,d=e.ui,h=function(e){var a=s.unitData[e.name],o=e.points;e=Object(c.a)({},a,{options:Object(l.a)(e.options),fantasticalRules:Object(l.a)(e.fantasticalRules)});var u=a.points,m=!0,d=!1,h=void 0;try{for(var f,p=e.options[Symbol.iterator]();!(m=(f=p.next()).done);m=!0){var v=f.value;if(u+=(v=a.options[v]).points,v.setStats)for(var g=0,E=Object.entries(v.setStats);g<E.length;g++){var y=Object(S.a)(E[g],2),b=y[0],k=y[1];e=Object(c.a)({},e,{stats:Object(c.a)({},e.stats,Object(i.a)({},b,k))})}if(v.add){var O=!0,C=!1,R=void 0;try{for(var w,j=v.add[Symbol.iterator]();!(O=(w=j.next()).done);O=!0){var V=w.value;e.rules=[].concat(Object(l.a)(e.rules),[V])}}catch(H){C=!0,R=H}finally{try{O||null==j.return||j.return()}finally{if(C)throw R}}}if(v.remove){var x=!0,W=!1,U=void 0;try{for(var D,L=function(){var t=D.value;e.rules=e.rules.filter((function(e){return e!==t}))},F=v.remove[Symbol.iterator]();!(x=(D=F.next()).done);x=!0)L()}catch(H){W=!0,U=H}finally{try{x||null==F.return||F.return()}finally{if(W)throw U}}}}}catch(H){d=!0,h=H}finally{try{m||null==p.return||p.return()}finally{if(d)throw h}}var A=!0,I=!1,P=void 0;try{for(var M,B=e.fantasticalRules[Symbol.iterator]();!(A=(M=B.next()).done);A=!0){var T=M.value;u+=(T=s.fantasticalRulesData[T]).points,e.rules=[].concat(Object(l.a)(e.rules),[T.name])}}catch(H){I=!0,P=H}finally{try{A||null==B.return||B.return()}finally{if(I)throw P}}e=Object(c.a)({},e,{points:u}),r(u-o),n(t,Object(c.a)({},e))};return o.a.createElement(k.a,{variant:"outlined",style:{marginBottom:25,minWidth:400}},o.a.createElement(w.a,{title:o.a.createElement(I,{name:a.name,onClose:function(e){!function(e){var o=a.points;n(t,{points:e}),r(e-o)}(s.unitData[e].points),u(t,e)},options:s.unitNames,points:a.points}),action:o.a.createElement(j.a,{onClick:function(){return m(t)}},o.a.createElement(R.a,null))}),o.a.createElement(O.a,null,!d.editMode&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_,{stats:a.stats}),o.a.createElement(ee,{rules:a.rules})),!d.viewMode&&o.a.createElement(o.a.Fragment,null,o.a.createElement(N,{onChange:h,optionsData:s.unitData[a.name].options,unit:a}),o.a.createElement(E.a,null,o.a.createElement(G,{onChange:h,unitData:s.unitData[a.name],fantasticalRulesData:s.fantasticalRulesData,unit:a})))))},ae=a(143),ne=a(210),oe=a(211),re=a(533),se=a(534),le=a(535),ie=a(217),ce=a.n(ie),ue=a(218),me=a.n(ue),de=a(219),he=a.n(de),fe=a(548),pe=a(466),ve=a(213),ge=a.n(ve);function Ee(e){var t=e.onClick,a=e.getSavedLists,n=e.showText,r=void 0!==n&&n,s=o.a.useState(!1),l=Object(S.a)(s,2),i=l[0],c=l[1],u=function(){return c(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe.a,{title:"Load"},o.a.createElement(pe.a,{color:"inherit",onClick:u},o.a.createElement(ge.a,null))),r&&o.a.createElement(y.a,{onClick:u},"Load"),o.a.createElement(A,{open:i,onClose:function(e){c(!1),e&&t(e)},options:a(),title:"Choose List to load"}))}var ye=a(214),be=a.n(ye);function Se(e){var t=e.onClick,a=e.showError,n=e.showSuccess,r=e.showText,s=void 0!==r&&r,l=function(){t()?n("Saved!"):a("You have to give the list a name!")};return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe.a,{title:"Save"},o.a.createElement(pe.a,{color:"inherit",onClick:l},o.a.createElement(be.a,null))),s&&o.a.createElement(y.a,{onClick:l},"Save"))}var ke=a(549),Oe=a(216),Ce=a.n(Oe),Re=a(215),we=a.n(Re);function je(e){var t=e.onClick,a=e.getSavedLists,n=e.showSuccess,r=e.showText,s=void 0!==r&&r,l=o.a.useState(!1),i=Object(S.a)(l,2),c=i[0],u=i[1],m=function(){return u(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(fe.a,{title:"Delete List"},o.a.createElement(pe.a,{color:"inherit",onClick:m},o.a.createElement(we.a,null))),s&&o.a.createElement(y.a,{onClick:m},"Delete"),o.a.createElement(A,{open:c,onClose:function(e){u(!1),t(e),e&&n("Deleted!")},options:function(){var e=a();return e.push("Delete all"),e}(),title:"Choose List to delete"}))}function Ve(e){var t=e.loadList,a=e.saveList,n=e.removeList,r=e.getSavedLists,s=e.showError,l=e.showSuccess,i=o.a.useState(!1),c=Object(S.a)(i,2),u=c[0],m=c[1],d=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&m(e)}},h=function(e){return function(){e.apply(void 0,arguments),m(!1)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ce.a,{onClick:d(!0)}),o.a.createElement(ke.a,{open:u,onClose:d(!1)},o.a.createElement(o.a.Fragment,null,o.a.createElement(U.a,null,o.a.createElement(D.a,{button:!0,key:"Save"},o.a.createElement(Se,{onClick:h(a),showError:s,showSuccess:l,showText:!0})),o.a.createElement(D.a,{button:!0,key:"Load"},o.a.createElement(Ee,{onClick:h(t),getSavedLists:r,showText:!0})),o.a.createElement(D.a,{button:!0,key:"Delete"},o.a.createElement(je,{onClick:h(n),getSavedLists:r,showSuccess:l,showText:!0}))))))}var xe=a(545),We=a(542);function Ue(e){return o.a.createElement(We.a,Object.assign({elevation:6,variant:"filled"},e))}function De(e){var t=e.open,a=e.setOpen,n=e.message,r=function(e,t){"clickaway"!==t&&a(!1)};return o.a.createElement(xe.a,{open:t,autoHideDuration:6e3,onClose:r},o.a.createElement(Ue,{onClose:r,severity:"error"},n))}function Le(e){var t=e.open,a=e.setOpen,n=e.message,r=function(e,t){"clickaway"!==t&&a(!1)};return o.a.createElement(xe.a,{open:t,autoHideDuration:6e3,onClose:r},o.a.createElement(Ue,{onClose:r,severity:"success"},n))}var Fe=Object(re.a)((function(e){return{root:{marginBottom:25},flexing:{display:"flex",flexGrow:1,alignItems:"center"},flexingend:{display:"flex",flexGrow:1,justifyContent:"flex-end",alignItems:"center"}}}));function Ae(e){var t=e.ui,a=e.setUIOption,n=e.setUIOptions,r=e.armyCost,s=e.reload,l=e.saveList,u=e.loadList,m=e.removeList,d=e.getSavedLists,h=o.a.useState(!1),f=Object(S.a)(h,2),p=f[0],v=f[1],g=o.a.useState(!1),E=Object(S.a)(g,2),k=E[0],O=E[1],C=o.a.useState(""),R=Object(S.a)(C,2),w=R[0],j=R[1],V=o.a.useState(""),x=Object(S.a)(V,2),W=x[0],U=x[1],D=Fe(),L=function(e){U(e),O(!0)},F=function(e){j(e),v(!0)},A=function(e,t){var a="viewMode"===e?"editMode":"viewMode",o=Object(i.a)({},e,t);t&&(o=Object(c.a)({},o,Object(i.a)({},a,!1))),n(o)},I=function(e){var n=e.option,r=e.Icon,s=e.title,l=e.onClick,i=void 0===l?a:l;return o.a.createElement(fe.a,{title:s},o.a.createElement(pe.a,{color:"inherit",onClick:function(){i(n,!t[n])}},o.a.createElement(r,{fontSize:"small",color:t[n]?"inherit":"disabled"})))};return o.a.createElement("div",{className:D.root},o.a.createElement(se.a,{position:"fixed"},o.a.createElement(le.a,null,o.a.createElement("div",{className:D.flexing},o.a.createElement(Ve,{loadList:u,saveList:l,removeList:m,getSavedLists:d,showError:L,showSuccess:F}),o.a.createElement(Z.a,{smDown:!0},o.a.createElement(y.a,{variant:"h5"},"\xa0\xa0Dragon Rampant Army Builder\xa0\xa0")),o.a.createElement(Z.a,{mdUp:!0},o.a.createElement(y.a,{variant:"h5"},"\xa0\xa0DRAB\xa0\xa0")),o.a.createElement(pe.a,{color:"inherit",onClick:s},o.a.createElement(ce.a,null)),o.a.createElement(Se,{onClick:l,showError:L,showSuccess:F}),o.a.createElement(Ee,{onClick:u,getSavedLists:d})),o.a.createElement("div",{className:D.flexingend},o.a.createElement(I,{option:"viewMode",Icon:me.a,title:"View mode",onClick:A}),o.a.createElement(I,{option:"editMode",Icon:he.a,title:"Edit mode",onClick:A}),o.a.createElement(Z.a,{smDown:!0},o.a.createElement(y.a,{variant:"h6"},"\xa0\xa0\xa0\xa0Total Points\xa0\xa0",o.a.createElement(b.a,{color:"secondary",size:"small"},o.a.createElement(y.a,{variant:"h6"},r)))),o.a.createElement(Z.a,{mdUp:!0},o.a.createElement(y.a,{variant:"h6"},"\xa0\xa0\xa0\xa0",o.a.createElement(b.a,{color:"secondary",size:"small"},o.a.createElement(y.a,{variant:"h6"},r))))))),o.a.createElement(le.a,null),o.a.createElement(Le,{message:w,open:p,setOpen:function(e){return v(e)}}),o.a.createElement(De,{message:W,open:k,setOpen:function(e){return O(e)}}))}var Ie=a(114),Pe=a.n(Ie),Me=a(546),Be=a(537),Te=a(538),He=a(539);function Ne(e){var t=e.units,a=e.setUIOption,n=e.rulesData,r=e.rulesSummaryExpanded;return o.a.createElement(Me.a,{expanded:r,onChange:function(){return a("rulesSummaryExpanded",!r)},style:{maxWidth:1210}},o.a.createElement(Be.a,{expandIcon:o.a.createElement(Pe.a,null)},o.a.createElement(y.a,{variant:"h5"},"Rules Summary")),o.a.createElement(Te.a,{style:{maxWidth:800}},o.a.createElement(U.a,null,function(){var e=new Set;for(var a in t){var o=!0,r=!1,s=void 0;try{for(var i,c=t[a].rules[Symbol.iterator]();!(o=(i=c.next()).done);o=!0){var u=i.value;n[n[u]]?e.add(n[u]):e.add(u)}}catch(m){r=!0,s=m}finally{try{o||null==c.return||c.return()}finally{if(r)throw s}}}return Object(l.a)(e).sort()}().map((function(e){return o.a.createElement(D.a,{key:e},o.a.createElement(He.a,{primary:e,secondary:n[e]||""}))})))))}var ze=function(e,t){var a={};for(var n in e)t(e[n],n)&&(a=Object(c.a)({},a,Object(i.a)({},n,e[n])));return a},Ke=function(e,t,a){return Object.entries(e).reduce((function(e,a){var n=Object(S.a)(a,2),o=n[0],r=n[1];return t(e,r,o)}),a)},Je=a(22);function Ge(e){var t=e.data,a=e.height,n=e.colors;return o.a.createElement(Je.i,{height:a},o.a.createElement(Je.b,{data:t,margin:{top:20,right:30,left:20,bottom:5}},o.a.createElement(Je.c,{strokeDasharray:"3 3"}),o.a.createElement(Je.k,{dataKey:"name"}),o.a.createElement(Je.l,null),o.a.createElement(Je.f,null),o.a.createElement(Je.a,{dataKey:"Units",fill:n[0],minPointSize:3},o.a.createElement(Je.e,{dataKey:"Units",position:"top"})),o.a.createElement(Je.a,{dataKey:"Points",fill:n[1],minPointSize:3},o.a.createElement(Je.e,{dataKey:"Points",position:"top"}))))}function Ye(e){var t=e.data,a=e.height,n=e.colors;return o.a.createElement(Je.i,{height:a},o.a.createElement(Je.h,null,o.a.createElement(Je.g,{data:t,dataKey:"value",label:qe,labelLine:!1,outerRadius:80},t.map((function(e,t){return o.a.createElement(Je.d,{key:e,fill:n[t]})}))),o.a.createElement(Je.j,null),o.a.createElement(Je.f,null)))}var $e=Math.PI/180,qe=function(e){var t=e.cx,a=e.cy,n=e.midAngle,r=e.innerRadius,s=e.outerRadius,l=e.percent,i=r+.5*(s-r),c=t+i*Math.cos(-n*$e),u=a+i*Math.sin(-n*$e),m=(100*l).toFixed(0);return o.a.createElement("text",{x:c,y:u,fill:"black",textAnchor:c>t?"start":"end",dominantBaseline:"central"},m>0?"".concat(m,"%"):"")};function Qe(e){var t=e.armyCost,a=e.units,n=e.unitData,r=e.fantasticalRulesData,s=e.statisticsExpanded,l=e.setUIOption,i=Ke(a,(function(e,t){return t.options.reduce((function(e,a){return e+n[t.name].options[a].points}),e)}),0),c=Ke(a,(function(e,t){return t.fantasticalRules.reduce((function(e,t){return e+r[t].points}),e)}),0),u=["#8884d8","#82ca9d","#FF8042"],m=t,d=Object.keys(a).length,h=ze(a,(function(e){return"mounted"===e.type})),f=ze(a,(function(e){return"foot"===e.type})),p=ze(a,(function(e){return e.stats.shoot>0})),v=Ke(a,(function(e,t){return e+n[t.name].points}),0),g=[{name:"Mounted",Units:Object.keys(h).length,Points:Ke(h,(function(e,t){return e+t.points}),0)},{name:"Foot",Units:Object.keys(f).length,Points:Ke(f,(function(e,t){return e+t.points}),0)},{name:"Ranged",Units:Object.keys(p).length,Points:Ke(p,(function(e,t){return e+t.points}),0)}],E=[{name:"Units",value:v},{name:"Options",value:i<0?0:i},{name:"Fantastical Rules",value:c}];return o.a.createElement(Me.a,{expanded:s,onChange:function(){return l("statisticsExpanded",!s)},style:{minWidth:400,maxWidth:1210}},o.a.createElement(Be.a,{expandIcon:o.a.createElement(Pe.a,null)},o.a.createElement(y.a,{variant:"h5"},"Statistics")),o.a.createElement(Te.a,null,o.a.createElement("div",null,o.a.createElement(W.a,{label:m+" Points",color:"primary",style:{marginRight:25,marginBottom:25}}),o.a.createElement(W.a,{label:d+" Units",color:"primary",style:{marginRight:25,marginBottom:25}}),o.a.createElement(W.a,{label:(m/(d||1)).toPrecision(2)+" Points per unit",color:"primary",style:{marginRight:25,marginBottom:25}}),v>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{variant:"h6",style:{marginTop:25}},"Unit Distribution"),o.a.createElement(Ge,{data:g,height:300,colors:u}),o.a.createElement(y.a,{variant:"h6",style:{marginTop:25}},"Point Distribution"),o.a.createElement(Ye,{data:E,height:300,colors:u})))))}var Xe=a(36),Ze=a.n(Xe),_e={viewMode:!1,editMode:!1,rulesSummaryExpanded:!0,statisticsExpanded:!0},et=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(h.a)(t).call(this,e))).componentDidMount=function(){var e=Object(c.a)({},_e,{},Ze.a.get("uiOptions"));a.setState({ui:e}),a.addUnit()},a.reload=function(){a.setState({name:"New List",forceInputUpdate:a.state.forceUpdateKey?0:1,armyCost:0,nextID:1,units:{0:Object(c.a)({},a.state.data.unitData.Unit,{options:[],fantasticalRules:[]})},unitOrder:[0]})},a.addUnit=function(){var e=a.state.nextID;a.setState({nextID:e+1,units:Object(c.a)({},a.state.units,Object(i.a)({},e,Object(c.a)({},a.state.data.unitData.Unit,{options:[],fantasticalRules:[]}))),unitOrder:[].concat(Object(l.a)(a.state.unitOrder),[e])})},a.setUnit=function(e,t){a.setState({units:Object(c.a)({},a.state.units,Object(i.a)({},e,Object(c.a)({},a.state.data.unitData[t],{options:[],fantasticalRules:[]})))})},a.removeUnit=function(e){var t=Object(c.a)({},a.state.units),n=t[e].points;delete t[e],a.updateArmyCost(-n),a.setState({units:Object(c.a)({},t),unitOrder:a.state.unitOrder.filter((function(t){return t!==e}))})},a.updateUnit=function(e,t){a.setState({units:Object(c.a)({},a.state.units,Object(i.a)({},e,Object(c.a)({},a.state.units[e],{},t)))})},a.updateArmyCost=function(e){a.setState({armyCost:a.state.armyCost+e})},a.setUIOption=function(e,t){a.setState({ui:Object(c.a)({},a.state.ui,Object(i.a)({},e,t))}),Ze.a.set("uiOptions",Object(c.a)({},a.state.ui,Object(i.a)({},e,t)))},a.setUIOptions=function(e){a.setState({ui:Object(c.a)({},a.state.ui,{},e)}),Ze.a.set("uiOptions",Object(c.a)({},a.state.ui,{},e))},a.saveList=function(){if("New List"===a.state.name)return!1;var e=Ze.a.get("savedRosters")||[];return e=Object(c.a)({},e,Object(i.a)({},a.state.name,a.state)),Ze.a.set("savedRosters",e),!0},a.loadList=function(e){var t=Ze.a.get("savedRosters")[e];t=Object(c.a)({},t,{ui:a.state.ui,data:a.state.data,forceInputUpdate:a.state.forceUpdateKey?0:1}),a.setState(t)},a.getSavedLists=function(){var e=[];for(var t in Ze.a.get("savedRosters"))e.push(t);return e},a.removeList=function(e){if("Delete all"===e)Ze.a.set("savedRosters",[]);else{var t=Ze.a.get("savedRosters");t=Object.keys(t).filter((function(t){return t!==e})),Ze.a.set("savedRosters",t)}},a.state={name:"New List",armyCost:0,nextID:0,units:{},unitOrder:[],data:{unitData:ae,unitNames:Object.keys(ae).slice(1),fantasticalRulesData:ne,rulesData:oe},ui:Object(c.a)({},_e),forceInputUpdate:0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(g.a,null,o.a.createElement(Ae,{setUIOption:this.setUIOption,setUIOptions:this.setUIOptions,ui:this.state.ui,armyCost:this.state.armyCost,reload:this.reload,saveList:this.saveList,loadList:this.loadList,removeList:this.removeList,getSavedLists:this.getSavedLists}),o.a.createElement(E.a,null,o.a.createElement(M.a,null,o.a.createElement(y.a,{style:{border:0,marginBottom:25},variant:"h4",key:this.state.forceInputUpdate,component:"Input",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),!Object.keys(this.state.units).length&&o.a.createElement(y.a,{variant:"h6",style:{marginBottom:25}},"Click the button to add your first unit!"),o.a.createElement(E.a,{display:"flex",flexDirection:"row",flexWrap:"wrap"},this.state.unitOrder.map((function(t){return o.a.createElement(te,{id:t,key:t,unit:e.state.units[t],updateUnit:e.updateUnit,updateArmyCost:e.updateArmyCost,removeUnit:e.removeUnit,setUnit:e.setUnit,data:e.state.data,ui:e.state.ui})}))),!this.state.ui.viewMode&&o.a.createElement(b.a,{color:"secondary",style:{marginLeft:25,marginBottom:25},onClick:this.addUnit},o.a.createElement(v.a,null)),o.a.createElement(Ne,{units:this.state.units,rulesData:this.state.data.rulesData,rulesSummaryExpanded:this.state.ui.rulesSummaryExpanded,setUIOption:this.setUIOption}),o.a.createElement(Qe,{armyCost:this.state.armyCost,units:this.state.units,unitData:this.state.data.unitData,fantasticalRulesData:this.state.data.fantasticalRulesData,statisticsExpanded:this.state.ui.statisticsExpanded,setUIOption:this.setUIOption})))}}]),t}(o.a.Component),tt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function at(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}s.a.render(o.a.createElement(et,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dragon-rampant-builder",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/dragon-rampant-builder","/service-worker.js");tt?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):at(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):at(t,e)}))}}()}},[[269,1,2]]]);
//# sourceMappingURL=main.130e01c1.chunk.js.map