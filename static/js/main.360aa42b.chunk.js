(this["webpackJsonpdragon-rampant-builder"]=this["webpackJsonpdragon-rampant-builder"]||[]).push([[0],{138:function(e){e.exports=JSON.parse('{"Unit":{"name":"Unit","points":0,"stats":{"attack":0,"move":0,"shoot":0,"courage":0,"armour":0,"attackValue":0,"defenceValue":0,"shootValue":0,"shootRange":"-","movement":0,"strengthPoints":0},"rules":{},"options":{},"fantasticalRules":[]},"Elite Riders":{"name":"Elite Riders","type":"mounted","points":6,"stats":{"attack":5,"move":7,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":5,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Wild Charge","Counter-charge"],"options":{"Mounted missiles":{"points":2,"remove":["Wild Charge","Counter-charge"],"setStats":{"shoot":6,"shootValue":5,"shootRange":12}},"Level Headed":{"points":2,"remove":["Wild Charge"],"setStats":{"move":5}}},"fantasticalRules":["any"]},"Heavy Riders":{"name":"Heavy Riders","type":"mounted","points":4,"stats":{"attack":5,"move":5,"shoot":0,"courage":4,"armour":3,"attackValue":4,"defenceValue":5,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Counter-charge"],"options":{"Mounted missiles":{"points":1,"setStats":{"shoot":6,"shootValue":5,"shootRange":12}},"Chariots":{"points":2,"add":["May not enter rough terrain"],"setStats":{"armour":4}}},"fantasticalRules":["any"]},"Light Riders":{"name":"Light Riders","type":"mounted","points":4,"stats":{"attack":7,"move":5,"shoot":6,"courage":5,"armour":3,"attackValue":5,"defenceValue":6,"shootValue":5,"shootRange":12,"movement":12,"strengthPoints":6},"rules":["Skirmish","Evade"],"options":{"Short range missiles":{"points":-1,"setStats":{"shootRange":6}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Greater Warbeasts":{"name":"Greater Warbeasts","type":"mounted","points":6,"stats":{"attack":5,"move":6,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Ranger","Wild Charge"],"options":{"Flame or Spore Attack":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wild Charge"]},"Ponderous":{"points":1,"remove":["Wild Charge"]},"Cunning":{"points":2,"setStats":{"defenceValue":5}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Lesser Warbeasts":{"name":"Lesser Warbeasts","type":"mounted","points":4,"stats":{"attack":5,"move":6,"shoot":0,"courage":4,"armour":3,"attackValue":4,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":12,"strengthPoints":6},"rules":["Ranger","Wild Charge","Fleet Footed"],"options":{"Flame or Spore Attack":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wild Charge"]},"Cunning":{"points":2,"setStats":{"defenceValue":5}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Elite Foot":{"name":"Elite Foot","type":"foot","points":6,"stats":{"attack":5,"move":5,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":6},"rules":["Ranger"],"options":{"Missiles":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":18}}},"fantasticalRules":["any"]},"Heavy Foot":{"name":"Heavy Foot","type":"foot","points":4,"stats":{"attack":6,"move":5,"shoot":0,"courage":4,"armour":3,"attackValue":5,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":12},"rules":["Wall of Spears"],"options":{"Offensive":{"points":2,"setStats":{"attackValue":4},"remove":["Wall of Spears"]}},"fantasticalRules":["any"]},"Light Foot":{"name":"Light Foot","type":"foot","points":3,"stats":{"attack":6,"move":5,"shoot":0,"courage":4,"armour":2,"attackValue":5,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":8,"strengthPoints":12},"rules":["Wall of Spears"],"options":{"Offensive":{"points":2,"setStats":{"attackValue":4},"remove":["Wall of Spears"]},"Short range missiles":{"points":1,"setStats":{"shoot":6,"shootValue":5,"shootRange":6}},"Mixed Weapons":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wall of Spears"]}},"fantasticalRules":["any"]},"Bellicose Foot":{"name":"Bellicose Foot","type":"foot","points":4,"stats":{"attack":5,"move":6,"shoot":0,"courage":4,"armour":2,"attackValue":3,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":8,"strengthPoints":12},"rules":["Ranger","Wild Charge","Counter-charge vs. foot","Fleet Footed"],"options":{"Terrifically Shiny Armour":{"points":2,"setStats":{"armour":3}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Heavy Missiles":{"name":"Heavy Missiles","type":"foot","points":4,"stats":{"attack":7,"move":6,"shoot":7,"courage":4,"armour":2,"attackValue":6,"defenceValue":5,"shootValue":4,"shootRange":18,"movement":6,"strengthPoints":12},"rules":[],"options":{"Weighty Projectiles":{"points":-1,"setStats":{"shootRange":12}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Cleric","Slayer"]},"Light Missiles":{"name":"Light Missiles","type":"foot","points":4,"stats":{"attack":7,"move":6,"shoot":6,"courage":4,"armour":2,"attackValue":6,"defenceValue":5,"shootValue":5,"shootRange":18,"movement":6,"strengthPoints":12},"rules":[],"options":{"Sharpshooter":{"points":2,"setStats":{"shootValue":4}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Cleric","Slayer"]},"Scouts":{"name":"Scouts","type":"foot","points":2,"stats":{"attack":7,"move":5,"shoot":7,"courage":5,"armour":1,"attackValue":6,"defenceValue":6,"shootValue":5,"shootRange":12,"movement":8,"strengthPoints":6},"rules":["Hard to target","Skirmish","Evade","Fleet Footed"],"options":{},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Exploder","Cleric","Slayer"]},"Ravenous Hordes":{"name":"Ravenous Hordes","type":"foot","points":1,"stats":{"attack":7,"move":6,"shoot":0,"courage":5,"armour":1,"attackValue":6,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":12},"rules":[],"options":{},"fantasticalRules":["No Feelings","Venomous","Hatred","Fear"]}}')},207:function(e){e.exports=JSON.parse('{"Cleric":{"name":"Cleric","points":4},"Slayer":{"name":"Slayer","points":4},"Exploder":{"name":"Exploder","points":2},"Fear":{"name":"Fear","points":2},"Fearful":{"name":"Fearful","points":-2},"Flying":{"name":"Flying","points":2},"Burrowing":{"name":"Burrowing","points":2},"Hatred":{"name":"Hatred","points":1},"Invisibility":{"name":"Invisibility","points":3},"Enchanted Weapons":{"name":"Enchanted Weapons","points":1},"Blessed Weapons":{"name":"Blessed Weapons","points":2},"Mystical Armour":{"name":"Mystical Armour","points":2},"Spellcaster":{"name":"Spellcaster","points":4},"Wizardlings":{"name":"Wizardlings","points":2},"Summoner":{"name":"Summoner","points":3},"No Feelings":{"name":"No Feelings","points":0},"Unstoppable March of the Dead":{"name":"Unstoppable March of the Dead","points":0},"Venomous":{"name":"Venomous","points":2}}')},266:function(e,t,a){e.exports=a(460)},460:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(15),l=a.n(r),s=a(30),i=a(24),c=a(14),u=a(200),m=a(201),d=a(229),p=a(202),f=a(230),h=a(228),v=a.n(h),E=a(524),g=a(533),y=a(80),S=a(532),b=a(19),k=a(525),O=a(528),C=a(206),R=a.n(C),j=a(526),V=a(527),w=a(105),x=a.n(w),L=a(539),D=a(510),U=a(462),W=a(509),F=a(504);function P(e){var t=e.onClose,a=e.selectedValue,n=e.open,r=e.options,l=e.title;return o.a.createElement(F.a,{onClose:function(){return t(a)},open:n},o.a.createElement(W.a,null,l),o.a.createElement(D.a,null,r.map((function(e){return o.a.createElement(U.a,{button:!0,onClick:function(){return function(e){return t(e)}(e)},key:e},e)}))))}function M(e){var t=e.name,a=e.options,n=e.points,r=e.onClose,l=o.a.useState(!1),s=Object(b.a)(l,2),i=s[0],c=s[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{variant:"h5",onClick:function(){return c(!0)}},o.a.createElement(L.a,{label:n,color:"primary"}),"\xa0\xa0",t,o.a.createElement(x.a,null)),o.a.createElement(P,{selectedValue:t,open:i,onClose:function(e){c(!1),e!==t&&r(e)},options:a,title:"Choose unit type"}))}var I=a(512),A=a(511),B=a(513),T=a(514),z=a(536);function H(e){var t=e.unit,a=e.optionsData,n=e.onChange;if(!a||!Object.keys(a).length)return o.a.createElement("div",null);var r=function(e){return function(a){var o=Object(c.a)({},t);a.target.checked?o.options=[].concat(Object(s.a)(o.options),[e]):o.options=o.options.filter((function(t){return t!==e})),n(o)}};return o.a.createElement(A.a,{component:"fieldset",style:{marginTop:10}},o.a.createElement(I.a,{component:"legend"},"Options"),o.a.createElement(B.a,null,Object.keys(a).map((function(e){return o.a.createElement(T.a,{control:o.a.createElement(z.a,{onChange:r(e),checked:t.options.includes(e)}),label:o.a.createElement(y.a,null,e," ",o.a.createElement(y.a,{color:"secondary",component:"span"},"@",a[e].points)),key:e})}))))}var N=a(516),K=a(534),G=a(518);var J=function(e){var t=e.unitData,a=e.onChange,n=e.fantasticalRulesData,r=e.unit,l=o.a.useState(!1),i=Object(b.a)(l,2),u=i[0],m=i[1],d=t.fantasticalRules;if(!d||!d.length)return o.a.createElement("div",null);if("any"===d[0]&&(d=Object.keys(n)),"exclude"===d[0]){var p=d.slice(1);d=Object.keys(n);var f=!0,h=!1,v=void 0;try{for(var E,S=function(){var e=E.value;d=d.filter((function(t){return t!==e}))},k=p[Symbol.iterator]();!(f=(E=k.next()).done);f=!0)S()}catch(C){h=!0,v=C}finally{try{f||null==k.return||k.return()}finally{if(h)throw v}}}var O=function(){return m(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(I.a,{onClick:O,component:"legend"},"Fantastical Rules ",o.a.createElement(x.a,null)),r.fantasticalRules&&r.fantasticalRules.length>0&&r.fantasticalRules.map((function(e){return o.a.createElement("div",{key:e},o.a.createElement(T.a,{control:o.a.createElement(z.a,{checked:!0,onClick:function(){return a(Object(c.a)({},r,{fantasticalRules:Object(s.a)(r.fantasticalRules.filter((function(t){return t!==e})))}))}}),label:o.a.createElement(y.a,null,e," ",o.a.createElement(y.a,{color:"secondary",component:"span"},"@",n[e].points,"}")),key:e}))})),o.a.createElement(A.a,{style:{marginTop:10,width:0,height:0}},o.a.createElement(K.a,{open:u,onClose:function(){return m(!1)},onOpen:O,IconComponent:function(){return o.a.createElement(g.a,null)},multiple:!0,value:r.fantasticalRules,onChange:function(e){return a(Object(c.a)({},r,{fantasticalRules:Object(s.a)(e.target.value)}))},input:o.a.createElement(N.a,null),renderValue:function(){return" "}},d.map((function(e){return o.a.createElement(G.a,{key:e,value:e},r.fantasticalRules.indexOf(e)<0&&o.a.createElement(y.a,null,e," ",o.a.createElement(y.a,{color:"secondary",component:"span"},"@",n[e].points)),r.fantasticalRules.indexOf(e)>-1&&o.a.createElement(y.a,{color:"primary"},e," ",o.a.createElement(y.a,{color:"secondary",component:"span"},"@",n[e].points)))})))))},Y=a(520),$=a(521),q=a(523),Q=a(519),X=a(522),Z=a(537);function _(e){var t=e.stats,a=t.shoot?"".concat(t.shoot,"+"):"-",n=t.shoot?"".concat(t.shootValue,"+/").concat(t.shootRange,'"'):"-";return o.a.createElement(Q.a,null,o.a.createElement(Y.a,{size:"small"},o.a.createElement(Z.a,{xsDown:!0},o.a.createElement($.a,null,o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Attack"),o.a.createElement(q.a,null,t.attack,"+"),o.a.createElement(q.a,null,"Attack Value"),o.a.createElement(q.a,null,t.attackValue,"+")),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Move"),o.a.createElement(q.a,null,t.move,"+"),o.a.createElement(q.a,null,"Defence Value"),o.a.createElement(q.a,null,t.defenceValue,"+")),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Shoot"),o.a.createElement(q.a,null,a),o.a.createElement(q.a,null,"Shoot Value"),o.a.createElement(q.a,null,n)),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Courage"),o.a.createElement(q.a,null,t.courage,"+"),o.a.createElement(q.a,null,"Movement"),o.a.createElement(q.a,null,t.movement,'"')),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Armour"),o.a.createElement(q.a,null,t.armour),o.a.createElement(q.a,null,"Strength Points"),o.a.createElement(q.a,null,t.strengthPoints)))),o.a.createElement(Z.a,{smUp:!0},o.a.createElement($.a,null,o.a.createElement(X.a,null,o.a.createElement(q.a,null,"A"),o.a.createElement(q.a,null,t.attack,"+"),o.a.createElement(q.a,null,"AV"),o.a.createElement(q.a,null,t.attackValue,"+")),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"M"),o.a.createElement(q.a,null,t.move,"+"),o.a.createElement(q.a,null,"DV"),o.a.createElement(q.a,null,t.defenceValue,"+")),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"S"),o.a.createElement(q.a,null,a),o.a.createElement(q.a,null,"SV"),o.a.createElement(q.a,null,n)),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"C"),o.a.createElement(q.a,null,t.courage,"+"),o.a.createElement(q.a,null,"MR"),o.a.createElement(q.a,null,t.movement,'"')),o.a.createElement(X.a,null,o.a.createElement(q.a,null,"Ar"),o.a.createElement(q.a,null,t.armour),o.a.createElement(q.a,null,"SP"),o.a.createElement(q.a,null,t.strengthPoints))))))}function ee(e){var t=e.rules;return t&&t.length?o.a.createElement(E.a,null,o.a.createElement(y.a,{variant:"h6",style:{marginTop:10}},"Special Rules"),o.a.createElement(D.a,null,t.map((function(e){return o.a.createElement(U.a,{key:e},e)})))):o.a.createElement(o.a.Fragment,null)}var te=function(e){var t=e.id,a=e.unit,n=e.updateUnit,r=e.updateArmyCost,l=e.data,u=e.setUnit,m=e.removeUnit,d=e.ui,p=function(e){var a=l.unitData[e.name],o=e.points;e=Object(c.a)({},a,{options:Object(s.a)(e.options),fantasticalRules:Object(s.a)(e.fantasticalRules)});var u=a.points,m=!0,d=!1,p=void 0;try{for(var f,h=e.options[Symbol.iterator]();!(m=(f=h.next()).done);m=!0){var v=f.value;if(u+=(v=a.options[v]).points,v.setStats)for(var E=0,g=Object.entries(v.setStats);E<g.length;E++){var y=Object(b.a)(g[E],2),S=y[0],k=y[1];e=Object(c.a)({},e,{stats:Object(c.a)({},e.stats,Object(i.a)({},S,k))})}if(v.add){var O=!0,C=!1,R=void 0;try{for(var j,V=v.add[Symbol.iterator]();!(O=(j=V.next()).done);O=!0){var w=j.value;e.rules=[].concat(Object(s.a)(e.rules),[w])}}catch(z){C=!0,R=z}finally{try{O||null==V.return||V.return()}finally{if(C)throw R}}}if(v.remove){var x=!0,L=!1,D=void 0;try{for(var U,W=function(){var t=U.value;e.rules=e.rules.filter((function(e){return e!==t}))},F=v.remove[Symbol.iterator]();!(x=(U=F.next()).done);x=!0)W()}catch(z){L=!0,D=z}finally{try{x||null==F.return||F.return()}finally{if(L)throw D}}}}}catch(z){d=!0,p=z}finally{try{m||null==h.return||h.return()}finally{if(d)throw p}}var P=!0,M=!1,I=void 0;try{for(var A,B=e.fantasticalRules[Symbol.iterator]();!(P=(A=B.next()).done);P=!0){var T=A.value;u+=(T=l.fantasticalRulesData[T]).points,e.rules=[].concat(Object(s.a)(e.rules),[T.name])}}catch(z){M=!0,I=z}finally{try{P||null==B.return||B.return()}finally{if(M)throw I}}e=Object(c.a)({},e,{points:u}),r(u-o),n(t,Object(c.a)({},e))};return o.a.createElement(k.a,{variant:"outlined",style:{marginBottom:25,minWidth:400}},o.a.createElement(j.a,{title:o.a.createElement(M,{name:a.name,onClose:function(e){!function(e){var o=a.points;n(t,{points:e}),r(e-o)}(l.unitData[e].points),u(t,e)},options:l.unitNames,points:a.points}),action:o.a.createElement(V.a,{onClick:function(){return m(t)}},o.a.createElement(R.a,null))}),o.a.createElement(O.a,null,!d.editMode&&o.a.createElement(o.a.Fragment,null,o.a.createElement(_,{stats:a.stats}),o.a.createElement(ee,{rules:a.rules})),!d.viewMode&&o.a.createElement(o.a.Fragment,null,o.a.createElement(H,{onChange:p,optionsData:l.unitData[a.name].options,unit:a}),o.a.createElement(g.a,null,o.a.createElement(J,{onChange:p,unitData:l.unitData[a.name],fantasticalRulesData:l.fantasticalRulesData,unit:a})))))},ae=a(138),ne=a(207),oe=a(529),re=a(530),le=a(531),se=a(213),ie=a.n(se),ce=a(214),ue=a.n(ce),me=a(215),de=a.n(me),pe=a(540),fe=a(515),he=a(209),ve=a.n(he);function Ee(e){var t=e.onClick,a=e.getSavedLists,n=e.showText,r=void 0!==n&&n,l=o.a.useState(!1),s=Object(b.a)(l,2),i=s[0],c=s[1],u=function(){return c(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{title:"Load"},o.a.createElement(fe.a,{color:"inherit",onClick:u},o.a.createElement(ve.a,null))),r&&o.a.createElement(y.a,{onClick:u},"Load"),o.a.createElement(P,{open:i,onClose:function(e){c(!1),e&&t(e)},options:a(),title:"Choose List to load"}))}var ge=a(210),ye=a.n(ge);function Se(e){var t=e.onClick,a=e.showError,n=e.showSuccess,r=e.showText,l=void 0!==r&&r,s=function(){t()?n("Saved!"):a("You have to give the list a name!")};return o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{title:"Save"},o.a.createElement(fe.a,{color:"inherit",onClick:s},o.a.createElement(ye.a,null))),l&&o.a.createElement(y.a,{onClick:s},"Save"))}var be=a(541),ke=a(212),Oe=a.n(ke),Ce=a(211),Re=a.n(Ce);function je(e){var t=e.onClick,a=e.getSavedLists,n=e.showSuccess,r=e.showText,l=void 0!==r&&r,s=o.a.useState(!1),i=Object(b.a)(s,2),c=i[0],u=i[1],m=function(){return u(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(pe.a,{title:"Delete List"},o.a.createElement(fe.a,{color:"inherit",onClick:m},o.a.createElement(Re.a,null))),l&&o.a.createElement(y.a,{onClick:m},"Delete"),o.a.createElement(P,{open:c,onClose:function(e){u(!1),t(e),e&&n("Deleted!")},options:function(){var e=a();return e.push("Delete all"),e}(),title:"Choose List to delete"}))}function Ve(e){var t=e.loadList,a=e.saveList,n=e.removeList,r=e.getSavedLists,l=e.showError,s=e.showSuccess,i=o.a.useState(!1),c=Object(b.a)(i,2),u=c[0],m=c[1],d=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&m(e)}},p=function(e){return function(){e.apply(void 0,arguments),m(!1)}};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Oe.a,{onClick:d(!0)}),o.a.createElement(be.a,{open:u,onClose:d(!1)},o.a.createElement(o.a.Fragment,null,o.a.createElement(D.a,null,o.a.createElement(U.a,{button:!0,key:"Save"},o.a.createElement(Se,{onClick:p(a),showError:l,showSuccess:s,showText:!0})),o.a.createElement(U.a,{button:!0,key:"Load"},o.a.createElement(Ee,{onClick:p(t),getSavedLists:r,showText:!0})),o.a.createElement(U.a,{button:!0,key:"Delete"},o.a.createElement(je,{onClick:p(n),getSavedLists:r,showSuccess:s,showText:!0}))))))}var we=a(538),xe=a(535);function Le(e){return o.a.createElement(xe.a,Object.assign({elevation:6,variant:"filled"},e))}function De(e){var t=e.open,a=e.setOpen,n=e.message,r=function(e,t){"clickaway"!==t&&a(!1)};return o.a.createElement(we.a,{open:t,autoHideDuration:6e3,onClose:r},o.a.createElement(Le,{onClose:r,severity:"error"},n))}function Ue(e){var t=e.open,a=e.setOpen,n=e.message,r=function(e,t){"clickaway"!==t&&a(!1)};return o.a.createElement(we.a,{open:t,autoHideDuration:6e3,onClose:r},o.a.createElement(Le,{onClose:r,severity:"success"},n))}var We=Object(oe.a)((function(e){return{root:{marginBottom:25},flexing:{display:"flex",flexGrow:1,alignItems:"center"},flexingend:{display:"flex",flexGrow:1,justifyContent:"flex-end",alignItems:"center"}}}));function Fe(e){var t=e.ui,a=e.setUIOption,n=e.setUIOptions,r=e.armyCost,l=e.reload,s=e.saveList,u=e.loadList,m=e.removeList,d=e.getSavedLists,p=o.a.useState(!1),f=Object(b.a)(p,2),h=f[0],v=f[1],E=o.a.useState(!1),g=Object(b.a)(E,2),k=g[0],O=g[1],C=o.a.useState(""),R=Object(b.a)(C,2),j=R[0],V=R[1],w=o.a.useState(""),x=Object(b.a)(w,2),L=x[0],D=x[1],U=We(),W=function(e){D(e),O(!0)},F=function(e){V(e),v(!0)},P=function(e,t){var a="viewMode"===e?"editMode":"viewMode",o=Object(i.a)({},e,t);t&&(o=Object(c.a)({},o,Object(i.a)({},a,!1))),n(o)},M=function(e){var n=e.option,r=e.Icon,l=e.title,s=e.onClick,i=void 0===s?a:s;return o.a.createElement(pe.a,{title:l},o.a.createElement(fe.a,{color:"inherit",onClick:function(){i(n,!t[n])}},o.a.createElement(r,{fontSize:"small",color:t[n]?"inherit":"disabled"})))};return o.a.createElement("div",{className:U.root},o.a.createElement(re.a,{position:"fixed"},o.a.createElement(le.a,null,o.a.createElement("div",{className:U.flexing},o.a.createElement(Ve,{loadList:u,saveList:s,removeList:m,getSavedLists:d,showError:W,showSuccess:F}),o.a.createElement(Z.a,{smDown:!0},o.a.createElement(y.a,{variant:"h5"},"\xa0\xa0Dragon Rampant Army Builder\xa0\xa0")),o.a.createElement(Z.a,{mdUp:!0},o.a.createElement(y.a,{variant:"h5"},"\xa0\xa0DRAB\xa0\xa0")),o.a.createElement(fe.a,{color:"inherit",onClick:l},o.a.createElement(ie.a,null)),o.a.createElement(Se,{onClick:s,showError:W,showSuccess:F}),o.a.createElement(Ee,{onClick:u,getSavedLists:d})),o.a.createElement("div",{className:U.flexingend},o.a.createElement(M,{option:"viewMode",Icon:ue.a,title:"View mode",onClick:P}),o.a.createElement(M,{option:"editMode",Icon:de.a,title:"Edit mode",onClick:P}),o.a.createElement(Z.a,{smDown:!0},o.a.createElement(y.a,{variant:"h6"},"\xa0\xa0\xa0\xa0Total Points\xa0\xa0",o.a.createElement(S.a,{color:"secondary",size:"small"},o.a.createElement(y.a,{variant:"h6"},r)))),o.a.createElement(Z.a,{mdUp:!0},o.a.createElement(y.a,{variant:"h6"},"\xa0\xa0\xa0\xa0",o.a.createElement(S.a,{color:"secondary",size:"small"},o.a.createElement(y.a,{variant:"h6"},r))))))),o.a.createElement(le.a,null),o.a.createElement(Ue,{message:j,open:h,setOpen:function(e){return v(e)}}),o.a.createElement(De,{message:L,open:k,setOpen:function(e){return O(e)}}))}var Pe=a(21),Me=function(e,t){var a={};for(var n in e)t(e[n],n)&&(a=Object(c.a)({},a,Object(i.a)({},n,e[n])));return a},Ie=function(e,t,a){return Object.entries(e).reduce((function(e,a){var n=Object(b.a)(a,2),o=n[0],r=n[1];return t(e,r,o)}),a)};function Ae(e){var t=e.armyCost,a=e.units,n=e.unitData,r=e.fantasticalRulesData,l=Ie(a,(function(e,t){return t.options.reduce((function(e,a){return e+n[t.name].options[a].points}),e)}),0),s=Ie(a,(function(e,t){return t.fantasticalRules.reduce((function(e,t){return e+r[t].points}),e)}),0),i=["#8884d8","#82ca9d","#FF8042"],c=t,u=Object.keys(a).length,m=Me(a,(function(e){return"mounted"===e.type})),d=Me(a,(function(e){return"foot"===e.type})),p=Me(a,(function(e){return e.stats.shoot>0})),f=Ie(a,(function(e,t){return e+n[t.name].points}),0),h=[{name:"Mounted",Units:Object.keys(m).length,Points:Ie(m,(function(e,t){return e+t.points}),0)},{name:"Foot",Units:Object.keys(d).length,Points:Ie(d,(function(e,t){return e+t.points}),0)},{name:"Ranged",Units:Object.keys(p).length,Points:Ie(p,(function(e,t){return e+t.points}),0)}],v=[{name:"Units",value:f},{name:"Options",value:l<0?0:l},{name:"Fantastical Rules",value:s}];return o.a.createElement(k.a,{variant:"outlined",style:{marginTop:25,marginBottom:25,minWidth:400,maxWidth:800}},o.a.createElement(j.a,{title:"Statistics"}),o.a.createElement(O.a,null,o.a.createElement(L.a,{label:c+" Points",color:"primary",style:{marginRight:25,marginBottom:25}}),o.a.createElement(L.a,{label:u+" Units",color:"primary",style:{marginRight:25,marginBottom:25}}),o.a.createElement(L.a,{label:(c/(u||1)).toPrecision(3)+" Points per unit",color:"primary",style:{marginRight:25,marginBottom:25}}),o.a.createElement(y.a,{variant:"h6",style:{marginTop:25}},"Unit Distribution"),o.a.createElement(Pe.i,{height:300},o.a.createElement(Pe.b,{data:h,margin:{top:20,right:30,left:20,bottom:5}},o.a.createElement(Pe.c,{strokeDasharray:"3 3"}),o.a.createElement(Pe.k,{dataKey:"name"}),o.a.createElement(Pe.l,null),o.a.createElement(Pe.j,null),o.a.createElement(Pe.f,null),o.a.createElement(Pe.a,{dataKey:"Units",fill:i[0],minPointSize:3},o.a.createElement(Pe.e,{dataKey:"Units",position:"top"})),o.a.createElement(Pe.a,{dataKey:"Points",fill:i[1],minPointSize:3},o.a.createElement(Pe.e,{dataKey:"Points",position:"top"})))),f>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(y.a,{variant:"h6",style:{marginTop:25}},"Point Distribution"),o.a.createElement(Pe.i,{height:300},o.a.createElement(Pe.h,null,o.a.createElement(Pe.g,{data:v,dataKey:"value",label:Te,labelLine:!1,outerRadius:80},v.map((function(e,t){return o.a.createElement(Pe.d,{key:e,fill:i[t]})}))),o.a.createElement(Pe.j,null),o.a.createElement(Pe.f,null))))))}var Be=Math.PI/180,Te=function(e){var t=e.cx,a=e.cy,n=e.midAngle,r=e.innerRadius,l=e.outerRadius,s=e.percent,i=r+.5*(l-r),c=t+i*Math.cos(-n*Be),u=a+i*Math.sin(-n*Be);return o.a.createElement("text",{x:c,y:u,fill:"black",textAnchor:c>t?"start":"end",dominantBaseline:"central"},"".concat((100*s).toFixed(0),"%"))},ze=a(35),He=a.n(ze),Ne=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).componentDidMount=function(){var e=Object(c.a)({viewMode:!1,editMode:!1},He.a.get("uiOptions"));a.setState({ui:e}),a.addUnit()},a.reload=function(){a.setState({name:"New List",forceInputUpdate:a.state.forceUpdateKey?0:1,armyCost:0,nextID:1,units:{0:Object(c.a)({},a.state.data.unitData.Unit,{options:[],fantasticalRules:[]})},unitOrder:[0]})},a.addUnit=function(){var e=a.state.nextID;a.setState({nextID:e+1,units:Object(c.a)({},a.state.units,Object(i.a)({},e,Object(c.a)({},a.state.data.unitData.Unit,{options:[],fantasticalRules:[]}))),unitOrder:[].concat(Object(s.a)(a.state.unitOrder),[e])})},a.setUnit=function(e,t){a.setState({units:Object(c.a)({},a.state.units,Object(i.a)({},e,Object(c.a)({},a.state.data.unitData[t],{options:[],fantasticalRules:[]})))})},a.removeUnit=function(e){var t=Object(c.a)({},a.state.units),n=t[e].points;delete t[e],a.updateArmyCost(-n),a.setState({units:Object(c.a)({},t),unitOrder:a.state.unitOrder.filter((function(t){return t!==e}))})},a.updateUnit=function(e,t){a.setState({units:Object(c.a)({},a.state.units,Object(i.a)({},e,Object(c.a)({},a.state.units[e],{},t)))})},a.updateArmyCost=function(e){a.setState({armyCost:a.state.armyCost+e})},a.setUIOption=function(e,t){a.setState({ui:Object(c.a)({},a.state.ui,Object(i.a)({},e,t))}),He.a.set("uiOptions",Object(c.a)({},a.state.ui,Object(i.a)({},e,t)))},a.setUIOptions=function(e){a.setState({ui:Object(c.a)({},a.state.ui,{},e)}),He.a.set("uiOptions",Object(c.a)({},a.state.ui,{},e))},a.saveList=function(){if("New List"===a.state.name)return!1;var e=He.a.get("savedRosters")||[];return e=Object(c.a)({},e,Object(i.a)({},a.state.name,a.state)),He.a.set("savedRosters",e),!0},a.loadList=function(e){var t=He.a.get("savedRosters")[e];t=Object(c.a)({},t,{ui:a.state.ui,forceInputUpdate:a.state.forceUpdateKey?0:1}),a.setState(t)},a.getSavedLists=function(){var e=[];for(var t in He.a.get("savedRosters"))e.push(t);return e},a.removeList=function(e){if("Delete all"===e)He.a.set("savedRosters",[]);else{var t=He.a.get("savedRosters");t=Object.keys(t).filter((function(t){return t!==e})),He.a.set("savedRosters",t)}},a.state={name:"New List",armyCost:0,nextID:0,units:{},unitOrder:[],data:{unitData:ae,unitNames:Object.keys(ae).slice(1),fantasticalRulesData:ne},ui:{viewMode:!1,editMode:!1},forceInputUpdate:0},a}return Object(f.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=this;return o.a.createElement(E.a,null,o.a.createElement(Fe,{setUIOption:this.setUIOption,setUIOptions:this.setUIOptions,ui:this.state.ui,armyCost:this.state.armyCost,reload:this.reload,saveList:this.saveList,loadList:this.loadList,removeList:this.removeList,getSavedLists:this.getSavedLists}),o.a.createElement(g.a,null,o.a.createElement(A.a,null,o.a.createElement(y.a,{style:{border:0,marginBottom:25},variant:"h4",key:this.state.forceInputUpdate,component:"Input",id:"component-simple",value:this.state.name,onChange:function(t){return e.setState({name:t.target.value})}})),!Object.keys(this.state.units).length&&o.a.createElement(y.a,{variant:"h6",style:{marginBottom:25}},"Click the button to add your first unit!"),o.a.createElement(g.a,{display:"flex",flexDirection:"row",flexWrap:"wrap"},this.state.unitOrder.map((function(t){return o.a.createElement(te,{id:t,key:t,unit:e.state.units[t],updateUnit:e.updateUnit,updateArmyCost:e.updateArmyCost,removeUnit:e.removeUnit,setUnit:e.setUnit,data:e.state.data,ui:e.state.ui})}))),o.a.createElement(S.a,{color:"secondary",style:{marginLeft:25,marginBottom:25},onClick:this.addUnit},o.a.createElement(v.a,null)),o.a.createElement(Ae,{armyCost:this.state.armyCost,units:this.state.units,unitData:this.state.data.unitData,fantasticalRulesData:this.state.data.fantasticalRulesData})))}}]),t}(o.a.Component),Ke=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ge(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(o.a.createElement(Ne,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dragon-rampant-builder",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/dragon-rampant-builder","/service-worker.js");Ke?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Ge(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Ge(t,e)}))}}()}},[[266,1,2]]]);
//# sourceMappingURL=main.360aa42b.chunk.js.map