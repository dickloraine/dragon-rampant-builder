(this["webpackJsonpdragon-rampant-builder"]=this["webpackJsonpdragon-rampant-builder"]||[]).push([[0],{144:function(e){e.exports=JSON.parse('{"Unit":{"name":"Unit","points":0,"stats":{"attack":0,"move":0,"shoot":0,"courage":0,"armour":0,"attackValue":0,"defenceValue":0,"shootValue":0,"shootRange":"-","movement":0,"strengthPoints":0},"rules":[],"options":{},"fantasticalRules":[]},"Elite Riders":{"name":"Elite Riders","type":"mounted","points":6,"stats":{"attack":5,"move":7,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":5,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Wild Charge","Counter-charge"],"options":{"Mounted missiles":{"points":2,"remove":["Wild Charge","Counter-charge"],"setStats":{"shoot":6,"shootValue":5,"shootRange":12}},"Level Headed":{"points":2,"remove":["Wild Charge"],"setStats":{"move":5}}},"fantasticalRules":["any"]},"Heavy Riders":{"name":"Heavy Riders","type":"mounted","points":4,"stats":{"attack":5,"move":5,"shoot":0,"courage":4,"armour":3,"attackValue":4,"defenceValue":5,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Counter-charge"],"options":{"Mounted missiles":{"points":1,"setStats":{"shoot":6,"shootValue":5,"shootRange":12}},"Chariots":{"points":2,"add":["May not enter rough terrain"],"setStats":{"armour":4}}},"fantasticalRules":["any"]},"Light Riders":{"name":"Light Riders","type":"mounted","points":4,"stats":{"attack":7,"move":5,"shoot":6,"courage":5,"armour":3,"attackValue":5,"defenceValue":6,"shootValue":5,"shootRange":12,"movement":12,"strengthPoints":6},"rules":["Skirmish","Evade"],"options":{"Short range missiles":{"points":-1,"setStats":{"shootRange":6}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Greater Warbeasts":{"name":"Greater Warbeasts","type":"mounted","points":6,"stats":{"attack":5,"move":6,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":10,"strengthPoints":6},"rules":["Ranger","Wild Charge"],"options":{"Flame or Spore Attack":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wild Charge"]},"Ponderous":{"points":1,"remove":["Wild Charge"]},"Cunning":{"points":2,"setStats":{"defenceValue":5}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Lesser Warbeasts":{"name":"Lesser Warbeasts","type":"mounted","points":4,"stats":{"attack":5,"move":6,"shoot":0,"courage":4,"armour":3,"attackValue":4,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":12,"strengthPoints":6},"rules":["Ranger","Wild Charge","Fleet Footed"],"options":{"Flame or Spore Attack":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wild Charge"]},"Cunning":{"points":2,"setStats":{"defenceValue":5}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Elite Foot":{"name":"Elite Foot","type":"foot","points":6,"stats":{"attack":5,"move":5,"shoot":0,"courage":3,"armour":4,"attackValue":3,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":6},"rules":["Ranger"],"options":{"Missiles":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":18}}},"fantasticalRules":["any"]},"Heavy Foot":{"name":"Heavy Foot","type":"foot","points":4,"stats":{"attack":6,"move":5,"shoot":0,"courage":4,"armour":3,"attackValue":5,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":12},"rules":["Wall of Spears"],"options":{"Offensive":{"points":2,"setStats":{"attackValue":4},"remove":["Wall of Spears"]}},"fantasticalRules":["any"]},"Light Foot":{"name":"Light Foot","type":"foot","points":3,"stats":{"attack":6,"move":5,"shoot":0,"courage":4,"armour":2,"attackValue":5,"defenceValue":4,"shootValue":0,"shootRange":0,"movement":8,"strengthPoints":12},"rules":["Wall of Spears"],"options":{"Offensive":{"points":2,"setStats":{"attackValue":4},"remove":["Wall of Spears"]},"Short range missiles":{"points":1,"setStats":{"shoot":6,"shootValue":5,"shootRange":6}},"Mixed Weapons":{"points":2,"setStats":{"shoot":6,"shootValue":5,"shootRange":12},"remove":["Wall of Spears"]}},"fantasticalRules":["any"]},"Bellicose Foot":{"name":"Bellicose Foot","type":"foot","points":4,"stats":{"attack":5,"move":6,"shoot":0,"courage":4,"armour":2,"attackValue":3,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":8,"strengthPoints":12},"rules":["Ranger","Wild Charge","Counter-charge vs. foot","Fleet Footed"],"options":{"Terrifically Shiny Armour":{"points":2,"setStats":{"armour":3}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Cleric","Slayer"]},"Heavy Missiles":{"name":"Heavy Missiles","type":"foot","points":4,"stats":{"attack":7,"move":6,"shoot":7,"courage":4,"armour":2,"attackValue":6,"defenceValue":5,"shootValue":4,"shootRange":18,"movement":6,"strengthPoints":12},"rules":[],"options":{"Weighty Projectiles":{"points":-1,"setStats":{"shootRange":12}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Cleric","Slayer"]},"Light Missiles":{"name":"Light Missiles","type":"foot","points":4,"stats":{"attack":7,"move":6,"shoot":6,"courage":4,"armour":2,"attackValue":6,"defenceValue":5,"shootValue":5,"shootRange":18,"movement":6,"strengthPoints":12},"rules":[],"options":{"Sharpshooter":{"points":2,"setStats":{"shootValue":4}}},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Cleric","Slayer"]},"Scouts":{"name":"Scouts","type":"foot","points":2,"stats":{"attack":7,"move":5,"shoot":7,"courage":5,"armour":1,"attackValue":6,"defenceValue":6,"shootValue":5,"shootRange":12,"movement":8,"strengthPoints":6},"rules":["Hard to target","Skirmish","Evade","Fleet Footed"],"options":{},"fantasticalRules":["exclude","Spellcaster","Wizardlings","Summoner","Exploder","Cleric","Slayer"]},"Ravenous Hordes":{"name":"Ravenous Hordes","type":"foot","points":1,"stats":{"attack":7,"move":6,"shoot":0,"courage":5,"armour":1,"attackValue":6,"defenceValue":6,"shootValue":0,"shootRange":0,"movement":6,"strengthPoints":12},"rules":[],"options":{},"fantasticalRules":["No Feelings","Venomous","Hatred","Fear"]}}')},205:function(e){e.exports=JSON.parse('{"Leader":{"name":"Leader","points":0},"Cleric":{"name":"Cleric","points":4},"Slayer":{"name":"Slayer","points":4},"Exploder":{"name":"Exploder","points":2},"Fear":{"name":"Fear","points":2},"Fearful":{"name":"Fearful","points":-2},"Flying":{"name":"Flying","points":2},"Burrowing":{"name":"Burrowing","points":2},"Hatred":{"name":"Hatred","points":1},"Invisibility":{"name":"Invisibility","points":3},"Enchanted Weapons":{"name":"Enchanted Weapons","points":1},"Blessed Weapons":{"name":"Blessed Weapons","points":2},"Mystical Armour":{"name":"Mystical Armour","points":2},"Spellcaster":{"name":"Spellcaster","points":4},"Wizardlings":{"name":"Wizardlings","points":2},"Summoner":{"name":"Summoner","points":3},"No Feelings":{"name":"No Feelings","points":0},"Unstoppable March of the Dead":{"name":"Unstoppable March of the Dead","points":0},"Venomous":{"name":"Venomous","points":2}}')},206:function(e){e.exports=JSON.parse('{"Blessed Weapons":"At the start of each game, before deployment, roll one die to see if your weapons will give you a magical edge against your current opponents: on a roll of a 5-6, the weapon\'s enchantment becomes effective versus all enemy units. An effective blessed weapon rerolls all misses (once) in all Attacks (melee) or Shooting (missile).","Burrowing":"A Flying unit may move over friends and enemies during its movement, but at the end of its move must adhere to the 3\\" proximity rule just like any other unit. This is still a great advantage, as units may not usually interpenetrate in Dragon Rampant. Flying units ignore all terrain for movement and Attacks (as will their opponent for Attacks), and they never benefit from cover. Units targeted by a Flying unit will only benefit from cover if it is buildings, woods, or some other overhead cover. When retreating, a Flying unit must move its Maximum movement, and may move over any other unit; this may result in it retreating off the table more often that you would wish!","Counter-charge":"When an enemy has successfully diced to Attack this unit,  but before it moves, this unit may test for a counter-charge. Test for an Attack at 7+. If it succeeds, the two units meet a proportionate movement distance between their start positions, and both count as Attacking. If it fails, it stands in place for the enemy\'s charge. Counter-charge may not be used if the unit is Battered.","Cleric":"A Cleric unit counts as using Enchanted melee weapons against Undead units, without needing to roll for effectiveness. A Cleric may choose to ignore Fear caused by the Undead.","Counter-charge vs. foot":"Counter-charge","Enchanted Weapons":"At the start of each game, before deployment, roll one die to see if your weapons will give you a magical edge against your current opponents: on a roll of a 6, the weapon\'s enchantment becomes effective versus all enemy units. An effective enchanted weapon rerolls all misses (once) in all Attacks (melee) or Shooting (missile).","Evade":"When an enemy has successfully diced to Attack this unit, but before it moves, this unit may test to Evade at 7+. If it succeeds, it immediately carries out a Skirmish action targeting the Attacking unit only, may not move closer to the Attacking unit, and must avoid other units by 3\\" as usual; casualties inflicted in the Skirmish action cause a Courage test only at the end of the Attack. The charging unit then moves its full charge distance following the Evading unit; if it makes contact it Attacks with the Evading unit reducing its Armour to 1, and if it cannot contact it must move as close as possible. If the Evade test fails, the unit stands in place and awaits attack without shooting or moving, and its Armour drops to 1 during the Attack. Evade cannot be used if the unit is Battered.","Exploder":"As an ordered activation successful on 5+, an Exploder unit will explode. A failed activation test means an implosion occurs, and the unit is removed from play without damaging any other units, and counts as casualties.    The explosion affects all units \u2013 friend and foe alike \u2013 within a 6\\" radius of the exploding unit. This works exactly as a Shoot action hitting on 3+ (the number of dice rolled depending on the Exploder\'s Strength Points, as for all Shooting), but affects all units within the blast zone. Once exploded, the Exploder unit is removed from the table and counts as destroyed.","Fear":"Courage Tests caused as a result of Attacking (but not Shooting) by a Fear unit suffer an additional \u20131 to the total. Should two units that cause Fear encounter one another, the effect of this rule is cancelled between those units. Undead units are not affected by Fear.","Fearful":"Every Courage and Rally test suffers \u20131 to the total; if attacked by a unit causing Fear, Courage tests are taken at \u20132.","Fleet Footed":"This unit does not halve its movement in rough terrain.","Flying":"A Flying unit may move over friends and enemies during its movement, but at the end of its move must adhere to the 3\\" proximity rule just like any other unit. This is still a great advantage, as units may not usually interpenetrate in Dragon Rampant. Flying units ignore all terrain for movement and Attacks (as will their opponent for Attacks), and they never benefit from cover. Units targeted by a Flying unit will only benefit from cover if it is buildings, woods, or some other overhead cover. When retreating, a Flying unit must move its Maximum movement, and may move over any other unit; this may result in it retreating off the table more often that you would wish!","Hard to target":"Scouts count as Armour 2 versus Shooting and may only be targeted within 12\\".","Hatred":"Units with Hatred gain the Wild Charge against enemy units they have Hatred of. Units with Hatred that already have the Wild Charge special rule automatically pass their Wild Charge tests against enemy units they have Hatred of, meaning that your unit must always Attack.","Invisibility":"Invisible units may not be targeted by ranged attacks except for spells, and do not block line of sight. Invisible units become visible during Attacks and may be targeted by enemy Attacks. Invisible units may achieve objectives and use the unit proximity rule in the same way as other units; they cannot be passed through by other units, as everyone senses their presence even if they can\'t see them clearly.","Leader":"The leader of the army.","Mystical Armour":"If a unit is equipped with mystical armour, for every Strength Point lost, roll one  die. On a roll of a 6, that point will be ignored.","No Feelings":"Undead. Courage value of 0+. This means that your unit will never become Battered, but will still rout on a negative final score (their magical reanimation being broken). They also ignore the effect of Fear. Such units are, however, fragile due to a lack of armour or calcium deficiency, meaning that any hits inflicted during Attacks are rounded up (as opposed to down) when working out how many Strength Points are lost","Ranger":"This unit uses its normal Attack/Defence/Armour profile when fighting in rough terrain.","Skirmish":"As an ordered activation, successful on a 7+, the unit may choose to make a half move and Shoot either before or after this movement takes place. All models in the unit Shoot with \u20131 to their dice scores.","Slayer":"A Slayer unit counts as using Enchanted melee weapons against one Type of enemies, without needing to roll for effectiveness. A Slayer may choose to ignore Fear caused by that Type.","Spellcaster":"Can cast all Spells from the Spell Table.","Summoner":"As an ordered activation on 6+, a Summoner unit may try to raise 1 unit per turn. A Summoner that is at half strength or below (6 or 3 Strength Points) has a \u20131 modifier to its activation test for Summoning. If you deploy a Summoner in a scenario where some of your units are deployed off-table, a \u20131 modifier is applied to all Summoning activation tests for the scenario\'s duration. If successful, the summoned unit must be placed within 12\\" of the Summoner, and no closer than 6\\" to an enemy unit. If this is not achievable, the successfully summoned unit may not be placed until summoned again in another turn. A summoned unit may be any Flying, Burrowing or Undead unit, or other creatures that both players agree can materialize or spring from the ground. The summoned unit may not take further action in this phase, but will do so during your next turn. Until on the table, the summoned units do not count as casualties or for victory purposes.","Unstoppable March of the Dead":"This is a Leader trait usable by a Warband consisting only of units from the Graveyard Dwellers list (see later); it may be selected instead of the rolled Trait if you roll an 8 or higher on the Leader Skills table. Your Warband only takes Courage tests for casualties from Attacking or Shooting, and when Rallying.","Venomous":"Any Attack die (but not Defence die) that rolls 6 does 2 Strength Points of damage.","Wall of Spears":"There needs to be 6 or more Strength Points in unit to form a Wall of Spears. On a Move order, form the unit into base-to-base contact; a Wall of Spears cannot form in rough terrain or in cover, and it cannot move in this formation. Wall of Spears increases their Armour by 1 point against Attacks but not Shooting (to 4 for Heavy Foot). If the unit becomes Battered or must retreat while in a Wall of Spears, the formation is broken.","Wild Charge":"If the unit is within Attack range of an enemy unit, you must test to activate an Attack; this is the only order the unit can be given. Wild Charge may not be used if the unit is Battered.","Wizardlings":"A Wizardling chooses three spells from the Spell Table, and may not use any other spells. The spells must be chosen before the scenario is announced."}')},207:function(e){e.exports=JSON.parse('{"Almighty Prod!":{"name":"Almighty Prod!","difficulty":"6","target":"Friendly unit within 18\\"","duration":"Until start of player\'s next activation phase (unless used before that).","effect":"If the target unit fails its next Ordered Activation roll it may immediately re-roll the test (once). The spell\u2019s effect ends immediately whether successful or not."},"Banish Fear!":{"name":"Banish Fear!","difficulty":"6","target":"Friendly unit within 18\\"","duration":"Until the start of the player\'s next activation phase.","effect":"The target unit may re-roll all failed Courage tests (once per test)."},"Heal Thee!":{"name":"Heal Thee!","difficulty":"7","target":"Friendly unit within 18\\"","duration":"1 immediate action","effect":"Restore 1 Strength Point to a friendly unit within range. Strength may not rise above unit\'s original value."},"Befuddle Thee!":{"name":"Befuddle Thee!","difficulty":"7","target":"Enemy unit within 18\\"","duration":"Until the unit Rallies","effect":"Automatically Batters an Unbattered unit within range."},"Bog Thee!":{"name":"Bog Thee!","difficulty":"7","target":"Enemy unit within 18\\"","duration":"Until the end of the target\'s next activation phase.","effect":"A quagmire springs up around the target unit; any movement or combat it is involved in counts as in rough terrain. Movement of other units is not affected. There is no effect if the target unit is in or moves into \'real\' rough terrain."},"Dragon\'s Breath!":{"name":"Dragon\'s Breath!","difficulty":"7","target":"Self or any unit within 18\\"","duration":"Until the end of the target\'s next activation phase.","effect":"A magical wall of mist or fog is thrown up around the target unit; it may not Shoot or be Shot at, but may still be targeted by spells and moves as normal (the Dragon\'s Breath moves with it)."},"Power Bolt!":{"name":"Power Bolt!","difficulty":"7","target":"Enemy unit within 18\\"","duration":"1 immediate Shoot action","effect":"A magical attack of flame, electric, poison, or whatever else suits your Spellcaster. This works exactly as a Shoot action, with a Shoot Value of 4+ (suffering \u20131 to dice rolls for targets over 12\\" away)."},"Sharper Blades!":{"name":"Sharper Blades!","difficulty":"7","target":"Self or friendly unit within 18\\"","duration":"Until the start of the player\'s next activation phase.","effect":"The target unit may re-roll all failed Attack or Defence dice (once per Attack)."},"Stronger Shields!":{"name":"Stronger Shields!","difficulty":"7","target":"Self or friendly unit within 18\\"","duration":"Until the start of the player\'s next activation phase.","effect":"The target unit\'s Armour increases by 1."},"Sod-off Spell!":{"name":"Sod-off Spell!","difficulty":"8","target":"One bespelled unit within 18\\"","duration":"Immediate cancellation","effect":"This spell cancels out the effect of any spells currently affecting one unit with a duration of \'Until the start of the player\'s next activation phase\' or \'Until the unit Rallies\'. If successful, the effect of all applicable spells on the targeted units are ended immediately. The spellcaster cannot target itself."}}')},276:function(e,t,a){e.exports=a(470)},470:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(16),l=a.n(r),i=a(20),s=a(24),c=a(9),u=a(22),m=a(30),d=a.n(m),h=a(535),f=a(551),p=a(522),g=a(43),v=a(144),y=a(205),E=a(206),b=a(207),k=a(556),S=a(553),w=function(e){return o.a.createElement(S.a,Object.assign({elevation:6,variant:"filled"},e))},O=function(e){var t=e.feedback,a=e.setFeetback,n=function(e,n){"clickaway"!==n&&a(Object(c.a)({},t,{open:!1}))};return o.a.createElement(k.a,{open:t.open,autoHideDuration:6e3,onClose:n},o.a.createElement(w,{onClose:n,severity:t.severity},t.message))},R=a(544),C=a(545),x=a(224),j=a.n(x),F=a(225),A=a.n(F),V=a(226),D=a.n(V),W=a(561),U=a(472),T=a(555),I=a(542),P=a(215),B=a.n(P),M=a(214),L=a.n(M),N=a(539),z=a(541),H=a(213),J=a.n(H),K=a(540),G=a(538),q=a(110),Y=a.n(q),$=a(559),Q=a(517),X=a(519),Z=a(520),_=a(474),ee=a(521),te=function(e){var t=e.anchor,a=e.action,n=e.options,r=e.title,l=e.onClose,i=void 0===l?null:l,s=e.onOpen,c=void 0===s?null:s,m=o.a.useState(!1),d=Object(u.a)(m,2),h=d[0],f=d[1],p=function(){i&&i(),f(!1)},g="string"===typeof n[0]?n.map((function(e){return[e,null]})):n;return o.a.createElement(o.a.Fragment,null,t((function(){f(!0),c&&c()})),o.a.createElement(Q.a,{onClose:p,open:h},o.a.createElement(X.a,null,r),o.a.createElement(Z.a,null,g.map((function(e){var t=Object(u.a)(e,2),n=t[0],r=t[1];return o.a.createElement(_.a,{button:!0,onClick:function(){return function(e){a(e),p()}(n)},key:n},r&&o.a.createElement(ee.a,null,r),n)})))))},ae=function(e){var t=e.unit,a=e.options,n=e.onClose,r=t.customName?t.customName:t.name;return o.a.createElement(te,{action:function(e){e!==t.name&&n(e)},anchor:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{variant:"h5",onClick:e},o.a.createElement($.a,{label:t.points,color:"primary"}),"\xa0\xa0",r,o.a.createElement(Y.a,null)),t.customName&&o.a.createElement(g.a,{style:{marginLeft:45,marginBottom:-25}},t.name))},options:a,title:"Choose unit type"})},ne=a(523),oe=a(524),re=a(525),le=a(554);function ie(e){var t=e.unit,a=e.optionsData,n=e.onChange;if(!a||!Object.keys(a).length)return o.a.createElement("div",null);var r=function(e){return function(a){var o=Object(c.a)({},t);a.target.checked?o.options=[].concat(Object(i.a)(o.options),[e]):o.options=o.options.filter((function(t){return t!==e})),n(o)}};return o.a.createElement(p.a,{component:"fieldset",style:{marginTop:10}},o.a.createElement(ne.a,{component:"legend"},"Options"),o.a.createElement(oe.a,null,Object.keys(a).map((function(e){return o.a.createElement(re.a,{control:o.a.createElement(le.a,{onChange:r(e),checked:t.options.includes(e)}),label:o.a.createElement(g.a,null,e," ",o.a.createElement(g.a,{color:"secondary",component:"span"},"@",a[e].points)),key:e})}))))}var se=a(526),ce=a(552),ue=a(528);var me=function(e){var t=e.unitData,a=e.onChange,n=e.fantasticalRulesData,r=e.unit,l=o.a.useState(!1),s=Object(u.a)(l,2),m=s[0],d=s[1],h=t.fantasticalRules;if(!h||!h.length)return o.a.createElement("div",null);if("any"===h[0]&&(h=Object.keys(n)),"exclude"===h[0]){var v=h.slice(1);h=Object.keys(n);var y=!0,E=!1,b=void 0;try{for(var k,S=function(){var e=k.value;h=h.filter((function(t){return t!==e}))},w=v[Symbol.iterator]();!(y=(k=w.next()).done);y=!0)S()}catch(R){E=!0,b=R}finally{try{y||null==w.return||w.return()}finally{if(E)throw b}}}var O=function(){return d(!0)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(ne.a,{onClick:O,component:"legend"},"Fantastical Rules ",o.a.createElement(Y.a,null)),r.fantasticalRules&&r.fantasticalRules.length>0&&r.fantasticalRules.map((function(e){return o.a.createElement("div",{key:e},o.a.createElement(re.a,{control:o.a.createElement(le.a,{checked:!0,onClick:function(){return a(Object(c.a)({},r,{fantasticalRules:Object(i.a)(r.fantasticalRules.filter((function(t){return t!==e})))}))}}),label:o.a.createElement(g.a,null,e," ",o.a.createElement(g.a,{color:"secondary",component:"span"},"@",n[e].points,"}")),key:e}))})),o.a.createElement(p.a,{style:{marginTop:10,width:0,height:0}},o.a.createElement(ce.a,{open:m,onClose:function(){return d(!1)},onOpen:O,IconComponent:function(){return o.a.createElement(f.a,null)},multiple:!0,value:r.fantasticalRules,onChange:function(e){return a(Object(c.a)({},r,{fantasticalRules:Object(i.a)(e.target.value)}))},input:o.a.createElement(se.a,null),renderValue:function(){return" "}},h.map((function(e){return o.a.createElement(ue.a,{key:e,value:e},r.fantasticalRules.indexOf(e)<0&&o.a.createElement(g.a,null,e," ",o.a.createElement(g.a,{color:"secondary",component:"span"},"@",n[e].points)),r.fantasticalRules.indexOf(e)>-1&&o.a.createElement(g.a,{color:"primary"},e," ",o.a.createElement(g.a,{color:"secondary",component:"span"},"@",n[e].points)))})))))},de=a(530),he=a(532),fe=a(534),pe=a(529),ge=a(533);function ve(e){var t=e.stats,a=t.shoot?"".concat(t.shoot,"+"):"-",n=t.shoot?"".concat(t.shootValue,"+/").concat(t.shootRange,'"'):"-";return o.a.createElement(pe.a,null,o.a.createElement(de.a,{size:"small"},o.a.createElement(T.a,{xsDown:!0},o.a.createElement(he.a,null,o.a.createElement(ge.a,null,o.a.createElement(fe.a,null,"Attack"),o.a.createElement(fe.a,null,t.attack,"+"),o.a.createElement(fe.a,null,"Attack Value"),o.a.createElement(fe.a,null,t.attackValue,"+")),o.a.createElement(ge.a,null,o.a.createElement(fe.a,null,"Move"),o.a.createElement(fe.a,null,t.move,"+"),o.a.createElement(fe.a,null,"Defence Value"),o.a.createElement(fe.a,null,t.defenceValue,"+")),o.a.createElement(ge.a,null,o.a.createElement(fe.a,null,"Shoot"),o.a.createElement(fe.a,null,a),o.a.createElement(fe.a,null,"Shoot Value"),o.a.createElement(fe.a,null,n)),o.a.createElement(ge.a,null,o.a.createElement(fe.a,null,"Courage"),o.a.createElement(fe.a,null,t.courage,"+"),o.a.createElement(fe.a,null,"Movement"),o.a.createElement(fe.a,null,t.movement,'"')),o.a.createElement(ge.a,null,o.a.createElement(fe.a,null,"Armour"),o.a.createElement(fe.a,null,t.armour),o.a.createElement(fe.a,null,"Strength Points"),o.a.createElement(fe.a,null,t.strengthPoints)))),o.a.createElement(T.a,{smUp:!0},o.a.createElement(he.a,null,o.a.createElement(ge.a,null,o.a.createElement(fe.a,null,"A"),o.a.createElement(fe.a,null,t.attack,"+"),o.a.createElement(fe.a,null,"AV"),o.a.createElement(fe.a,null,t.attackValue,"+")),o.a.createElement(ge.a,null,o.a.createElement(fe.a,null,"M"),o.a.createElement(fe.a,null,t.move,"+"),o.a.createElement(fe.a,null,"DV"),o.a.createElement(fe.a,null,t.defenceValue,"+")),o.a.createElement(ge.a,null,o.a.createElement(fe.a,null,"S"),o.a.createElement(fe.a,null,a),o.a.createElement(fe.a,null,"SV"),o.a.createElement(fe.a,null,n)),o.a.createElement(ge.a,null,o.a.createElement(fe.a,null,"C"),o.a.createElement(fe.a,null,t.courage,"+"),o.a.createElement(fe.a,null,"MR"),o.a.createElement(fe.a,null,t.movement,'"')),o.a.createElement(ge.a,null,o.a.createElement(fe.a,null,"Ar"),o.a.createElement(fe.a,null,t.armour),o.a.createElement(fe.a,null,"SP"),o.a.createElement(fe.a,null,t.strengthPoints))))))}function ye(e){var t=e.rules;return t&&t.length?o.a.createElement(h.a,null,o.a.createElement(g.a,{variant:"h6",style:{marginTop:10}},"Special Rules"),o.a.createElement(Z.a,null,t.map((function(e){return o.a.createElement(_.a,{key:e},e)})))):o.a.createElement(o.a.Fragment,null)}var Ee=a(212),be=a.n(Ee),ke=a(209),Se=a.n(ke),we=a(210),Oe=a.n(we),Re=a(211),Ce=a.n(Re),xe=a(536),je=a(557),Fe=a(537),Ae=function(e){var t=e.anchor,a=e.action,n=e.title,r=void 0===n?"":n,l=e.label,i=void 0===l?"":l,s=e.defaultValue,c=void 0===s?"":s,m=e.cancelText,d=void 0===m?"Cancel":m,h=e.okayText,f=void 0===h?"okay":h,p=e.margin,g=void 0===p?"dense":p,v=e.onClose,y=void 0===v?null:v,E=e.onOpen,b=void 0===E?null:E,k=o.a.useState(!1),S=Object(u.a)(k,2),w=S[0],O=S[1],R=o.a.useState(),C=Object(u.a)(R,2),x=C[0],j=C[1],F=function(){y&&y(),O(!1)};return o.a.createElement(o.a.Fragment,null,t((function(){O(!0),b&&b()})),o.a.createElement(Q.a,{onClose:F,open:w},o.a.createElement(X.a,null,r),o.a.createElement(xe.a,null,o.a.createElement(je.a,{autoFocus:!0,margin:g,label:i,type:"text",fullWidth:!0,defaultValue:c||x,onChange:function(e){return j(e.target.value)},onKeyPress:function(e){return function(e,t){"Enter"===t?(j(e),a(e),F()):"ESC"===t&&F()}(e.target.value,e.key)}})),o.a.createElement(Fe.a,null,o.a.createElement(G.a,{onClick:F,color:"primary"},d),o.a.createElement(G.a,{onClick:function(){a(x),F()},color:"primary"},f))))},Ve=function(e){var t=e.id,a=e.unit,n=e.roster,r=e.updateRoster,l=e.updateUnit,u=function(e){var a=Object(i.a)(n.unitOrder),o=n.unitOrder.indexOf(t),l=e?o-1:o+1;l<0||l>=a.length||(a[l]=n.unitOrder[o],a[o]=n.unitOrder[l],r(Object(c.a)({},n,{unitOrder:a})))};return o.a.createElement(f.a,null,o.a.createElement(f.a,{display:"flex",width:"97%",style:{height:25,marginTop:10}},o.a.createElement(f.a,{display:"flex",alignItems:"center"},o.a.createElement(W.a,{title:"Move back"},o.a.createElement(U.a,{onClick:function(){return u(1)}},o.a.createElement(Se.a,null))),o.a.createElement(W.a,{title:"Move forward"},o.a.createElement(U.a,{onClick:function(){return u(0)}},o.a.createElement(Oe.a,null)))),o.a.createElement(f.a,{flexGrow:1}),o.a.createElement(f.a,{display:"flex",alignItems:"center"},o.a.createElement(Ae,{anchor:function(e){return o.a.createElement(W.a,{title:"Rename unit"},o.a.createElement(U.a,{onClick:e},o.a.createElement(Ce.a,null)))},action:function(e){return l({customName:e})},title:"Enter the name for the unit",label:"Unit name",okayText:"Rename"}),o.a.createElement(W.a,{title:"Clone unit"},o.a.createElement(U.a,{onClick:function(){var e=n.nextID;r({nextID:e+1,units:Object(c.a)({},n.units,Object(s.a)({},e,Object(c.a)({},a))),unitOrder:[].concat(Object(i.a)(n.unitOrder),[e])})}},o.a.createElement(be.a,null))))))},De=function(e,t,a,n,o){var r=o.unitData[e],l=Object(c.a)({},r,{customName:t||"",options:Object(i.a)(a),fantasticalRules:Object(i.a)(n)}),m=r.points,d=!0,h=!1,f=void 0;try{for(var p,g=l.options[Symbol.iterator]();!(d=(p=g.next()).done);d=!0){var v=p.value;if(m+=(v=r.options[v]).points,v.setStats)for(var y=0,E=Object.entries(v.setStats);y<E.length;y++){var b=Object(u.a)(E[y],2),k=b[0],S=b[1];l=Object(c.a)({},l,{stats:Object(c.a)({},l.stats,Object(s.a)({},k,S))})}if(v.add){var w=!0,O=!1,R=void 0;try{for(var C,x=v.add[Symbol.iterator]();!(w=(C=x.next()).done);w=!0){var j=C.value;l.rules=[].concat(Object(i.a)(l.rules),[j])}}catch(N){O=!0,R=N}finally{try{w||null==x.return||x.return()}finally{if(O)throw R}}}if(v.remove){var F=!0,A=!1,V=void 0;try{for(var D,W=function(){var e=D.value;l.rules=l.rules.filter((function(t){return t!==e}))},U=v.remove[Symbol.iterator]();!(F=(D=U.next()).done);F=!0)W()}catch(N){A=!0,V=N}finally{try{F||null==U.return||U.return()}finally{if(A)throw V}}}}}catch(N){h=!0,f=N}finally{try{d||null==g.return||g.return()}finally{if(h)throw f}}var T=!0,I=!1,P=void 0;try{for(var B,M=l.fantasticalRules[Symbol.iterator]();!(T=(B=M.next()).done);T=!0){var L=B.value;m+=(L=o.fantasticalRulesData[L]).points,l.rules=[].concat(Object(i.a)(l.rules),[L.name])}}catch(N){I=!0,P=N}finally{try{T||null==M.return||M.return()}finally{if(I)throw P}}return l=Object(c.a)({},l,{points:m})};var We=function(e){var t=e.id,a=e.unit,n=e.roster,r=e.updateRoster,l=e.data,i=e.setUnit,u=e.removeUnit,m=e.ui,d=function(e){r({units:Object(c.a)({},n.units,Object(s.a)({},t,Object(c.a)({},n.units[t],{},e)))})},h=function(e){e=De(e.name,e.customName,e.options,e.fantasticalRules,l),d(Object(c.a)({},e))};return o.a.createElement(N.a,{variant:"outlined",style:{marginBottom:25,maxWidth:400,width:"100%"}},o.a.createElement(K.a,{title:o.a.createElement(ae,{unit:a,onClose:function(e){return i(t,e)},options:l.unitNames}),action:o.a.createElement(G.a,{onClick:function(){return u(t)}},o.a.createElement(J.a,null))}),o.a.createElement(z.a,null,!m.editMode&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ve,{stats:a.stats}),o.a.createElement(ye,{rules:a.rules})),!m.viewMode&&o.a.createElement(o.a.Fragment,null,o.a.createElement(ie,{onChange:h,optionsData:l.unitData[a.name].options,unit:a}),o.a.createElement(me,{onChange:h,unitData:l.unitData[a.name],fantasticalRulesData:l.fantasticalRulesData,unit:a}),o.a.createElement(Ve,{id:t,unit:a,roster:n,updateRoster:r,updateUnit:d}))))},Ue=function(e,t){var a={};for(var n in e)t(e[n],n)&&(a=Object(c.a)({},a,Object(s.a)({},n,e[n])));return a},Te=function(e,t){return Object.fromEntries(Object.entries(e).map((function(e){var a=Object(u.a)(e,2),n=a[0],o=a[1];return[n,t(o,n)]})))},Ie=function(e,t,a){return Object.entries(e).reduce((function(e,a){var n=Object(u.a)(a,2),o=n[0],r=n[1];return t(e,r,o)}),a)},Pe=function(e){var t=Object(c.a)({},e.units);return t=Te(t,(function(e){return{name:e.name,customName:e.customName||"",options:e.options,fantasticalRules:e.fantasticalRules}})),Object(c.a)({},e,{units:t})},Be=function(e,t){var a=Te(e.units,(function(e){return De(e.name,e.customName,e.options,e.fantasticalRules,t)}));return Object(c.a)({},e,{units:a})},Me=function(e){var t=e.roster,a=e.updateRoster,n=e.ui,r=e.data,l=function(e,n){a({units:Object(c.a)({},t.units,Object(s.a)({},e,Object(c.a)({},r.unitData[n],{options:[],fantasticalRules:[]})))})},u=function(e){var n=Object(c.a)({},t.units);delete n[e],a({units:Object(c.a)({},n),unitOrder:t.unitOrder.filter((function(t){return t!==e}))})};return o.a.createElement(o.a.Fragment,null,o.a.createElement(f.a,{display:"flex",flexDirection:"row",flexWrap:"wrap"},t.unitOrder.map((function(e){return o.a.createElement(We,{id:e,key:e,unit:t.units[e],roster:t,updateRoster:a,removeUnit:u,setUnit:l,data:r,ui:n,unitOrder:t.unitOrder})}))),!Object.keys(t.units).length&&!n.viewMode&&o.a.createElement(g.a,{variant:"h6",style:{marginBottom:25}},"Click the button to add your first unit!"),!n.viewMode&&o.a.createElement(I.a,{color:"secondary",style:{marginLeft:25,marginBottom:25},onClick:function(){var e=t.nextID;a({nextID:e+1,units:Object(c.a)({},t.units,Object(s.a)({},e,Object(c.a)({},r.unitData.Unit,{options:[],fantasticalRules:[]}))),unitOrder:[].concat(Object(i.a)(t.unitOrder),[e])})}},o.a.createElement(L.a,null)))};function Le(e){var t=e.setRoster,a=e.setForceInputUpdate,n=e.showFeedback,r=e.onClose,l=void 0===r?null:r,i=e.showText,s=void 0!==i&&i,u=e.data,m=function(e){var o=Be(d.a.get("savedRosters")[e],u);t(Object(c.a)({},o)),a(),n("".concat(e," loaded!"),"success")};return o.a.createElement(te,{action:function(e){e&&m(e),l&&l()},anchor:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,{title:"Load List"},o.a.createElement(U.a,{color:"inherit",onClick:e},o.a.createElement(B.a,null))),s&&o.a.createElement(g.a,{onClick:e},"Load List"))},options:function(){var e=[];for(var t in d.a.get("savedRosters"))e.push(t);return e}(),title:"Choose List to load",onClose:l})}var Ne=a(216),ze=a.n(Ne);function He(e){var t=e.roster,a=e.showFeedback,n=e.onClose,r=void 0===n?null:n,l=e.showText,i=void 0!==l&&l,u=function(){!function(){if("New List"===t.name)return!1;var e=d.a.get("savedRosters")||[];return e=Object(c.a)({},e,Object(s.a)({},t.name,Object(c.a)({},Pe(t)))),d.a.set("savedRosters",e),!0}()?a("You have to give the list a name!","error"):a("Saved!","success"),r&&r()};return o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,{title:"Save List"},o.a.createElement(U.a,{color:"inherit",onClick:u},o.a.createElement(ze.a,null))),i&&o.a.createElement(g.a,{onClick:u},"Save List"))}var Je=a(223),Ke=a.n(Je),Ge=a(562),qe=a(543),Ye=a(217),$e=a.n(Ye);function Qe(e){var t=e.showFeedback,a=e.onClose,n=void 0===a?null:a,r=e.showText,l=void 0!==r&&r,i=function(e){if("Delete all"===e)d.a.set("savedRosters",[]);else{var t=d.a.get("savedRosters");delete t[e],d.a.set("savedRosters",t)}};return o.a.createElement(te,{action:function(e){i(e),e&&t("Deleted!","success"),n&&n()},anchor:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,{title:"Delete List"},o.a.createElement(U.a,{color:"inherit",onClick:e},o.a.createElement($e.a,null))),l&&o.a.createElement(g.a,{onClick:e},"Delete List"))},options:function(){var e=[];for(var t in d.a.get("savedRosters"))e.push(t);return e.push("Delete all"),e}(),title:"Choose List to delete",onClose:n})}var Xe=a(221),Ze=a.n(Xe),_e=a(218),et=a.n(_e),tt=a(219),at=a.n(tt),nt=a(220),ot=a.n(nt),rt=function(e){var t=e.roster,a=e.armyCost,n=e.showFeedback,r=e.onClose,l=void 0===r?null:r,s=e.showText,c=void 0!==s&&s,u=function(e){try{var a=e(t);o=a,navigator.clipboard.writeText(o),n("List copied to clipboard!","success")}catch(r){n("Could not export the list!","error")}var o;l&&l()},m=[["As an importable String",o.a.createElement(et.a,null),function(){return JSON.stringify(Pe(t))}],["As text",o.a.createElement(at.a,null),function(){var e=[];e.push("".concat(t.name," @").concat(a," points")),e.push("=====================================");for(var n=0,o=Object.values(t.units);n<o.length;n++){var r=o[n];e.push(""),e.push("".concat(r.customName?r.customName+" ("+r.name+")":r.name," @").concat(r.points," points")),e.push("-----------------------------------");var l=[].concat(Object(i.a)(r.options),Object(i.a)(r.fantasticalRules));if(l.length){var s=!0,c=!1,u=void 0;try{for(var m,d=l[Symbol.iterator]();!(s=(m=d.next()).done);s=!0){var h=m.value;e.push("- ".concat(h))}}catch(f){c=!0,u=f}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}}}return e.push(""),e.join("\n")}],["As markdown text",o.a.createElement(ot.a,null),function(){var e=[];e.push("**".concat(t.name," @").concat(a," points**"));for(var n=0,o=Object.values(t.units);n<o.length;n++){var r=o[n];e.push(""),e.push("* ".concat(r.customName?r.customName+" ("+r.name+")":r.name," @").concat(r.points," points"));var l=[].concat(Object(i.a)(r.options),Object(i.a)(r.fantasticalRules));if(l.length){e.push("");var s=!0,c=!1,u=void 0;try{for(var m,d=l[Symbol.iterator]();!(s=(m=d.next()).done);s=!0){var h=m.value;e.push("    - ".concat(h))}}catch(f){c=!0,u=f}finally{try{s||null==d.return||d.return()}finally{if(c)throw u}}}}return e.push(""),e.join("\n")}]];return o.a.createElement(te,{action:function(e){var t=m.reduce((function(t,a){return a[0]===e?a[2]:t}),null);u(t)},anchor:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,{title:"Export"},o.a.createElement(U.a,{color:"inherit",onClick:e},o.a.createElement(Ze.a,null))),c&&o.a.createElement(g.a,{onClick:e},"Export List"))},options:m,title:"Chose how to export",onClose:l})},lt=a(222),it=a.n(lt),st=function(e){var t=e.setRoster,a=e.setForceInputUpdate,n=e.showFeedback,r=e.data,l=e.onClose,i=void 0===l?null:l,s=e.showText,u=void 0!==s&&s;return o.a.createElement(Ae,{anchor:function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement(W.a,{title:"Import list"},o.a.createElement(U.a,{color:"inherit",onClick:e},o.a.createElement(it.a,null))),u&&o.a.createElement(g.a,{onClick:e},"Import list"))},action:function(e){if(e){try{var o=Be(JSON.parse(e),r);t(Object(c.a)({},o)),a(),n("List imported!","success")}catch(l){n("Could not import the list!","error")}i&&i()}},title:"Enter the import string",label:"Exported String",okayText:"Import",onClose:i})};function ct(e){var t=e.roster,a=e.setRoster,n=e.data,r=e.armyCost,l=e.setForceInputUpdate,i=e.showFeedback,s=o.a.useState(!1),c=Object(u.a)(s,2),m=c[0],d=c[1],h=function(e){return function(t){("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&d(e)}},f=function(){return d(!1)};return o.a.createElement(o.a.Fragment,null,o.a.createElement(Ke.a,{onClick:h(!0)}),o.a.createElement(Ge.a,{open:m,onClose:h(!1)},o.a.createElement(Z.a,null,o.a.createElement(_.a,{button:!0,key:"Save"},o.a.createElement(He,{roster:t,showFeedback:i,onClose:f,showText:!0})),o.a.createElement(_.a,{button:!0,key:"Load"},o.a.createElement(Le,{setRoster:a,setForceInputUpdate:l,showFeedback:i,data:n,onClose:f,showText:!0})),o.a.createElement(_.a,{button:!0,key:"Delete"},o.a.createElement(Qe,{showFeedback:i,onClose:f,showText:!0})),o.a.createElement(qe.a,null),o.a.createElement(_.a,{button:!0,key:"Export"},o.a.createElement(rt,{roster:t,armyCost:r,showFeedback:i,onClose:f,showText:!0})),o.a.createElement(_.a,{button:!0,key:"Import"},o.a.createElement(st,{setRoster:a,data:n,setForceInputUpdate:l,showFeedback:i,onClose:f,showText:!0})))))}function ut(e){var t=e.roster,a=e.ui,n=e.setUIOption,r=e.updateUI,l=e.armyCost,i=e.setRoster,u=e.setForceInputUpdate,m=e.showFeedback,d=e.reload,h=e.data,p=function(e,t){var a="viewMode"===e?"editMode":"viewMode",n=Object(s.a)({},e,t);t&&(n=Object(c.a)({},n,Object(s.a)({},a,!1))),r(n)},v=function(e){var t=e.option,r=e.Icon,l=e.title,i=e.onClick,s=void 0===i?n:i;return o.a.createElement(W.a,{title:l},o.a.createElement(U.a,{color:"inherit",onClick:function(){s(t,!a[t])}},o.a.createElement(r,{fontSize:"small",color:a[t]?"inherit":"disabled"})))};return o.a.createElement(f.a,{display:"flex"},o.a.createElement(R.a,{position:"fixed"},o.a.createElement(C.a,null,o.a.createElement(f.a,{display:"flex",alignItems:"center"},o.a.createElement(ct,{roster:t,setRoster:i,data:h,armyCost:l,setForceInputUpdate:u,showFeedback:m}),o.a.createElement(T.a,{smDown:!0},o.a.createElement(g.a,{variant:"h5"},"\xa0\xa0Dragon Rampant Army Builder\xa0\xa0")),o.a.createElement(T.a,{xsDown:!0,mdUp:!0},o.a.createElement(g.a,{variant:"h5"},"\xa0\xa0DRAB\xa0\xa0")),o.a.createElement(U.a,{color:"inherit",onClick:d},o.a.createElement(j.a,null)),o.a.createElement(He,{roster:t,showFeedback:m}),o.a.createElement(Le,{setRoster:i,showFeedback:m,setForceInputUpdate:u,data:h})),o.a.createElement(f.a,{flexGrow:1}),o.a.createElement(f.a,{display:"flex",alignItems:"center"},o.a.createElement(v,{option:"viewMode",Icon:A.a,title:"View mode",onClick:p}),o.a.createElement(v,{option:"editMode",Icon:D.a,title:"Edit mode",onClick:p}),o.a.createElement(T.a,{smDown:!0},o.a.createElement(g.a,{variant:"h6"},"\xa0\xa0\xa0\xa0Total Points\xa0\xa0",o.a.createElement(I.a,{color:"secondary",size:"small"},o.a.createElement(g.a,{variant:"h6"},l)))),o.a.createElement(T.a,{mdUp:!0},o.a.createElement(g.a,{variant:"h6"},"\xa0\xa0\xa0\xa0",o.a.createElement(I.a,{color:"secondary",size:"small"},o.a.createElement(g.a,{variant:"h6"},l))))))),o.a.createElement(C.a,null))}var mt=a(73),dt=a.n(mt),ht=a(558),ft=a(546),pt=a(547),gt=a(548);function vt(e){var t=e.specialRules,a=e.setUIOption,n=e.rulesData,r=e.rulesSummaryExpanded;return o.a.createElement(ht.a,{expanded:r,onChange:function(){return a("rulesSummaryExpanded",!r)},style:{maxWidth:1210}},o.a.createElement(ft.a,{expandIcon:o.a.createElement(dt.a,null)},o.a.createElement(g.a,{variant:"h5"},"Rules Summary")),o.a.createElement(pt.a,{style:{maxWidth:800}},o.a.createElement(Z.a,null,t.map((function(e){return o.a.createElement(_.a,{key:e},o.a.createElement(gt.a,{primary:e,secondary:n[e]||""}))})))))}var yt=a(549);function Et(e){var t=e.setUIOption,a=e.specialRules,n=e.spellsExpanded,r=e.spellData;return o.a.createElement(o.a.Fragment,null,function(){var e=!0,t=!1,n=void 0;try{for(var o,r=a[Symbol.iterator]();!(e=(o=r.next()).done);e=!0){var l=o.value;if("Spellcaster"===l||"Wizardlings"===l)return!0}}catch(i){t=!0,n=i}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}return!1}()&&o.a.createElement(ht.a,{expanded:n,onChange:function(){return t("spellsExpanded",!n)},style:{maxWidth:1210}},o.a.createElement(ft.a,{expandIcon:o.a.createElement(dt.a,null)},o.a.createElement(g.a,{variant:"h5"},"Spell Table")),o.a.createElement(pt.a,{style:{maxWidth:800}},o.a.createElement(pe.a,null,o.a.createElement(de.a,{size:"small",style:{minWidth:650}},o.a.createElement(yt.a,null,o.a.createElement(ge.a,{key:"headspelltable"},o.a.createElement(fe.a,{style:{minWidth:100}},"Spell name"),o.a.createElement(T.a,{smDown:!0},o.a.createElement(fe.a,{align:"center"},"Difficulty")),o.a.createElement(T.a,{mdUp:!0},o.a.createElement(fe.a,{align:"center"},"Dif")),o.a.createElement(fe.a,null,"Target"),o.a.createElement(fe.a,null,"Duration"),o.a.createElement(fe.a,null,"Effect"))),o.a.createElement(he.a,null,Object.values(r).map((function(e){return o.a.createElement(ge.a,{key:e.name},o.a.createElement(fe.a,{component:"th",scope:"row"},e.name),o.a.createElement(fe.a,{align:"center"},e.difficulty,"+"),o.a.createElement(fe.a,null,e.target),o.a.createElement(fe.a,null,e.duration),o.a.createElement(fe.a,null,e.effect))}))))))))}var bt=a(531),kt=a(19),St=a(27);function wt(e){var t=e.data,a=e.height,n=e.colors;return o.a.createElement(St.i,{height:a},o.a.createElement(St.b,{data:t,margin:{top:20,right:30,left:20,bottom:5}},o.a.createElement(St.c,{strokeDasharray:"3 3"}),o.a.createElement(St.k,{dataKey:"name"}),o.a.createElement(St.l,null),o.a.createElement(St.f,null),o.a.createElement(St.a,{dataKey:"Units",fill:n[0],minPointSize:3},o.a.createElement(St.e,{dataKey:"Units",position:"top"})),o.a.createElement(St.a,{dataKey:"Points",fill:n[1],minPointSize:3},o.a.createElement(St.e,{dataKey:"Points",position:"top"}))))}function Ot(e){var t=e.data,a=e.height,n=e.colors;return o.a.createElement(St.i,{height:a},o.a.createElement(St.h,null,o.a.createElement(St.g,{data:t,dataKey:"value",label:Ct,labelLine:!1,outerRadius:80},t.map((function(e,t){return o.a.createElement(St.d,{key:e,fill:n[t]})}))),o.a.createElement(St.j,null),o.a.createElement(St.f,null)))}var Rt=Math.PI/180,Ct=function(e){var t=e.cx,a=e.cy,n=e.midAngle,r=e.innerRadius,l=e.outerRadius,i=e.percent,s=r+.5*(l-r),c=t+s*Math.cos(-n*Rt),u=a+s*Math.sin(-n*Rt),m=(100*i).toFixed(0);return o.a.createElement("text",{x:c,y:u,fill:"black",textAnchor:c>t?"start":"end",dominantBaseline:"central"},m>0?"".concat(m,"%"):"")};function xt(e){var t=e.armyCost,a=e.units,n=e.unitData,r=e.fantasticalRulesData,l=e.statisticsExpanded,i=e.setUIOption,s=Object(kt.a)(),c=Object(bt.a)(s.breakpoints.down("sm"))?"small":"medium",u=Ie(a,(function(e,t){return t.options.reduce((function(e,a){return e+n[t.name].options[a].points}),e)}),0),m=Ie(a,(function(e,t){return t.fantasticalRules.reduce((function(e,t){return e+r[t].points}),e)}),0),d=["#8884d8","#82ca9d","#FF8042"],h=t,f=Object.keys(a).length,p=Ue(a,(function(e){return"mounted"===e.type})),v=Ue(a,(function(e){return"foot"===e.type})),y=Ue(a,(function(e){return e.stats.shoot>0})),E=Ie(a,(function(e,t){return e+n[t.name].points}),0),b=[{name:"Mounted",Units:Object.keys(p).length,Points:Ie(p,(function(e,t){return e+t.points}),0)},{name:"Foot",Units:Object.keys(v).length,Points:Ie(v,(function(e,t){return e+t.points}),0)},{name:"Ranged",Units:Object.keys(y).length,Points:Ie(y,(function(e,t){return e+t.points}),0)}],k=[{name:"Units",value:E},{name:"Options",value:u<0?0:u},{name:"Fantastical Rules",value:m}];return o.a.createElement(ht.a,{expanded:l,onChange:function(){return i("statisticsExpanded",!l)},style:{maxWidth:1210}},o.a.createElement(ft.a,{expandIcon:o.a.createElement(dt.a,null)},o.a.createElement(g.a,{variant:"h5"},"Statistics")),o.a.createElement(pt.a,null,o.a.createElement("div",null,o.a.createElement($.a,{label:h+" Points",color:"primary",size:c,style:{marginRight:10,marginBottom:25}}),o.a.createElement($.a,{label:f+" Units",color:"primary",size:c,style:{marginRight:10,marginBottom:25}}),o.a.createElement($.a,{label:(h/(f||1)).toPrecision(2)+" Points per unit",color:"primary",size:c,style:{marginRight:10,marginBottom:25}}),E>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(g.a,{variant:"h6",style:{marginTop:25}},"Unit Distribution"),o.a.createElement(wt,{data:b,height:300,colors:d}),o.a.createElement(g.a,{variant:"h6",style:{marginTop:25}},"Point Distribution"),o.a.createElement(Ot,{data:k,height:300,colors:d})))))}var jt=function(){var e=Object(n.useState)({unitData:v,unitNames:Object.keys(v).slice(1),fantasticalRulesData:y,rulesData:E,spellData:b}),t=Object(u.a)(e,1)[0],a={name:"New List",nextID:1,units:{0:Object(c.a)({},t.unitData.Unit,{options:[],fantasticalRules:[]})},unitOrder:[0]},r=Object(n.useState)(Object(c.a)({},a)),l=Object(u.a)(r,2),m=l[0],k=l[1],S=Object(n.useState)({viewMode:!1,editMode:!1,rulesSummaryExpanded:!0,spellsExpanded:!1,statisticsExpanded:!0}),w=Object(u.a)(S,2),R=w[0],C=w[1],x=Object(n.useReducer)((function(e){return e?0:1}),0),j=Object(u.a)(x,2),F=j[0],A=j[1],V=Object(n.useState)({open:!1,message:"",severity:""}),D=Object(u.a)(V,2),W=D[0],U=D[1];Object(n.useEffect)((function(e){C(Object(c.a)({},e,{},d.a.get("uiOptions")))}),[]);var T=function(e,t){C(Object(c.a)({},R,Object(s.a)({},e,t))),d.a.set("uiOptions",Object(c.a)({},R,Object(s.a)({},e,t)))},I=function(e){return k(Object(c.a)({},m,{},e))},P=function(){for(var e=new Set,a=0,n=Object.values(m.units);a<n.length;a++){var o=n[a],r=!0,l=!1,s=void 0;try{for(var c,u=o.rules[Symbol.iterator]();!(r=(c=u.next()).done);r=!0){var d=c.value;t.rulesData[t.rulesData[d]]?e.add(t.rulesData[d]):e.add(d)}}catch(h){l=!0,s=h}finally{try{r||null==u.return||u.return()}finally{if(l)throw s}}}return Object(i.a)(e).sort()}(),B=Ie(Object.values(m.units),(function(e,t){return e+t.points}),0);return o.a.createElement(h.a,null,o.a.createElement(ut,{setUIOption:T,updateUI:function(e){C(Object(c.a)({},R,{},e)),d.a.set("uiOptions",Object(c.a)({},R,{},e))},ui:R,roster:m,setRoster:k,armyCost:B,showFeedback:function(e,t){return U({open:!0,message:e,severity:t})},reload:function(){k(Object(c.a)({},a)),A()},setForceInputUpdate:A,data:t}),o.a.createElement(f.a,null,o.a.createElement(p.a,null,o.a.createElement(g.a,{style:{border:0,marginBottom:25,width:"100%"},variant:"h4",key:F,component:"Input",value:m.name,onChange:function(e){return I({name:e.target.value})}})),o.a.createElement(Me,{roster:m,updateRoster:I,ui:R,data:t}),o.a.createElement(vt,{specialRules:P,rulesData:t.rulesData,rulesSummaryExpanded:R.rulesSummaryExpanded,setUIOption:T}),o.a.createElement(Et,{specialRules:P,spellsExpanded:R.spellsExpanded,setUIOption:T,spellData:t.spellData}),o.a.createElement(xt,{armyCost:B,units:m.units,unitData:t.unitData,fantasticalRulesData:t.fantasticalRulesData,statisticsExpanded:R.statisticsExpanded,setUIOption:T})),o.a.createElement(O,{feedback:W,setFeetback:U}))},Ft=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function At(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}l.a.render(o.a.createElement(jt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/dragon-rampant-builder",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/dragon-rampant-builder","/service-worker.js");Ft?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):At(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):At(t,e)}))}}()}},[[276,1,2]]]);
//# sourceMappingURL=main.e78b2ee8.chunk.js.map